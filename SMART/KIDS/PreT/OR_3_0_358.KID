KIDS Distribution saved on Nov 29, 2012@12:19:52
OR*3.0*358
**KIDS**:OR*3.0*358^

**INSTALL NAME**
OR*3.0*358
"BLD",9038,0)
OR*3.0*358^^0^3121129^n
"BLD",9038,1,0)
^^69^69^3121012^
"BLD",9038,1,1,0)
This build includes new RPCs added for the tracking of TAR (Tracking of 
"BLD",9038,1,2,0)
Abnormal Results) Notifications and the files, routines, and parameters
"BLD",9038,1,3,0)
associated with them.  It also includes the modified routines that add
"BLD",9038,1,4,0)
functionality to the VFD ORDER GROUPS file (#21695).
"BLD",9038,1,5,0)
 
"BLD",9038,1,6,0)
ROUTINES
"BLD",9038,1,7,0)
--------
"BLD",9038,1,8,0)
ORATR
"BLD",9038,1,9,0)
ORATR1
"BLD",9038,1,10,0)
ORATR2
"BLD",9038,1,11,0)
ORATRDO
"BLD",9038,1,12,0)
ORATRPC
"BLD",9038,1,13,0)
ORWDX
"BLD",9038,1,14,0)
VFDLAOGF
"BLD",9038,1,15,0)
VFDOR
"BLD",9038,1,16,0)
VFDUCSUM
"BLD",9038,1,17,0)
VFDUOGF
"BLD",9038,1,18,0)
XQALSET
"BLD",9038,1,19,0)
 
"BLD",9038,1,20,0)
DD UPDATES
"BLD",9038,1,21,0)
----------
"BLD",9038,1,22,0)
VFD ORDER GROUPS (#21695)
"BLD",9038,1,23,0)
VFD ALERT TRACKING (#21695.2)
"BLD",9038,1,24,0)
VFD ATR CONTROL (#21695.5)
"BLD",9038,1,25,0)
 
"BLD",9038,1,26,0)
REMOTE PROCEDURES
"BLD",9038,1,27,0)
-----------------
"BLD",9038,1,28,0)
ORATR BCCCR TRANSMIT
"BLD",9038,1,29,0)
ORATR GET NOTE
"BLD",9038,1,30,0)
ORATR GET TEST RESULTS
"BLD",9038,1,31,0)
ORATR GET TIU TEMPLATE
"BLD",9038,1,32,0)
ORATR PATIENT
"BLD",9038,1,33,0)
ORATR PROVIDER
"BLD",9038,1,34,0)
ORATR SET ATR PROCESSING LEVEL
"BLD",9038,1,35,0)
ORATR SET FILTER PARAM
"BLD",9038,1,36,0)
ORATR SET TIU NOTE
"BLD",9038,1,37,0)
 
"BLD",9038,1,38,0)
PARAMETER DEFINITION
"BLD",9038,1,39,0)
--------------------
"BLD",9038,1,40,0)
ORATR DAYS TO PURGE
"BLD",9038,1,41,0)
ORATR DAYS TO ROLL-UP
"BLD",9038,1,42,0)
ORATR FILTER TAR
"BLD",9038,1,43,0)
VFD ORDER GROUP NUMBER
"BLD",9038,1,44,0)
 
"BLD",9038,1,45,0)
OPTIONS
"BLD",9038,1,46,0)
---------------
"BLD",9038,1,47,0)
ORATR ALERTS BY DATE
"BLD",9038,1,48,0)
ORATR BCCCR
"BLD",9038,1,49,0)
ORATR BIRAD
"BLD",9038,1,50,0)
ORATR CONFIGURE CONTROL FILE
"BLD",9038,1,51,0)
ORATR FILEMAN
"BLD",9038,1,52,0)
ORATR FOLLOW-UP
"BLD",9038,1,53,0)
ORATR LOCAL COORDINATOR
"BLD",9038,1,54,0)
ORATR MAIN
"BLD",9038,1,55,0)
ORATR MY ALERTS
"BLD",9038,1,56,0)
ORATR NATIONAL
"BLD",9038,1,57,0)
ORATR NOTIF
"BLD",9038,1,58,0)
ORATR OUSTANDING STATS
"BLD",9038,1,59,0)
ORATR OUTSANDING ALERTS DETAIL
"BLD",9038,1,60,0)
ORATR PROCESS
"BLD",9038,1,61,0)
ORATR RECIPIENT
"BLD",9038,1,62,0)
ORATR SINGLE PATIENT
"BLD",9038,1,63,0)
ORATR STAT PROCESS ONLY
"BLD",9038,1,64,0)
 
"BLD",9038,1,65,0)
SECURITY KEYS
"BLD",9038,1,66,0)
----------------
"BLD",9038,1,67,0)
ORATRC
"BLD",9038,1,68,0)
ORATRN
"BLD",9038,1,69,0)
TAR LOCAL COORDINATOR
"BLD",9038,4,0)
^9.64PA^21695.5^3
"BLD",9038,4,21695,0)
21695
"BLD",9038,4,21695,222)
y^y^f^^n^^n^o^n
"BLD",9038,4,21695.2,0)
21695.2
"BLD",9038,4,21695.2,222)
y^y^f^^^^n^^
"BLD",9038,4,21695.2,224)

"BLD",9038,4,21695.5,0)
21695.5
"BLD",9038,4,21695.5,222)
y^y^f^^y^^y^o^n
"BLD",9038,4,"B",21695,21695)

"BLD",9038,4,"B",21695.2,21695.2)

"BLD",9038,4,"B",21695.5,21695.5)

"BLD",9038,6.3)
27
"BLD",9038,"KRN",0)
^9.67PA^779.2^20
"BLD",9038,"KRN",.4,0)
.4
"BLD",9038,"KRN",.4,"NM",0)
^9.68A^4^2
"BLD",9038,"KRN",.4,"NM",3,0)
ORATR BI-RAD    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.4,"NM",4,0)
ORATR PT DETAIL    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.4,"NM","B","ORATR BI-RAD    FILE #21695.2",3)

"BLD",9038,"KRN",.4,"NM","B","ORATR PT DETAIL    FILE #21695.2",4)

"BLD",9038,"KRN",.401,0)
.401
"BLD",9038,"KRN",.401,"NM",0)
^9.68A^6^6
"BLD",9038,"KRN",.401,"NM",1,0)
ORATR HEALTH FAC    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.401,"NM",2,0)
ORATR OUTSTANDING    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.401,"NM",3,0)
ORATR SMART BI-RAD    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.401,"NM",4,0)
ORATR SMART NOTIF3    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.401,"NM",5,0)
ORATR TIU DOCUMENT DEFINITION    FILE #8925.1^8925.1^0
"BLD",9038,"KRN",.401,"NM",6,0)
ORATR ZZ    FILE #21695.2^21695.2^0
"BLD",9038,"KRN",.401,"NM","B","ORATR HEALTH FAC    FILE #21695.2",1)

"BLD",9038,"KRN",.401,"NM","B","ORATR OUTSTANDING    FILE #21695.2",2)

"BLD",9038,"KRN",.401,"NM","B","ORATR SMART BI-RAD    FILE #21695.2",3)

"BLD",9038,"KRN",.401,"NM","B","ORATR SMART NOTIF3    FILE #21695.2",4)

"BLD",9038,"KRN",.401,"NM","B","ORATR TIU DOCUMENT DEFINITION    FILE #8925.1",5)

"BLD",9038,"KRN",.401,"NM","B","ORATR ZZ    FILE #21695.2",6)

"BLD",9038,"KRN",.402,0)
.402
"BLD",9038,"KRN",.403,0)
.403
"BLD",9038,"KRN",.403,"NM",0)
^9.68A^1^1
"BLD",9038,"KRN",.403,"NM",1,0)
ORATR CONFIGURE    FILE #21695.5^21695.5^0
"BLD",9038,"KRN",.403,"NM","B","ORATR CONFIGURE    FILE #21695.5",1)

"BLD",9038,"KRN",.5,0)
.5
"BLD",9038,"KRN",.5,"NM",0)
^9.68A^^
"BLD",9038,"KRN",.84,0)
.84
"BLD",9038,"KRN",.84,"NM",0)
^9.68A^^
"BLD",9038,"KRN",3.6,0)
3.6
"BLD",9038,"KRN",3.8,0)
3.8
"BLD",9038,"KRN",9.2,0)
9.2
"BLD",9038,"KRN",9.8,0)
9.8
"BLD",9038,"KRN",9.8,"NM",0)
^9.68A^16^9
"BLD",9038,"KRN",9.8,"NM",1,0)
ORATR^^0^B71701278
"BLD",9038,"KRN",9.8,"NM",2,0)
ORATRPC^^0^B65001210
"BLD",9038,"KRN",9.8,"NM",9,0)
ORATRDO^^0^B2982515
"BLD",9038,"KRN",9.8,"NM",10,0)
ORATR1^^0^B13894599
"BLD",9038,"KRN",9.8,"NM",11,0)
ORATR2^^0^B115813215
"BLD",9038,"KRN",9.8,"NM",12,0)
ORATRCH^^0^B3783118
"BLD",9038,"KRN",9.8,"NM",13,0)
ORATRCOM^^0^B880378
"BLD",9038,"KRN",9.8,"NM",14,0)
ORATRMM^^0^B28891943
"BLD",9038,"KRN",9.8,"NM",16,0)
ORATRORG^^0^B70627558
"BLD",9038,"KRN",9.8,"NM","B","ORATR",1)

"BLD",9038,"KRN",9.8,"NM","B","ORATR1",10)

"BLD",9038,"KRN",9.8,"NM","B","ORATR2",11)

"BLD",9038,"KRN",9.8,"NM","B","ORATRCH",12)

"BLD",9038,"KRN",9.8,"NM","B","ORATRCOM",13)

"BLD",9038,"KRN",9.8,"NM","B","ORATRDO",9)

"BLD",9038,"KRN",9.8,"NM","B","ORATRMM",14)

"BLD",9038,"KRN",9.8,"NM","B","ORATRORG",16)

"BLD",9038,"KRN",9.8,"NM","B","ORATRPC",2)

"BLD",9038,"KRN",19,0)
19
"BLD",9038,"KRN",19,"NM",0)
^9.68A^19^19
"BLD",9038,"KRN",19,"NM",1,0)
ORATR ALERTS BY DATE^^0
"BLD",9038,"KRN",19,"NM",2,0)
ORATR BCCCR^^0
"BLD",9038,"KRN",19,"NM",3,0)
ORATR BIRAD^^0
"BLD",9038,"KRN",19,"NM",4,0)
ORATR CONFIGURE CONTROL FILE^^0
"BLD",9038,"KRN",19,"NM",5,0)
ORATR FILEMAN^^0
"BLD",9038,"KRN",19,"NM",6,0)
ORATR FOLLOW-UP^^0
"BLD",9038,"KRN",19,"NM",7,0)
ORATR FOLLOW-UP DAILY^^0
"BLD",9038,"KRN",19,"NM",8,0)
ORATR LOCAL COORDINATOR^^0
"BLD",9038,"KRN",19,"NM",9,0)
ORATR MAIN^^0
"BLD",9038,"KRN",19,"NM",10,0)
ORATR MY ALERTS^^0
"BLD",9038,"KRN",19,"NM",11,0)
ORATR NATIONAL^^0
"BLD",9038,"KRN",19,"NM",12,0)
ORATR NOTIF^^0
"BLD",9038,"KRN",19,"NM",13,0)
ORATR OUSTANDING STATS^^0
"BLD",9038,"KRN",19,"NM",14,0)
ORATR OUTSANDING ALERTS DETAIL^^0
"BLD",9038,"KRN",19,"NM",15,0)
ORATR PROCESS^^0
"BLD",9038,"KRN",19,"NM",16,0)
ORATR RECIPIENT^^0
"BLD",9038,"KRN",19,"NM",17,0)
ORATR SINGLE PATIENT^^0
"BLD",9038,"KRN",19,"NM",18,0)
ORATR SMART PROCESS^^0
"BLD",9038,"KRN",19,"NM",19,0)
ORATR STAT PROCESS ONLY^^0
"BLD",9038,"KRN",19,"NM","B","ORATR ALERTS BY DATE",1)

"BLD",9038,"KRN",19,"NM","B","ORATR BCCCR",2)

"BLD",9038,"KRN",19,"NM","B","ORATR BIRAD",3)

"BLD",9038,"KRN",19,"NM","B","ORATR CONFIGURE CONTROL FILE",4)

"BLD",9038,"KRN",19,"NM","B","ORATR FILEMAN",5)

"BLD",9038,"KRN",19,"NM","B","ORATR FOLLOW-UP",6)

"BLD",9038,"KRN",19,"NM","B","ORATR FOLLOW-UP DAILY",7)

"BLD",9038,"KRN",19,"NM","B","ORATR LOCAL COORDINATOR",8)

"BLD",9038,"KRN",19,"NM","B","ORATR MAIN",9)

"BLD",9038,"KRN",19,"NM","B","ORATR MY ALERTS",10)

"BLD",9038,"KRN",19,"NM","B","ORATR NATIONAL",11)

"BLD",9038,"KRN",19,"NM","B","ORATR NOTIF",12)

"BLD",9038,"KRN",19,"NM","B","ORATR OUSTANDING STATS",13)

"BLD",9038,"KRN",19,"NM","B","ORATR OUTSANDING ALERTS DETAIL",14)

"BLD",9038,"KRN",19,"NM","B","ORATR PROCESS",15)

"BLD",9038,"KRN",19,"NM","B","ORATR RECIPIENT",16)

"BLD",9038,"KRN",19,"NM","B","ORATR SINGLE PATIENT",17)

"BLD",9038,"KRN",19,"NM","B","ORATR SMART PROCESS",18)

"BLD",9038,"KRN",19,"NM","B","ORATR STAT PROCESS ONLY",19)

"BLD",9038,"KRN",19.1,0)
19.1
"BLD",9038,"KRN",19.1,"NM",0)
^9.68A^3^3
"BLD",9038,"KRN",19.1,"NM",1,0)
ORATRC^^0
"BLD",9038,"KRN",19.1,"NM",2,0)
ORATRN^^0
"BLD",9038,"KRN",19.1,"NM",3,0)
ORATR LOCAL COORDINATOR^^0
"BLD",9038,"KRN",19.1,"NM","B","ORATR LOCAL COORDINATOR",3)

"BLD",9038,"KRN",19.1,"NM","B","ORATRC",1)

"BLD",9038,"KRN",19.1,"NM","B","ORATRN",2)

"BLD",9038,"KRN",101,0)
101
"BLD",9038,"KRN",409.61,0)
409.61
"BLD",9038,"KRN",409.61,"NM",0)
^9.68A^^
"BLD",9038,"KRN",771,0)
771
"BLD",9038,"KRN",779.2,0)
779.2
"BLD",9038,"KRN",870,0)
870
"BLD",9038,"KRN",8989.51,0)
8989.51
"BLD",9038,"KRN",8989.51,"NM",0)
^9.68A^5^4
"BLD",9038,"KRN",8989.51,"NM",2,0)
ORATR ORDER GROUP NUMBER^^0
"BLD",9038,"KRN",8989.51,"NM",3,0)
ORATR DAYS TO PURGE^^0
"BLD",9038,"KRN",8989.51,"NM",4,0)
ORATR DAYS TO ROLL-UP^^0
"BLD",9038,"KRN",8989.51,"NM",5,0)
ORATR FILTER TAR^^0
"BLD",9038,"KRN",8989.51,"NM","B","ORATR DAYS TO PURGE",3)

"BLD",9038,"KRN",8989.51,"NM","B","ORATR DAYS TO ROLL-UP",4)

"BLD",9038,"KRN",8989.51,"NM","B","ORATR FILTER TAR",5)

"BLD",9038,"KRN",8989.51,"NM","B","ORATR ORDER GROUP NUMBER",2)

"BLD",9038,"KRN",8989.52,0)
8989.52
"BLD",9038,"KRN",8989.52,"NM",0)
^9.68A^^
"BLD",9038,"KRN",8994,0)
8994
"BLD",9038,"KRN",8994,"NM",0)
^9.68A^11^11
"BLD",9038,"KRN",8994,"NM",1,0)
ORATR BCCCR TRANSMIT^^0
"BLD",9038,"KRN",8994,"NM",2,0)
ORATR GET NOTE^^0
"BLD",9038,"KRN",8994,"NM",3,0)
ORATR GET TEST RESULTS^^0
"BLD",9038,"KRN",8994,"NM",4,0)
ORATR GET TIU TEMPLATE^^0
"BLD",9038,"KRN",8994,"NM",5,0)
ORATR HEALTH FACTORS^^0
"BLD",9038,"KRN",8994,"NM",6,0)
ORATR PATIENT^^0
"BLD",9038,"KRN",8994,"NM",7,0)
ORATR PROVIDER^^0
"BLD",9038,"KRN",8994,"NM",8,0)
ORATR SELECTED ALERT^^0
"BLD",9038,"KRN",8994,"NM",9,0)
ORATR SET ATR PROCESSING LEVEL^^0
"BLD",9038,"KRN",8994,"NM",10,0)
ORATR SET FILTER PARAM^^0
"BLD",9038,"KRN",8994,"NM",11,0)
ORATR SET TIU NOTE^^0
"BLD",9038,"KRN",8994,"NM","B","ORATR BCCCR TRANSMIT",1)

"BLD",9038,"KRN",8994,"NM","B","ORATR GET NOTE",2)

"BLD",9038,"KRN",8994,"NM","B","ORATR GET TEST RESULTS",3)

"BLD",9038,"KRN",8994,"NM","B","ORATR GET TIU TEMPLATE",4)

"BLD",9038,"KRN",8994,"NM","B","ORATR HEALTH FACTORS",5)

"BLD",9038,"KRN",8994,"NM","B","ORATR PATIENT",6)

"BLD",9038,"KRN",8994,"NM","B","ORATR PROVIDER",7)

"BLD",9038,"KRN",8994,"NM","B","ORATR SELECTED ALERT",8)

"BLD",9038,"KRN",8994,"NM","B","ORATR SET ATR PROCESSING LEVEL",9)

"BLD",9038,"KRN",8994,"NM","B","ORATR SET FILTER PARAM",10)

"BLD",9038,"KRN",8994,"NM","B","ORATR SET TIU NOTE",11)

"BLD",9038,"KRN","B",.4,.4)

"BLD",9038,"KRN","B",.401,.401)

"BLD",9038,"KRN","B",.402,.402)

"BLD",9038,"KRN","B",.403,.403)

"BLD",9038,"KRN","B",.5,.5)

"BLD",9038,"KRN","B",.84,.84)

"BLD",9038,"KRN","B",3.6,3.6)

"BLD",9038,"KRN","B",3.8,3.8)

"BLD",9038,"KRN","B",9.2,9.2)

"BLD",9038,"KRN","B",9.8,9.8)

"BLD",9038,"KRN","B",19,19)

"BLD",9038,"KRN","B",19.1,19.1)

"BLD",9038,"KRN","B",101,101)

"BLD",9038,"KRN","B",409.61,409.61)

"BLD",9038,"KRN","B",771,771)

"BLD",9038,"KRN","B",779.2,779.2)

"BLD",9038,"KRN","B",870,870)

"BLD",9038,"KRN","B",8989.51,8989.51)

"BLD",9038,"KRN","B",8989.52,8989.52)

"BLD",9038,"KRN","B",8994,8994)

"BLD",9038,"QUES",0)
^9.62^^
"BLD",9038,"REQB",0)
^9.611^^
"DATA",21695.5,1,0)
BCR^339^22^^PATMERS^1
"DATA",21695.5,1,1,0)
^21695.51P^6^6
"DATA",21695.5,1,1,1,0)
3027^^
"DATA",21695.5,1,1,2,0)
3028
"DATA",21695.5,1,1,3,0)
3745
"DATA",21695.5,1,1,4,0)
3760
"DATA",21695.5,1,1,5,0)
3759
"DATA",21695.5,1,1,6,0)
3758
"DATA",21695.5,1,2,0)
^21695.52P^2^2
"DATA",21695.5,1,2,1,0)
22
"DATA",21695.5,1,2,2,0)
25
"DATA",21695.5,1,3)

"DATA",21695.5,1,4,0)
^21695.54PA^^
"DATA",21695.5,1,5,0)
^21695.55PA^^
"DATA",21695.5,2,0)
LAB TEST^457^29^1^^0
"DATA",21695.5,2,1,0)
^21695.51P^6^6
"DATA",21695.5,2,1,1,0)
291
"DATA",21695.5,2,1,2,0)
375
"DATA",21695.5,2,1,3,0)
156
"DATA",21695.5,2,1,4,0)
1209
"DATA",21695.5,2,1,5,0)
157
"DATA",21695.5,2,1,6,0)
293
"DATA",21695.5,2,2,0)
^21695.52P^3^3
"DATA",21695.5,2,2,1,0)
14
"DATA",21695.5,2,2,2,0)
24
"DATA",21695.5,2,2,3,0)
58
"DATA",21695.5,2,4,0)
^21695.54PA^4^4
"DATA",21695.5,2,4,1,0)
177
"DATA",21695.5,2,4,2,0)
3
"DATA",21695.5,2,4,3,0)
4
"DATA",21695.5,2,4,4,0)
1320
"DATA",21695.5,2,5,0)
^21695.55PA^^
"DATA",21695.5,3,0)
MAMMOGRAM FOLLOW-UP^482^36^^PATERSM^
"DATA",21695.5,3,1,0)
^21695.51P^^
"DATA",21695.5,3,2,0)
^21695.52P^^
"DATA",21695.5,3,3)
Patient is due for mammogram.
"DATA",21695.5,3,4,0)
^21695.54PA^^
"DATA",21695.5,3,5,0)
^21695.55PA^1^1
"DATA",21695.5,3,5,1,0)
62
"DATA",21695.5,4,0)
PATIENT NOTIFICATION^361^18^^PATERSM
"DATA",21695.5,4,1,0)
^21695.51P^^
"DATA",21695.5,4,3)
Patient has not been notified of mammogram results.
"DATA",21695.5,4,4,0)
^21695.54PA^^
"DATA",21695.5,4,5,0)
^21695.55PA^1^1
"DATA",21695.5,4,5,1,0)
63
"DATA",21695.5,5,0)
PENDING F/U ORDERS^480^35^^P
"DATA",21695.5,5,1,0)
^21695.51P^^0
"DATA",21695.5,5,2,0)
^21695.52P^^
"DATA",21695.5,5,3)
Breast Imaging Order Pending More than 30 days.
"DATA",21695.5,5,4,0)
^21695.54PA^^
"DATA",21695.5,5,5,0)
^21695.55PA^2^2
"DATA",21695.5,5,5,1,0)
69
"DATA",21695.5,5,5,2,0)
68
"DATA",21695.5,6,0)
BCR OUTSIDE RESULTS^498^37^^PATMERS^1
"DATA",21695.5,6,1,0)
^21695.51P^^
"DATA",21695.5,6,2,0)
^21695.52P^^
"DATA",21695.5,6,3)
Patient has reported abnormal non-VA results.
"DATA",21695.5,6,4,0)
^21695.54PA^^
"DATA",21695.5,6,5,0)
^21695.55PA^1^1
"DATA",21695.5,6,5,1,0)
78
"FIA",21695)
VFD ORDER GROUPS
"FIA",21695,0)
^VFD(21695,
"FIA",21695,0,0)
21695O
"FIA",21695,0,1)
y^y^f^^n^^n^o^n
"FIA",21695,0,10)

"FIA",21695,0,11)

"FIA",21695,0,"RLRO")

"FIA",21695,21695)
0
"FIA",21695,21695.0001)
0
"FIA",21695,21695.0002)
0
"FIA",21695.2)
VFD ALERT TRACKING
"FIA",21695.2,0)
^VFD(21695.2,
"FIA",21695.2,0,0)
21695.2A
"FIA",21695.2,0,1)
y^y^f^^^^n^^
"FIA",21695.2,0,10)

"FIA",21695.2,0,11)

"FIA",21695.2,0,"RLRO")

"FIA",21695.2,21695.2)
0
"FIA",21695.2,21695.21)
0
"FIA",21695.2,21695.211)
0
"FIA",21695.2,21695.212)
0
"FIA",21695.2,21695.213)
0
"FIA",21695.2,21695.24)
0
"FIA",21695.2,21695.25)
0
"FIA",21695.2,21695.26)
0
"FIA",21695.5)
VFD TAR CONTROL
"FIA",21695.5,0)
^VFD(21695.5,
"FIA",21695.5,0,0)
21695.5
"FIA",21695.5,0,1)
y^y^f^^y^^y^o^n
"FIA",21695.5,0,10)

"FIA",21695.5,0,11)

"FIA",21695.5,0,"RLRO")

"FIA",21695.5,21695.5)
0
"FIA",21695.5,21695.51)
0
"FIA",21695.5,21695.52)
0
"FIA",21695.5,21695.54)
0
"FIA",21695.5,21695.55)
0
"FRV1",21695.5,"1,0",2)
SMART NOTE BI-RAD SELECTOR
"FRV1",21695.5,"1,0",2,"F")
;PXRMD(801.41,
"FRV1",21695.5,"1,0",3)
SMART BI-RADS FOLLOW-UP
"FRV1",21695.5,"1,0",3,"F")
;TIU(8925.1,
"FRV1",21695.5,"2,0",2)
SMART NOTE LAB
"FRV1",21695.5,"2,0",2,"F")
;PXRMD(801.41,
"FRV1",21695.5,"2,0",3)
SMART LAB FOLLOW-UP
"FRV1",21695.5,"2,0",3,"F")
;TIU(8925.1,
"FRV1",21695.5,"3,0",2)
SMART MAMMOGRAM SCREENING
"FRV1",21695.5,"3,0",2,"F")
;PXRMD(801.41,
"FRV1",21695.5,"3,0",3)
SMART MAMMOGRAM SCREENING
"FRV1",21695.5,"3,0",3,"F")
;TIU(8925.1,
"FRV1",21695.5,"4,0",2)
SMART PT NOTIFICATION
"FRV1",21695.5,"4,0",2,"F")
;PXRMD(801.41,
"FRV1",21695.5,"4,0",3)
SMART PATIENT NOTIFICATION
"FRV1",21695.5,"4,0",3,"F")
;TIU(8925.1,
"FRV1",21695.5,"5,0",2)
SMART ORDERS MORE THAN 30 DAYS
"FRV1",21695.5,"5,0",2,"F")
;PXRMD(801.41,
"FRV1",21695.5,"5,0",3)
SMART PENDING ORDERS
"FRV1",21695.5,"5,0",3,"F")
;TIU(8925.1,
"FRV1",21695.5,"6,0",2)
SMART ABNORMAL OUTSIDE RESULTS
"FRV1",21695.5,"6,0",2,"F")
;PXRMD(801.41,
"FRV1",21695.5,"6,0",3)
SMART ABNORMAL OUTSIDE RESULTS
"FRV1",21695.5,"6,0",3,"F")
;TIU(8925.1,
"FRV1K",21695.5,"1,0",2)
B
"FRV1K",21695.5,"1,0",2,1)
SMART NOTE BI-RAD SELECTOR
"FRV1K",21695.5,"2,0",2)
B
"FRV1K",21695.5,"2,0",2,1)
SMART NOTE LAB
"FRV1K",21695.5,"3,0",2)
B
"FRV1K",21695.5,"3,0",2,1)
SMART MAMMOGRAM SCREENING
"FRV1K",21695.5,"4,0",2)
B
"FRV1K",21695.5,"4,0",2,1)
SMART PT NOTIFICATION
"FRV1K",21695.5,"5,0",2)
B
"FRV1K",21695.5,"5,0",2,1)
SMART ORDERS MORE THAN 30 DAYS
"FRV1K",21695.5,"6,0",2)
B
"FRV1K",21695.5,"6,0",2,1)
SMART ABNORMAL OUTSIDE RESULTS
"IX",21695,21695,"AC",0)
21695^AC^Order Group number (without checksum)^MU^^F^IR^I^21695^^^^^S
"IX",21695,21695,"AC",.1,0)
^^1^1^3091112^
"IX",21695,21695,"AC",.1,1,0)
^VFD(21695,"AC",Group Number (no checksum),DA)=""
"IX",21695,21695,"AC",1)
S ^VFD(21695,"AC",$E(X(1),1,$L(X(1))-1),DA)=""
"IX",21695,21695,"AC",2)
K ^VFD(21695,"AC",$E(X(1),1,$L(X(1))-1),DA)
"IX",21695,21695,"AC",2.5)
K ^VFD(21695,"AC")
"IX",21695,21695,"AC",11.1,0)
^.114IA^1^1
"IX",21695,21695,"AC",11.1,1,0)
1^F^21695^.01^^1^F
"IX",21695,21695,"AD",0)
21695^AD^Whole file xref for Group ID^R^^F^IR^W^21695.0001^^^^^S
"IX",21695,21695,"AD",.1,0)
^^1^1^3091112^
"IX",21695,21695,"AD",.1,1,0)
^VFD(21695,"AD",Group Number,Type,DA(1),DA)=""
"IX",21695,21695,"AD",1)
S ^VFD(21695,"AD",$E(X(1),1,240),X(2),DA(1),DA)=""
"IX",21695,21695,"AD",2)
K ^VFD(21695,"AD",$E(X(1),1,240),X(2),DA(1),DA)
"IX",21695,21695,"AD",2.5)
K ^VFD(21695,"AD")
"IX",21695,21695,"AD",11.1,0)
^.114IA^2^2
"IX",21695,21695,"AD",11.1,1,0)
1^F^21695.0001^.01^240^1^F
"IX",21695,21695,"AD",11.1,2,0)
2^C^^^^2
"IX",21695,21695,"AD",11.1,2,1.5)
S X=$P($G(^VFD(21695,DA(1),0)),U,3)
"IX",21695,21695,"AE",0)
21695^AE^ID + Group number xref^R^^F^IR^W^21695.0001^^^^^S
"IX",21695,21695,"AE",1)
S ^VFD(21695,"AE",$E(X(1),1,30),X(2),DA(1),DA)=""
"IX",21695,21695,"AE",2)
K ^VFD(21695,"AE",$E(X(1),1,30),X(2),DA(1),DA)
"IX",21695,21695,"AE",2.5)
K ^VFD(21695,"AE")
"IX",21695,21695,"AE",11.1,0)
^.114IA^2^2
"IX",21695,21695,"AE",11.1,1,0)
1^F^21695.0001^.01^30^1^F
"IX",21695,21695,"AE",11.1,1,3)

"IX",21695,21695,"AE",11.1,2,0)
2^C^^^^2
"IX",21695,21695,"AE",11.1,2,1.5)
S X=$P($G(^VFD(21695,DA(1),0)),U,1)
"IX",21695,21695,"C",0)
21695^C^Uniqueness Index for Key 'A' of File #21695^R^^F^IR^I^21695^^^^^LS
"IX",21695,21695,"C",1)
S ^VFD(21695,"C",X,DA)=""
"IX",21695,21695,"C",2)
K ^VFD(21695,"C",X,DA)
"IX",21695,21695,"C",2.5)
K ^VFD(21695,"C")
"IX",21695,21695,"C",11.1,0)
^.114IA^1^1
"IX",21695,21695,"C",11.1,1,0)
1^F^21695^.01^^1
"KEY",21695,21695,"A",0)
21695^A^P^40
"KEY",21695,21695,"A",2,0)
^.312IA^1^1
"KEY",21695,21695,"A",2,1,0)
.01^21695^1
"KEYPTR",21695,21695,"A")
21695^C
"KRN",.4,2643,-1)
0^4
"KRN",.4,2643,0)
ORATR PT DETAIL^3121015.1403^@@^21695.2^^@^3121129
"KRN",.4,2643,"F",1)
"Patient Name: ";S1~.04;""~"Date Created: ";C1~.02;X~"Processed: ";C1~1.05;X~"Date Complete: ";C40~1.08;X~"Display Text: ";C1~1.01;X;C3~
"KRN",.4,2643,"F",2)
"Recipients: ";C1~20,.01;X;C20~"Follow-up Orders: ";C1~5,.02;X;C20~"Health Factors: ";C1~6,.01;X;C20~
"KRN",.4,2643,"H")
Mammography SMART Report
"KRN",.4,2644,-1)
0^3
"KRN",.4,2644,0)
ORATR BI-RAD^3120930.1905^@^21695.2^^@^3121125
"KRN",.4,2644,"F",2)
.02;L17~.04~5,.02;L10~
"KRN",.4,2644,"H")
VFD ALERT TRACKING LIST
"KRN",.401,1850,-1)
0^3
"KRN",.401,1850,0)
ORATR SMART BI-RAD^3121125.2048^@^21695.2^^@^3121125
"KRN",.401,1850,2,0)
^.4014^2^2
"KRN",.401,1850,2,1,0)
21695.26^^HEALTH FACTORS^".01^^^^^^4
"KRN",.401,1850,2,1,1,0)
^.40141^1^1
"KRN",.401,1850,2,1,1,1,0)
21695.2^6
"KRN",.401,1850,2,1,1,"B",21695.2,1)

"KRN",.401,1850,2,1,3,0)
^.401419^1^1
"KRN",.401,1850,2,1,3,1,0)
OVF1^9.2
"KRN",.401,1850,2,1,3,1,"OVF0")
S I(1,0)=$G(D1),I(0,0)=$G(D0),Y(1)=$S($D(^VFD(21695.2,D0,6,D1,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^AUPNVHF(+D0,0)) D0=-1 S Y(101)=$S($D(^AUPNVHF(D0,0)):^(0),1:"")
"KRN",.401,1850,2,1,3,"B","OVF1",1)

"KRN",.401,1850,2,1,"CM")
X DPP(1,"OVF1",9.2) S X=$P($G(^AUTTHF(+$P(Y(101),U,1),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(1)=X
"KRN",.401,1850,2,1,"F")
SMART BI-RACz^SMART BI-RAD
"KRN",.401,1850,2,1,"GET")
X DPP(1,"OVF1",9.2) S X=$P($G(^AUTTHF(+$P(Y(101),U,1),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(1)=X
"KRN",.401,1850,2,1,"QCON")
I (DISX(1)]]"SMART BI-RACz")&(DISX(1)']]"SMART BI-RAD 9")
"KRN",.401,1850,2,1,"T")
SMART BI-RAD 9^SMART BI-RAD 9
"KRN",.401,1850,2,1,"TXT")
HEALTH FACTORS from SMART BI-RAD to SMART BI-RAD 9
"KRN",.401,1850,2,2,0)
21695.2^.02^DATE CREATED^^^^^^^1
"KRN",.401,1850,2,2,"ASK")
1
"KRN",.401,1850,2,2,"F")
3120900.999999^Sep 1,2012^Sep 1,2012
"KRN",.401,1850,2,2,"GET")
S DISX(2)=$P($G(^VFD(21695.2,D0,0)),U,2)
"KRN",.401,1850,2,2,"IX")
^VFD(21695.2,"D",^VFD(21695.2,^2
"KRN",.401,1850,2,2,"QCON")
I (DISX(2)]]3120900.999999)&(DISX(2)']]3121001.24)
"KRN",.401,1850,2,2,"SER")
6.0000^0.8571
"KRN",.401,1850,2,2,"T")
3121001.24^Oct 1,2012@2400^Oct 1,2012@24:00
"KRN",.401,1850,2,2,"TXT")
DATE CREATED from Sep 1,2012 to Oct 1,2012@24:00
"KRN",.401,1850,2,"B",21695.2,2)

"KRN",.401,1850,2,"B",21695.26,1)

"KRN",.401,1850,"%D",0)
^.4012^3^3^3121125^^^
"KRN",.401,1850,"%D",1,0)
Alerts by BI-RAD Health Factors.
"KRN",.401,1850,"%D",2,0)
 
"KRN",.401,1850,"%D",3,0)
*** DO NOT CHANGE *******
"KRN",.401,1853,-1)
0^5
"KRN",.401,1853,0)
ORATR TIU DOCUMENT DEFINITION^3121010^^8925.1^^^3121010
"KRN",.401,1853,2,0)
^.4014^1^1
"KRN",.401,1853,2,1,0)
8925.1^.01^NAME
"KRN",.401,1853,2,1,"F")
SMART^SMART^SMART
"KRN",.401,1853,2,1,"IX")
^TIU(8925.1,"B",^TIU(8925.1,^2
"KRN",.401,1853,2,1,"QCON")
I (DISX(1)]]"SMART")&(DISX(1)']]"SMARU")
"KRN",.401,1853,2,1,"T")
SMARU^SMARU^SMARU
"KRN",.401,1853,2,1,"TXT")
NAME from SMART to SMARU
"KRN",.401,1853,2,"B",8925.1,1)

"KRN",.401,1854,-1)
0^1
"KRN",.401,1854,0)
ORATR HEALTH FAC^3121011.1324^@^21695.2^^@^3121011
"KRN",.401,1854,2,0)
^.4014^2^2
"KRN",.401,1854,2,1,0)
21695.26^^HEALTH FACTORS^+".01^^^^^^4
"KRN",.401,1854,2,1,1,0)
^.40141^1^1
"KRN",.401,1854,2,1,1,1,0)
21695.2^6
"KRN",.401,1854,2,1,1,"B",21695.2,1)

"KRN",.401,1854,2,1,3,0)
^.401419^1^1
"KRN",.401,1854,2,1,3,1,0)
OVF1^9.2
"KRN",.401,1854,2,1,3,1,"OVF0")
S I(1,0)=$G(D1),I(0,0)=$G(D0),Y(1)=$S($D(^VFD(21695.2,D0,6,D1,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^AUPNVHF(+D0,0)) D0=-1 S Y(101)=$S($D(^AUPNVHF(D0,0)):^(0),1:"")
"KRN",.401,1854,2,1,3,"B","OVF1",1)

"KRN",.401,1854,2,1,"ASK")
1
"KRN",.401,1854,2,1,"CM")
X DPP(1,"OVF1",9.2) S X=$P($G(^AUTTHF(+$P(Y(101),U,1),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(1)=X
"KRN",.401,1854,2,1,"F")
TAQz^TAR
"KRN",.401,1854,2,1,"GET")
X DPP(1,"OVF1",9.2) S X=$P($G(^AUTTHF(+$P(Y(101),U,1),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(1)=X
"KRN",.401,1854,2,1,"QCON")
I DISX(1)]]"TAQz"
"KRN",.401,1854,2,1,"T")
z^
"KRN",.401,1854,2,1,"TXT")
HEALTH FACTORS from TAR
"KRN",.401,1854,2,2,0)
21695.2^.02^DATE CREATED^^^^^^^1
"KRN",.401,1854,2,2,"ASK")
1
"KRN",.401,1854,2,2,"F")
3120100.999999^Jan 1,2012^Jan 1,2012
"KRN",.401,1854,2,2,"GET")
S DISX(2)=$P($G(^VFD(21695.2,D0,0)),U,2)
"KRN",.401,1854,2,2,"IX")
^VFD(21695.2,"D",^VFD(21695.2,^2
"KRN",.401,1854,2,2,"QCON")
I DISX(2)]]3120100.999999
"KRN",.401,1854,2,2,"SER")
0.0000^0.0000
"KRN",.401,1854,2,2,"T")
z^
"KRN",.401,1854,2,2,"TXT")
DATE CREATED from Jan 1,2012
"KRN",.401,1854,2,"B",21695.2,2)

"KRN",.401,1854,2,"B",21695.26,1)

"KRN",.401,1854,"%D",0)
^.4012^3^3^3121011^^^^
"KRN",.401,1854,"%D",1,0)
Sort alters by Health factors and date.
"KRN",.401,1854,"%D",2,0)
  
"KRN",.401,1854,"%D",3,0)
DO NOT EDIT
"KRN",.401,1855,-1)
0^2
"KRN",.401,1855,0)
ORATR OUTSTANDING^3121011.1511^@^21695.2^^@^3121129
"KRN",.401,1855,2,0)
^.4014^1^1
"KRN",.401,1855,2,1,0)
21695.2^^(TODAY-(DATE CREATED))^+-"^;"Days Outstanding: "^^^^^4
"KRN",.401,1855,2,1,"ASK")
1
"KRN",.401,1855,2,1,"CM")
S Y(2)=$S($D(^VFD(21695.2,D0,0)):^(0),1:"") N %I,%H,% D NOW^%DTC S X=X,Y(1)=$G(X) S X=$P(Y(2),U,2),Y=X,X=Y(1),X=X,X1=X,X2=Y,X="" D:X2 ^%DTC:X1 I D0>0 S DISX(1)=X
"KRN",.401,1855,2,1,"F")
2.999999^3
"KRN",.401,1855,2,1,"GET")
S Y(2)=$S($D(^VFD(21695.2,D0,0)):^(0),1:"") N %I,%H,% D NOW^%DTC S X=X,Y(1)=$G(X) S X=$P(Y(2),U,2),Y=X,X=Y(1),X=X,X1=X,X2=Y,X="" D:X2 ^%DTC:X1 I D0>0 S DISX(1)=X
"KRN",.401,1855,2,1,"QCON")
I (DISX(1)]]2.999999)&(DISX(1)']]30)
"KRN",.401,1855,2,1,"T")
30^30
"KRN",.401,1855,2,1,"TXT")
(TODAY-(DATE CREATED)) from 3 to 30
"KRN",.401,1855,2,"B",21695.2,1)

"KRN",.401,1855,"%D",0)
^.4012^1^1^3121011^^^^
"KRN",.401,1855,"%D",1,0)
Listing of Alerts with no completion date sorted by age of alert.
"KRN",.401,1856,-1)
0^6
"KRN",.401,1856,0)
ORATR ZZ^3121011.146^@^21695.2^^@^3121011
"KRN",.401,1856,"DC",1)
1.08^?." "
"KRN",.401,1856,"DC",2)
.02^>3120911
"KRN",.401,1856,"DC",3)
.02^<3121001
"KRN",.401,1856,"DIS",0)
I $P($G(^VFD(21695.2,D0,1)),U,8)?." " I $P($P($G(^VFD(21695.2,D0,0)),U,2),".")>3120911 X DIS("0@1") I $T
"KRN",.401,1856,"DIS","0@1")
I $P($G(^VFD(21695.2,D0,0)),U,2)<3121001
"KRN",.401,1856,"DIS","XFORM",2)
$P(;,".")
"KRN",.401,1856,"DL")
1
"KRN",.401,1856,"DL",0)
^1^2^3^
"KRN",.401,1856,"O",0)
^
"KRN",.401,1856,"O",1,0)
DATE COMPLETED NULL
"KRN",.401,1856,"O",2,0)
   and DATE CREATED GREATER THAN the entire day SEP 11,2012^T-30
"KRN",.401,1856,"O",3,0)
   and DATE CREATED LESS THAN OCT 1,2012^T-10
"KRN",.401,1856,"QR")
3121011.150031^13
"KRN",.401,1867,-1)
0^4
"KRN",.401,1867,0)
ORATR SMART NOTIF3^3121125.2101^@^21695.2^^@^3121129
"KRN",.401,1867,2,0)
^.4014^3^3
"KRN",.401,1867,2,1,0)
21695.26^^.01:.01:.03^"^;"Patient Notifications: "^^^^^4
"KRN",.401,1867,2,1,1,0)
^.40141^1^1
"KRN",.401,1867,2,1,1,1,0)
21695.2^6
"KRN",.401,1867,2,1,1,"B",21695.2,1)

"KRN",.401,1867,2,1,3,0)
^.401419^2^2
"KRN",.401,1867,2,1,3,1,0)
OVF1^9.2
"KRN",.401,1867,2,1,3,1,"OVF0")
S I(1,0)=$G(D1),I(0,0)=$G(D0),Y(1)=$S($D(^VFD(21695.2,D0,6,D1,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^AUPNVHF(+D0,0)) D0=-1 S I(100,0)=$G(D0)
"KRN",.401,1867,2,1,3,2,0)
OVF1^9.3
"KRN",.401,1867,2,1,3,2,"OVF0")
X DPP(1,"OVF1",9.2) S Y(101)=$S($D(^AUPNVHF(D0,0)):^(0),1:""),Y(102)=$G(X),D0=$P(Y(101),U,1) S:'D0!'$D(^AUTTHF(+D0,0)) D0=-1 S Y(201)=$S($D(^AUTTHF(D0,0)):^(0),1:"")
"KRN",.401,1867,2,1,3,"B","OVF1",1)

"KRN",.401,1867,2,1,3,"B","OVF1",2)

"KRN",.401,1867,2,1,"CM")
X DPP(1,"OVF1",9.3) S X=$P($G(^AUTTHF(+$P(Y(201),U,3),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(1)=X
"KRN",.401,1867,2,1,"F")
SMART PT CONTACSz^SMART PT CONTACT
"KRN",.401,1867,2,1,"GET")
X DPP(1,"OVF1",9.3) S X=$P($G(^AUTTHF(+$P(Y(201),U,3),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(1)=X
"KRN",.401,1867,2,1,"QCON")
I DISX(1)="SMART PT CONTACT"
"KRN",.401,1867,2,1,"T")
SMART PT CONTACT^SMART PT CONTACT
"KRN",.401,1867,2,1,"TXT")
.01:.01:.03 equals SMART PT CONTACT
"KRN",.401,1867,2,2,0)
21695.26^^HEALTH FACTORS^+".01^^^^^^4
"KRN",.401,1867,2,2,1,0)
^.40141^1^1
"KRN",.401,1867,2,2,1,1,0)
21695.2^6
"KRN",.401,1867,2,2,1,"B",21695.2,1)

"KRN",.401,1867,2,2,3,0)
^.401419^1^1
"KRN",.401,1867,2,2,3,1,0)
OVF1^9.2
"KRN",.401,1867,2,2,3,1,"OVF0")
S I(1,0)=$G(D1),I(0,0)=$G(D0),Y(1)=$S($D(^VFD(21695.2,D0,6,D1,0)):^(0),1:""),D0=$P(Y(1),U,1) S:'D0!'$D(^AUPNVHF(+D0,0)) D0=-1 S Y(101)=$S($D(^AUPNVHF(D0,0)):^(0),1:"")
"KRN",.401,1867,2,2,3,"B","OVF1",1)

"KRN",.401,1867,2,2,"CM")
X DPP(2,"OVF1",9.2) S X=$P($G(^AUTTHF(+$P(Y(101),U,1),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(2)=X
"KRN",.401,1867,2,2,"GET")
X DPP(2,"OVF1",9.2) S X=$P($G(^AUTTHF(+$P(Y(101),U,1),0)),U) S D0=I(0,0) S D1=I(1,0) I D1>0 S DISX(2)=X
"KRN",.401,1867,2,2,"QCON")
I DISX(2)'=""
"KRN",.401,1867,2,2,"TXT")
HEALTH FACTORS not null
"KRN",.401,1867,2,3,0)
21695.26^2^DAYS TO NOTIFICATION^-+^^^^^^2
"KRN",.401,1867,2,3,1,0)
^.40141^1^1
"KRN",.401,1867,2,3,1,1,0)
21695.2^6
"KRN",.401,1867,2,3,1,"B",21695.2,1)

"KRN",.401,1867,2,3,"GET")
S Y(21695.26,2,2)=$S($D(^VFD(21695.2,D0,0)):^(0),1:""),Y(21695.26,2,1)=$S($D(^VFD(21695.2,D0,6,D1,0)):^(0),1:"") S X=$P(Y(21695.26,2,1),U,5),X1=X,X2=$P(Y(21695.26,2,2),U,2),X="" D:X2 ^%DTC:X1 S DISX(3)=X S:DISX(3)]"" DISX(3)=+DISX(3)
"KRN",.401,1867,2,3,"QCON")
I DISX(3)'=""
"KRN",.401,1867,2,3,"TXT")
DAYS TO NOTIFICATION not null
"KRN",.401,1867,2,"B",21695.26,1)

"KRN",.401,1867,2,"B",21695.26,2)

"KRN",.401,1867,2,"B",21695.26,3)

"KRN",.401,1867,"%D",0)
^.4012^1^1^3121129^^^
"KRN",.401,1867,"%D",1,0)
Sorted by Alert Date MINUS Visit Date.
"KRN",.403,131,-1)
0^1
"KRN",.403,131,0)
ORATR CONFIGURE^@^@^^3121115.1325^^^21695.5^0^0^1
"KRN",.403,131,40,0)
^.4031I^2^2
"KRN",.403,131,40,1,0)
1^^1,1^2^2
"KRN",.403,131,40,1,1)
Page 1
"KRN",.403,131,40,1,40,0)
^.4032IP^530^4
"KRN",.403,131,40,1,40,521,0)
PAGE 1 DISPLAY^1^1,1^e
"KRN",.403,131,40,1,40,528,0)
ORATR ORD ITEM REPEAT^2^11,2^e
"KRN",.403,131,40,1,40,528,2)
7^^^
"KRN",.403,131,40,1,40,529,0)
ORATR OR NOT REPEAT^3^11,40^e
"KRN",.403,131,40,1,40,529,2)
3
"KRN",.403,131,40,1,40,530,0)
ORATR LAB TEST REPEAT^4^15,40^e
"KRN",.403,131,40,1,40,530,2)
3
"KRN",.403,131,40,2,0)
2^^1,1^1^1
"KRN",.403,131,40,2,1)
Page 2
"KRN",.403,131,40,2,40,0)
^.4032IP^532^2
"KRN",.403,131,40,2,40,531,0)
ORATR PG2^1^1,1^e
"KRN",.403,131,40,2,40,532,0)
ORATR REM DEF REPEAT^2^4,2^e
"KRN",.403,131,40,2,40,532,2)
8
"KRN",.404,521,0)
PAGE 1 DISPLAY^21695.5
"KRN",.404,521,40,0)
^.4044I^11^11
"KRN",.404,521,40,1,0)
1^SMART NOTIFICATION CONFIGURATION^1^^
"KRN",.404,521,40,1,2)
^^1,25
"KRN",.404,521,40,2,0)
2^TYPE^3
"KRN",.404,521,40,2,1)
.01
"KRN",.404,521,40,2,2)
3,8^71^3,2
"KRN",.404,521,40,3,0)
3^REMINDER DIALOG^3
"KRN",.404,521,40,3,1)
.02
"KRN",.404,521,40,3,2)
5,19^60^5,2
"KRN",.404,521,40,4,0)
4^INITIAL NOTE^3
"KRN",.404,521,40,4,1)
.03
"KRN",.404,521,40,4,2)
6,19^60^6,5
"KRN",.404,521,40,5,0)
5^DEFAULT TEXT^3
"KRN",.404,521,40,5,1)
3
"KRN",.404,521,40,5,2)
7,19^60^7,5
"KRN",.404,521,40,6,0)
6^Select ORDERABLE ITEM:^1
"KRN",.404,521,40,6,2)
^^10,2
"KRN",.404,521,40,7,0)
8^Select LAB TEST:^1
"KRN",.404,521,40,7,2)
^^14,40
"KRN",.404,521,40,8,0)
7^Select OR NOTIFICATION:^1
"KRN",.404,521,40,8,2)
^^10,40
"KRN",.404,521,40,9,0)
9^INACTIVE^3
"KRN",.404,521,40,9,1)
.04
"KRN",.404,521,40,9,2)
8,19^3^8,9
"KRN",.404,521,40,9,4)
0
"KRN",.404,521,40,10,0)
10^RECIPIENTS^3
"KRN",.404,521,40,10,1)
.05
"KRN",.404,521,40,10,2)
8,41^8^8,29
"KRN",.404,521,40,10,4)
0
"KRN",.404,521,40,11,0)
11^TRANSMIT^3
"KRN",.404,521,40,11,1)
.06
"KRN",.404,521,40,11,2)
8,67^3^8,57
"KRN",.404,521,40,11,4)
0
"KRN",.404,528,0)
ORATR ORD ITEM REPEAT^21695.51
"KRN",.404,528,40,0)
^.4044I^1^1
"KRN",.404,528,40,1,0)
1^^3
"KRN",.404,528,40,1,1)
.01
"KRN",.404,528,40,1,2)
1,1^30
"KRN",.404,529,0)
ORATR OR NOT REPEAT^21695.52
"KRN",.404,529,40,0)
^.4044I^1^1
"KRN",.404,529,40,1,0)
1^^3
"KRN",.404,529,40,1,1)
.01
"KRN",.404,529,40,1,2)
1,1^40
"KRN",.404,530,0)
ORATR LAB TEST REPEAT^21695.54
"KRN",.404,530,40,0)
^.4044I^1^1
"KRN",.404,530,40,1,0)
1^^3
"KRN",.404,530,40,1,1)
.01
"KRN",.404,530,40,1,2)
1,1^40
"KRN",.404,531,0)
ORATR PG2^21695.5
"KRN",.404,531,40,0)
^.4044I^2^2
"KRN",.404,531,40,1,0)
1^SMART NOTIFICATION CONFIGURATION^1
"KRN",.404,531,40,1,2)
^^1,25
"KRN",.404,531,40,2,0)
2^Select REMINDER DEFINITION:^1
"KRN",.404,531,40,2,2)
^^3,2
"KRN",.404,532,0)
ORATR REM DEF REPEAT^21695.55
"KRN",.404,532,40,0)
^.4044I^1^1
"KRN",.404,532,40,1,0)
1^^3
"KRN",.404,532,40,1,1)
.01
"KRN",.404,532,40,1,2)
1,1^57
"KRN",19,14236,-1)
0^9
"KRN",19,14236,0)
ORATR MAIN^Mammography SMART Reports^^M^^^^^^^^^^1
"KRN",19,14236,1,0)
^19.06^1^1^3121011^^^^
"KRN",19,14236,1,1,0)
Main entry for Abnormal Alert Tracking reports.
"KRN",19,14236,10,0)
^19.01IP^9^4
"KRN",19,14236,10,1,0)
14237^1
"KRN",19,14236,10,1,"^")
ORATR SINGLE PATIENT
"KRN",19,14236,10,3,0)
14239^2
"KRN",19,14236,10,3,"^")
ORATR MY ALERTS
"KRN",19,14236,10,8,0)
14248
"KRN",19,14236,10,8,"^")
ORATR LOCAL COORDINATOR
"KRN",19,14236,10,9,0)
14249
"KRN",19,14236,10,9,"^")
ORATR NATIONAL
"KRN",19,14236,20)
W @IOF,!?3,"M A M M O G R A P H Y  S M A R T  R E P O R T S"
"KRN",19,14236,99)
62742,54178
"KRN",19,14236,99.1)
62790,7209
"KRN",19,14236,"U")
MAMMOGRAPHY SMART REPORTS
"KRN",19,14237,-1)
0^17
"KRN",19,14237,0)
ORATR SINGLE PATIENT^Alerts for a Patient^^R^^^^^^^^
"KRN",19,14237,1,0)
^19.06^1^1^3121010^^
"KRN",19,14237,1,1,0)
Select a patient and get Alerts returned in medical record order.
"KRN",19,14237,25)
ONEPT^ORATR1
"KRN",19,14237,"U")
ALERTS FOR A PATIENT
"KRN",19,14238,-1)
0^1
"KRN",19,14238,0)
ORATR ALERTS BY DATE^Alerts by Date^^R^^ORATRC^^^^^^
"KRN",19,14238,1,0)
^^1^1^3120830^
"KRN",19,14238,1,1,0)
Returns all Alerts in medical record order
"KRN",19,14238,25)
ALLDT^ORATR1
"KRN",19,14238,"U")
ALERTS BY DATE
"KRN",19,14239,-1)
0^10
"KRN",19,14239,0)
ORATR MY ALERTS^Alerts I Received^^R^^^^^^^^
"KRN",19,14239,1,0)
^19.06^1^1^3121009^^
"KRN",19,14239,1,1,0)
Alerts the current user has received
"KRN",19,14239,25)
RECIPME^ORATR1
"KRN",19,14239,99)
62699,81676
"KRN",19,14239,"U")
ALERTS I RECEIVED
"KRN",19,14240,-1)
0^15
"KRN",19,14240,0)
ORATR PROCESS^Alerts by Process Status^^R^^ORATRC^^^^^^
"KRN",19,14240,1,0)
^^1^1^3120830^
"KRN",19,14240,1,1,0)
Alerts sorted by Process status.
"KRN",19,14240,25)
PROCESS^ORATR1
"KRN",19,14240,"U")
ALERTS BY PROCESS STATUS
"KRN",19,14241,-1)
0^16
"KRN",19,14241,0)
ORATR RECIPIENT^Alerts for a Provider^^R^^ORATRC^^^^^^
"KRN",19,14241,1,0)
^^1^1^3120830^
"KRN",19,14241,1,1,0)
Specify a Provider and associated Alerts are returned.
"KRN",19,14241,25)
RECIP^ORATR1
"KRN",19,14241,"U")
ALERTS FOR A PROVIDER
"KRN",19,14242,-1)
0^19
"KRN",19,14242,0)
ORATR STAT PROCESS ONLY^Process Statistics^^R^^ORATRN^^^^^^
"KRN",19,14242,1,0)
^19.06^1^1^3120930^^
"KRN",19,14242,1,1,0)
Returns number of alerts by process in specified date range.
"KRN",19,14242,25)
STAT^ORATR1
"KRN",19,14242,"U")
PROCESS STATISTICS
"KRN",19,14243,-1)
0^3
"KRN",19,14243,0)
ORATR BIRAD^Alerts by BI-RAD^^R^^ORATRC^^^^^^
"KRN",19,14243,1,0)
^^1^1^3120930^
"KRN",19,14243,1,1,0)
Reporting by BI-RAD codes.
"KRN",19,14243,25)
BIRAD^ORATR1
"KRN",19,14243,"U")
ALERTS BY BI-RAD
"KRN",19,14244,-1)
0^4
"KRN",19,14244,0)
ORATR CONFIGURE CONTROL FILE^ORATR CONFIGURATION^^C^^ORATR LOCAL COORDINATOR^^^^^^
"KRN",19,14244,1,0)
^19.06^3^3^3121115^^^^
"KRN",19,14244,1,1,0)
This is used by a local coordinator to setup entries in the VFD TAR CONTROL
"KRN",19,14244,1,2,0)
file (#21695.5).  This file is used to determine what qualifies a notification
"KRN",19,14244,1,3,0)
as a TAR notification and what health factors are tracked.
"KRN",19,14244,25)

"KRN",19,14244,30)
VFD(21695.5,
"KRN",19,14244,31)
AENOL
"KRN",19,14244,32)

"KRN",19,14244,40)
[ORATR CONFIGURE]
"KRN",19,14244,41)
21695.5
"KRN",19,14244,99.1)
62741,65446
"KRN",19,14244,"U")
ORATR CONFIGURATION
"KRN",19,14245,-1)
0^2
"KRN",19,14245,0)
ORATR BCCCR^ORATR BCCCR^^B^^^^^^^^
"KRN",19,14245,1,0)
^19.06^1^1^3121011^^^
"KRN",19,14245,1,1,0)
This is the main menu context for the ORATR/BCCCR transmit RPC.
"KRN",19,14245,"RPC",0)
^19.05P^1^1
"KRN",19,14245,"RPC",1,0)
ORATR BCCCR TRANSMIT
"KRN",19,14245,"U")
ORATR BCCCR
"KRN",19,14246,-1)
0^6
"KRN",19,14246,0)
ORATR FOLLOW-UP^ORATR FOLLOW-UP^^R^^^^^^^^
"KRN",19,14246,1,0)
^19.06^2^2^3121011^^
"KRN",19,14246,1,1,0)
This is a background job that sends out new TAR Notifications based on
"KRN",19,14246,1,2,0)
clinical reminders.
"KRN",19,14246,25)
1^ORATR2
"KRN",19,14246,200.9)
y
"KRN",19,14246,"U")
ORATR FOLLOW-UP
"KRN",19,14247,-1)
0^12
"KRN",19,14247,0)
ORATR NOTIF^Patient Notification Statistics^^R^^ORATRN^^^^^^^^1
"KRN",19,14247,1,0)
^^1^1^3121011^
"KRN",19,14247,1,1,0)
Returns patient notification types for a specified date range.
"KRN",19,14247,20)
W @IOF,!,"N O T I F I C A T I O N S"
"KRN",19,14247,25)
NOTIF^ORATR1
"KRN",19,14247,"U")
PATIENT NOTIFICATION STATISTIC
"KRN",19,14248,-1)
0^8
"KRN",19,14248,0)
ORATR LOCAL COORDINATOR^Local Coordinator Menu^^M^^^^^^^^
"KRN",19,14248,1,0)
^19.06^1^1^3121012^^^^
"KRN",19,14248,1,1,0)
Menu to support local TAR coordinator
"KRN",19,14248,10,0)
^19.01IP^9^7
"KRN",19,14248,10,1,0)
14238^1
"KRN",19,14248,10,1,"^")
ORATR ALERTS BY DATE
"KRN",19,14248,10,2,0)
14243^4
"KRN",19,14248,10,2,"^")
ORATR BIRAD
"KRN",19,14248,10,4,0)
14241^2
"KRN",19,14248,10,4,"^")
ORATR RECIPIENT
"KRN",19,14248,10,5,0)
14240^3
"KRN",19,14248,10,5,"^")
ORATR PROCESS
"KRN",19,14248,10,7,0)
14250^5
"KRN",19,14248,10,7,"^")
ORATR OUTSANDING ALERTS DETAIL
"KRN",19,14248,10,8,0)
14252^6
"KRN",19,14248,10,8,"^")
ORATR FILEMAN
"KRN",19,14248,10,9,0)
14244^CONF
"KRN",19,14248,10,9,"^")
ORATR CONFIGURE CONTROL FILE
"KRN",19,14248,99)
62777,48927
"KRN",19,14248,"U")
LOCAL COORDINATOR MENU
"KRN",19,14249,-1)
0^11
"KRN",19,14249,0)
ORATR NATIONAL^National Coordinator Menu^^M^^ORATRN^^^^^^
"KRN",19,14249,1,0)
^^1^1^3121011^
"KRN",19,14249,1,1,0)
Menu to support the National coordinator
"KRN",19,14249,10,0)
^19.01IP^3^3
"KRN",19,14249,10,1,0)
14247^1
"KRN",19,14249,10,1,"^")
ORATR NOTIF
"KRN",19,14249,10,2,0)
14242^2
"KRN",19,14249,10,2,"^")
ORATR STAT PROCESS ONLY
"KRN",19,14249,10,3,0)
14251^3
"KRN",19,14249,10,3,"^")
ORATR OUSTANDING STATS
"KRN",19,14249,99)
62742,40626
"KRN",19,14249,"U")
NATIONAL COORDINATOR MENU
"KRN",19,14250,-1)
0^14
"KRN",19,14250,0)
ORATR OUTSANDING ALERTS DETAIL^Outstanding Alerts^^R^^^^^^^^
"KRN",19,14250,1,0)
^^1^1^3121011^
"KRN",19,14250,1,1,0)
returns un-completed alerts with patient detail
"KRN",19,14250,25)
OUTSTAL^ORATR1
"KRN",19,14250,"U")
OUTSTANDING ALERTS
"KRN",19,14251,-1)
0^13
"KRN",19,14251,0)
ORATR OUSTANDING STATS^Outstanding Alerts^^R^^^^^^^^
"KRN",19,14251,1,0)
^^1^1^3121011^
"KRN",19,14251,1,1,0)
Returns statistics for outstanding alerts
"KRN",19,14251,25)
OUTSTAN^ORATR1
"KRN",19,14251,"U")
OUTSTANDING ALERTS
"KRN",19,14252,-1)
0^5
"KRN",19,14252,0)
ORATR FILEMAN^Fileman Options^^R^^ORATRC^^^^^^^^1
"KRN",19,14252,1,0)
^19.06^1^1^3121011^^
"KRN",19,14252,1,1,0)
This option exposes Fileman options to thr local coordinator.
"KRN",19,14252,20)
W @IOF,!,"T A R   F I L E M A N   O P T I O N S"
"KRN",19,14252,25)
FM^ORATR1
"KRN",19,14252,"U")
FILEMAN OPTIONS
"KRN",19,14253,-1)
0^7
"KRN",19,14253,0)
ORATR FOLLOW-UP DAILY^ORATR DAILY FOLLOW-UP^^R^^^^^^^^^
"KRN",19,14253,1,0)
^19.06^2^2^3121025^^
"KRN",19,14253,1,1,0)
This is a nightly job that sends TAR notifications based on clinical 
"KRN",19,14253,1,2,0)
reminders.
"KRN",19,14253,25)
2^ORATR2
"KRN",19,14253,200.9)
y
"KRN",19,14253,"U")
ORATR DAILY FOLLOW-UP
"KRN",19,14254,-1)
0^18
"KRN",19,14254,0)
ORATR SMART PROCESS^BROKER MENU OPTION FOR SMART/TAR SERVICE^^B^^^^^^^^
"KRN",19,14254,99.1)
62763,39849
"KRN",19,14254,"RPC",0)
^19.05P^2^2
"KRN",19,14254,"RPC",1,0)
ORATR BCCCR TRANSMIT
"KRN",19,14254,"RPC",2,0)
ORATR SET ATR PROCESSING LEVEL
"KRN",19,14254,"U")
BROKER MENU OPTION FOR SMART/T
"KRN",19.1,688,-1)
0^1
"KRN",19.1,688,0)
ORATRC^MAMOGRAPHY LOCAL COORDINATOR^l
"KRN",19.1,688,1,0)
^19.11^1^1^3121011^^
"KRN",19.1,688,1,1,0)
KEY for local mammagraphy coordinator
"KRN",19.1,689,-1)
0^2
"KRN",19.1,689,0)
ORATRN^MAMMOGRAPHY NATIONAL COORD
"KRN",19.1,689,1,0)
^^1^1^3121010^
"KRN",19.1,689,1,1,0)
Key for National Mammography Coordinator
"KRN",19.1,690,-1)
0^3
"KRN",19.1,690,0)
ORATR LOCAL COORDINATOR^^l^n
"KRN",19.1,690,1,0)
^^3^3^3121116^
"KRN",19.1,690,1,1,0)
This key is used to access certain TAR notification settings and will
"KRN",19.1,690,1,2,0)
be used to determine who notifications get sent to when there has not
"KRN",19.1,690,1,3,0)
been any action taken.
"KRN",8989.51,740,-1)
0^2
"KRN",8989.51,740,0)
ORATR ORDER GROUP NUMBER^ORDER GROUPS NUMBER^0
"KRN",8989.51,740,1)
N
"KRN",8989.51,740,20,0)
^^2^2^3100205^
"KRN",8989.51,740,20,1,0)
Holds the current Order Group Number for the VFD ORDER GROUPS (File 
"KRN",8989.51,740,20,2,0)
#21695)
"KRN",8989.51,740,30,0)
^8989.513I^1^1
"KRN",8989.51,740,30,1,0)
2^4.2
"KRN",8989.51,741,-1)
0^5
"KRN",8989.51,741,0)
ORATR FILTER TAR^ORATR FILTER TAR^0
"KRN",8989.51,741,1)
F^0:245^
"KRN",8989.51,741,2)

"KRN",8989.51,741,4,0)
^8989.514^^
"KRN",8989.51,741,6)
F
"KRN",8989.51,741,20,0)
^^10^10^3121005^
"KRN",8989.51,741,20,1,0)
This is a user parameter that allows the user to choose if he/she wants 
"KRN",8989.51,741,20,2,0)
to see the TAR notifications separate from all other notifications or if 
"KRN",8989.51,741,20,3,0)
he/she wants the them segregated out.
"KRN",8989.51,741,20,4,0)
 
"KRN",8989.51,741,20,5,0)
The value is returned in the following form:
"KRN",8989.51,741,20,6,0)
 
"KRN",8989.51,741,20,7,0)
     Time ; Always Show Filtered ATRs
"KRN",8989.51,741,20,8,0)
 
"KRN",8989.51,741,20,9,0)
Time - Date/Time
"KRN",8989.51,741,20,10,0)
Always Show... - Boolean (0,1)
"KRN",8989.51,741,30,0)
^8989.513I^2^1
"KRN",8989.51,741,30,2,0)
2^200
"KRN",8989.51,742,-1)
0^4
"KRN",8989.51,742,0)
ORATR DAYS TO ROLL-UP^ORATR DAYS TO ROLL-UP^0^^DAYS TO ROLL-UP
"KRN",8989.51,742,1)
N^1:30
"KRN",8989.51,742,6)
N^0:1
"KRN",8989.51,742,20,0)
^8989.512^2^2^3121002^^
"KRN",8989.51,742,20,1,0)
This is the number of days to wait before sending the TAR notification to the 
"KRN",8989.51,742,20,2,0)
holder of the TAR LOCAL COORDINATOR key.
"KRN",8989.51,742,30,0)
^8989.513I^1^1
"KRN",8989.51,742,30,1,0)
9^4.2
"KRN",8989.51,743,-1)
0^3
"KRN",8989.51,743,0)
ORATR DAYS TO PURGE^ORATR DAYS TO PURGE^0^^DAYS TO PURGE
"KRN",8989.51,743,1)
N^14:600^Enter the number of days to wait before purging notification
"KRN",8989.51,743,6)
N^0:1
"KRN",8989.51,743,20,0)
^^3^3^3121002^
"KRN",8989.51,743,20,1,0)
This is the number of days to wait after a TAR notification has been marked
"KRN",8989.51,743,20,2,0)
as "TRANSMITTED" before purging that record form the VFD ALERT TRACKING
"KRN",8989.51,743,20,3,0)
file (#21695.2).
"KRN",8989.51,743,30,0)
^8989.513I^1^1
"KRN",8989.51,743,30,1,0)
9^4.2
"KRN",8994,3574,-1)
0^7
"KRN",8994,3574,0)
ORATR PROVIDER^PROVIDER^ORATR^2^S
"KRN",8994,3574,1,0)
^^2^2^3121005^
"KRN",8994,3574,1,1,0)
This RPC returns an array containing all of the TAR notifications for a 
"KRN",8994,3574,1,2,0)
praticular provider.
"KRN",8994,3574,2,0)
^8994.02A^1^1
"KRN",8994,3574,2,1,0)
PROVIDER ID^1^50^1^1
"KRN",8994,3574,2,1,1,0)
^8994.021^1^1^3120727^^
"KRN",8994,3574,2,1,1,1,0)
This is the DUZ of the provider.
"KRN",8994,3574,2,"B","PROVIDER ID",1)

"KRN",8994,3574,2,"PARAMSEQ",1,1)

"KRN",8994,3574,3,0)
^^27^27^3121005^
"KRN",8994,3574,3,1,0)
Returns an array containing all of the TAR notifications for a particular 
"KRN",8994,3574,3,2,0)
provider.  Returns '0' if no records found.
"KRN",8994,3574,3,3,0)
 
"KRN",8994,3574,3,4,0)
  Format of data returned  p1^p2^...^p12^p13 where
"KRN",8994,3574,3,5,0)
     p1  := Info Flag
"KRN",8994,3574,3,6,0)
     p2  := Patient Info (Name, last 4 of SSN)    
"KRN",8994,3574,3,7,0)
     p3  := Patient Location    
"KRN",8994,3574,3,8,0)
     p4  := Alert Urgency Level    
"KRN",8994,3574,3,9,0)
     p5  := Alert Date/Time    
"KRN",8994,3574,3,10,0)
     p6  := Alert Message    
"KRN",8994,3574,3,11,0)
     p7  := Forwarded By/When    
"KRN",8994,3574,3,12,0)
     p8  := XQAID (See below)    
"KRN",8994,3574,3,13,0)
     p9  := null
"KRN",8994,3574,3,14,0)
     p10 := Remove w/o Processing Flag (1=YES)   
"KRN",8994,3574,3,15,0)
     p11 := Forwarding Comments (if any)
"KRN",8994,3574,3,16,0)
     p12 := Pointer to the original order (file 100)
"KRN",8994,3574,3,17,0)
     p13 := Level of Processing (Set of Codes)
"KRN",8994,3574,3,18,0)
 
"KRN",8994,3574,3,19,0)
XQAID=p1;p2..;p5;p6 where p1, p2,...p8 are:
"KRN",8994,3574,3,20,0)
     p1  := ATR , PATIENT , NOTIFICATION ID (pointer to 100.9)
"KRN",8994,3574,3,21,0)
     p2  := 10000 (constant)
"KRN",8994,3574,3,22,0)
     p3  := PATIENT
"KRN",8994,3574,3,23,0)
     p4  := date/time notification was sent
"KRN",8994,3574,3,24,0)
     p5  := type of ATR (pointer to VFD ATR CONTROL file #21695.5)
"KRN",8994,3574,3,25,0)
     p6  := date/time of original order
"KRN",8994,3574,3,26,0)
     p7  := IEN in VFD ALERT TRACKING file (#21695.2)
"KRN",8994,3574,3,27,0)
     p8  := IEN of the associated TIU Note
"KRN",8994,3575,-1)
0^6
"KRN",8994,3575,0)
ORATR PATIENT^PATIENT^ORATR^2^S
"KRN",8994,3575,1,0)
^^2^2^3121005^
"KRN",8994,3575,1,1,0)
This RPC returns an array of all the TAR notifications for a particular 
"KRN",8994,3575,1,2,0)
patient.  Data comes from the VFD ALERT TRACKING FILE (#21695.2).
"KRN",8994,3575,2,0)
^8994.02A^1^1
"KRN",8994,3575,2,1,0)
PATIENT ID^1^50^1^1
"KRN",8994,3575,2,1,1,0)
^8994.021^1^1^3120727^^
"KRN",8994,3575,2,1,1,1,0)
This is the patient's DFN.
"KRN",8994,3575,2,"B","PATIENT ID",1)

"KRN",8994,3575,2,"PARAMSEQ",1,1)

"KRN",8994,3575,3,0)
^^27^27^3121005^
"KRN",8994,3575,3,1,0)
Returns an array containing all of the TAR notifications for a particular 
"KRN",8994,3575,3,2,0)
patient.  Returns '0' if no records found.
"KRN",8994,3575,3,3,0)
 
"KRN",8994,3575,3,4,0)
  Format of data returned  p1^p2^...^p11^p12 where
"KRN",8994,3575,3,5,0)
     p1  := Info Flag
"KRN",8994,3575,3,6,0)
     p2  := Patient Info (Name, last 4 of SSN)    
"KRN",8994,3575,3,7,0)
     p3  := Patient Location    
"KRN",8994,3575,3,8,0)
     p4  := Alert Urgency Level    
"KRN",8994,3575,3,9,0)
     p5  := Alert Date/Time    
"KRN",8994,3575,3,10,0)
     p6  := Alert Message    
"KRN",8994,3575,3,11,0)
     p7  := Forwarded By/When    
"KRN",8994,3575,3,12,0)
     p8  := XQAID (See below)    
"KRN",8994,3575,3,13,0)
     p9  := null
"KRN",8994,3575,3,14,0)
     p10 := Remove w/o Processing Flag (1=YES)   
"KRN",8994,3575,3,15,0)
     p11 := Forwarding Comments (if any)
"KRN",8994,3575,3,16,0)
     p12 := Pointer to the original order (file 100)
"KRN",8994,3575,3,17,0)
     p13 := Level of Processing (Set of Codes)
"KRN",8994,3575,3,18,0)
 
"KRN",8994,3575,3,19,0)
XQAID=p1;p2..;p5;p6 where p1, p2,...p8 are:
"KRN",8994,3575,3,20,0)
     p1  := ATR , PATIENT , NOTIFICATION ID (pointer to 100.9)
"KRN",8994,3575,3,21,0)
     p2  := 10000 (constant)
"KRN",8994,3575,3,22,0)
     p3  := PATIENT
"KRN",8994,3575,3,23,0)
     p4  := date/time notification was sent
"KRN",8994,3575,3,24,0)
     p5  := type of ATR (pointer to VFD ATR CONTROL file #21695.5)
"KRN",8994,3575,3,25,0)
     p6  := date/time of original order
"KRN",8994,3575,3,26,0)
     p7  := IEN in VFD ALERT TRACKING file (#21695.2)
"KRN",8994,3575,3,27,0)
     p8  := IEN of the associated TIU Note
"KRN",8994,3576,-1)
0^2
"KRN",8994,3576,0)
ORATR GET NOTE^NOTE^ORATR^1^S
"KRN",8994,3576,1,0)
^^2^2^3121005^
"KRN",8994,3576,1,1,0)
This RPC returns the default TIU Note and Reminder Dialog for the given 
"KRN",8994,3576,1,2,0)
type of TAR notification.
"KRN",8994,3576,2,0)
^8994.02A^1^1
"KRN",8994,3576,2,1,0)
NOTIFICATION ID^1^50^1^1
"KRN",8994,3576,2,1,1,0)
^^1^1^3121005^
"KRN",8994,3576,2,1,1,1,0)
This is the IEN in the VFD TAR CONTROL FILE (#21695.5).
"KRN",8994,3576,2,"B","NOTIFICATION ID",1)

"KRN",8994,3576,2,"PARAMSEQ",1,1)

"KRN",8994,3576,3,0)
^^5^5^3121005^
"KRN",8994,3576,3,1,0)
This RPC returns a up-arrow delimited string with the following pieces:
"KRN",8994,3576,3,2,0)
 
"KRN",8994,3576,3,3,0)
     1  -  TIU Note IEN (in file 8925.1)
"KRN",8994,3576,3,4,0)
     2  -  TIU Note Name
"KRN",8994,3576,3,5,0)
     3  -  Reminder Dialog IEN (in file 801.41)
"KRN",8994,3577,-1)
0^10
"KRN",8994,3577,0)
ORATR SET FILTER PARAM^PARAM^ORATR^1^S
"KRN",8994,3577,1,0)
^^3^3^3121005^
"KRN",8994,3577,1,1,0)
This RPC is used to set the parameter ORATR FILTER TAR for the current 
"KRN",8994,3577,1,2,0)
user.  The parameter is set to the value passed in and the result is 
"KRN",8994,3577,1,3,0)
passed back.
"KRN",8994,3577,2,0)
^8994.02A^1^1
"KRN",8994,3577,2,1,0)
VALUE^1^245^1^1
"KRN",8994,3577,2,1,1,0)
^^2^2^3121005^
"KRN",8994,3577,2,1,1,1,0)
This is the value to be stored in the parameter ORATR FILTER TAR for
"KRN",8994,3577,2,1,1,2,0)
the current user.
"KRN",8994,3577,2,"B","VALUE",1)

"KRN",8994,3577,2,"PARAMSEQ",1,1)

"KRN",8994,3577,3,0)
^^2^2^3121005^
"KRN",8994,3577,3,1,0)
Returns:    0 - No error occurred
"KRN",8994,3577,3,2,0)
            #^error text - if error occurred
"KRN",8994,3578,-1)
0^4
"KRN",8994,3578,0)
ORATR GET TIU TEMPLATE^TEMPLATE^ORATR^1^S
"KRN",8994,3578,1,0)
^^2^2^3121005^
"KRN",8994,3578,1,1,0)
This RPC returns information about a TIU TEMPLATE, given the REMINDER 
"KRN",8994,3578,1,2,0)
DIALOG that belongs to said template.
"KRN",8994,3578,2,0)
^8994.02A^1^1
"KRN",8994,3578,2,1,0)
REMINDER DIALOG^1^^1^1
"KRN",8994,3578,2,1,1,0)
^^1^1^3121005^
"KRN",8994,3578,2,1,1,1,0)
This is a pointer to the REMINDER DIALOG file (#801.41).
"KRN",8994,3578,2,"B","REMINDER DIALOG",1)

"KRN",8994,3578,2,"PARAMSEQ",1,1)

"KRN",8994,3578,3,0)
^^27^27^3121005^
"KRN",8994,3578,3,1,0)
This RPC returns data for a TIU TEMPLATE in a '^' delimited string with
"KRN",8994,3578,3,2,0)
the following pieces:
"KRN",8994,3578,3,3,0)
 
"KRN",8994,3578,3,4,0)
  Piece  Data
"KRN",8994,3578,3,5,0)
  -----  ---------------------
"KRN",8994,3578,3,6,0)
    1    IEN
"KRN",8994,3578,3,7,0)
    2    TYPE
"KRN",8994,3578,3,8,0)
    3    STATUS
"KRN",8994,3578,3,9,0)
    4    NAME
"KRN",8994,3578,3,10,0)
    5    EXCLUDE FROM GROUP BOILERPLATE
"KRN",8994,3578,3,11,0)
    6    BLANK LINES
"KRN",8994,3578,3,12,0)
    7    PERSONAL OWNER
"KRN",8994,3578,3,13,0)
    8    HAS CHILDREN FLAG (0=NONE, 1=ACTIVE, 2=INACTIVE, 3=BOTH)
"KRN",8994,3578,3,14,0)
    9    DIALOG
"KRN",8994,3578,3,15,0)
   10    DISPLAY ONLY
"KRN",8994,3578,3,16,0)
   11    FIRST LINE
"KRN",8994,3578,3,17,0)
   12    ONE ITEM ONLY
"KRN",8994,3578,3,18,0)
   13    HIDE DIALOG ITEMS
"KRN",8994,3578,3,19,0)
   14    HIDE TREE ITEMS
"KRN",8994,3578,3,20,0)
   15    INDENT ITEMS
"KRN",8994,3578,3,21,0)
   16    REMINDER DIALOG IEN
"KRN",8994,3578,3,22,0)
   17    REMINDER DIALOG NAME
"KRN",8994,3578,3,23,0)
   18    LOCKED
"KRN",8994,3578,3,24,0)
   19    COM OBJECT POINTER
"KRN",8994,3578,3,25,0)
   20    COM OBJECT PARAMETER
"KRN",8994,3578,3,26,0)
   21    LINK POINTER
"KRN",8994,3578,3,27,0)
   22    REMINDER DIALOG PATIENT SPECIFIC VALUE
"KRN",8994,3579,-1)
0^9
"KRN",8994,3579,0)
ORATR SET ATR PROCESSING LEVEL^PROCESS^ORATR^1^S^0
"KRN",8994,3579,1,0)
^^4^4^3121005^
"KRN",8994,3579,1,1,0)
This RPC is used to set the PROCESSED field (#1.05) in the VFD ALERT 
"KRN",8994,3579,1,2,0)
TRACKING FILE (#21695.2).  If the value passed corresponds to 
"KRN",8994,3579,1,3,0)
TRANSMITTED, the current date will be put into the field DATE TRANSMITTED 
"KRN",8994,3579,1,4,0)
(#1.06).
"KRN",8994,3579,2,0)
^8994.02A^2^2
"KRN",8994,3579,2,1,0)
TAR IEN^1^^1^1
"KRN",8994,3579,2,1,1,0)
^^2^2^3121005^
"KRN",8994,3579,2,1,1,1,0)
This is the IEN of the ATR that has been processed.  It is a pointer to 
"KRN",8994,3579,2,1,1,2,0)
the VFD ALERT TRACKING file (#21695.2).
"KRN",8994,3579,2,2,0)
PROCESSED^1^1^1^2
"KRN",8994,3579,2,2,1,0)
^^18^18^3121005^
"KRN",8994,3579,2,2,1,1,0)
This is the internal format of the field PROCESSED (#1.05) in the VFD
"KRN",8994,3579,2,2,1,2,0)
ALERT TRACKING file (#21695.2).  The acceptable values are:
"KRN",8994,3579,2,2,1,3,0)
 
"KRN",8994,3579,2,2,1,4,0)
  0 - Not Processed - The provider has not yet begun to process this and
"KRN",8994,3579,2,2,1,5,0)
                      possibly has not even looked at it yet.
"KRN",8994,3579,2,2,1,6,0)
 
"KRN",8994,3579,2,2,1,7,0)
  1 - Partially Processed - The provider has looked at the notification 
"KRN",8994,3579,2,2,1,8,0)
                            and starting processing it, but have not 
"KRN",8994,3579,2,2,1,9,0)
                            marked it as complete yet.
"KRN",8994,3579,2,2,1,10,0)
 
"KRN",8994,3579,2,2,1,11,0)
  2 - Completed - The provider has marked this notification as complete 
"KRN",8994,3579,2,2,1,12,0)
                  and is totally finished processing it.
"KRN",8994,3579,2,2,1,13,0)
 
"KRN",8994,3579,2,2,1,14,0)
  3 - Transmitted - The notification and follow-up action has been 
"KRN",8994,3579,2,2,1,15,0)
                    transmitted to the Registry.
"KRN",8994,3579,2,2,1,16,0)
 
"KRN",8994,3579,2,2,1,17,0)
If a 3 is passed (meaning that the notificaion has been transmitted), the 
"KRN",8994,3579,2,2,1,18,0)
current date will be put into the field DATE TRANSMITTED (#1.06).
"KRN",8994,3579,2,"B","PROCESSED",2)

"KRN",8994,3579,2,"B","TAR IEN",1)

"KRN",8994,3579,2,"PARAMSEQ",1,1)

"KRN",8994,3579,2,"PARAMSEQ",2,2)

"KRN",8994,3579,3,0)
^^2^2^3121005^
"KRN",8994,3579,3,1,0)
Returns:   1 if successful
"KRN",8994,3579,3,2,0)
          -1 if unsuccessful
"KRN",8994,3580,-1)
0^3
"KRN",8994,3580,0)
ORATR GET TEST RESULTS^RESULTS^ORATR^2^S
"KRN",8994,3580,1,0)
^^3^3^3121005^
"KRN",8994,3580,1,1,0)
This RPC takes in an array that represents a single or set of TAR 
"KRN",8994,3580,1,2,0)
notifications and returns the test results related to the notification(s)
"KRN",8994,3580,1,3,0)
in an array.
"KRN",8994,3580,2,0)
^8994.02A^1^1
"KRN",8994,3580,2,1,0)
ORDATA^2^^1^1
"KRN",8994,3580,2,1,1,0)
^^21^21^3121005^
"KRN",8994,3580,2,1,1,1,0)
ORDATA - required
"KRN",8994,3580,2,1,1,2,0)
         passed by reference
"KRN",8994,3580,2,1,1,3,0)
         format:  ORDATA(sub) = code ^ value   where
"KRN",8994,3580,2,1,1,4,0)
           code = PAT for patient (#2)
"KRN",8994,3580,2,1,1,5,0)
                  ATR for notification (#21695.2)
"KRN",8994,3580,2,1,1,6,0)
          value = for code PAT - patient DFN
"KRN",8994,3580,2,1,1,7,0)
                  for code ATR - IEN in VFD ALERT TRACKING (#21695.2)
"KRN",8994,3580,2,1,1,8,0)
 
"KRN",8994,3580,2,1,1,9,0)
ATR takes precedence over PAT.  For example, if ORDATA looks like:
"KRN",8994,3580,2,1,1,10,0)
 
"KRN",8994,3580,2,1,1,11,0)
        ORDATA(1)="PAT^1"
"KRN",8994,3580,2,1,1,12,0)
        ORDATA(2)="ATR^75"
"KRN",8994,3580,2,1,1,13,0)
        ORDATA(3)="ATR^76"
"KRN",8994,3580,2,1,1,14,0)
 
"KRN",8994,3580,2,1,1,15,0)
The return array would only have results that correspond to the 
"KRN",8994,3580,2,1,1,16,0)
notifications with IENS 75 and 76.  It would not process any other 
"KRN",8994,3580,2,1,1,17,0)
notifications for patient #1.
"KRN",8994,3580,2,1,1,18,0)
 
"KRN",8994,3580,2,1,1,19,0)
If ORDATA only has patient info (i.e., ORDATA(1)="PAT^1" and no other 
"KRN",8994,3580,2,1,1,20,0)
nodes are set) then the return array will have results that correspond to 
"KRN",8994,3580,2,1,1,21,0)
all of the TAR notifications for patient #1.
"KRN",8994,3580,2,"B","ORDATA",1)

"KRN",8994,3580,2,"PARAMSEQ",1,1)

"KRN",8994,3580,3,0)
^^2^2^3121005^
"KRN",8994,3580,3,1,0)
This RPC returns an array containing the results of the test(s) that 
"KRN",8994,3580,3,2,0)
triggered the specified TAR notification(s).
"KRN",8994,3581,-1)
0^11
"KRN",8994,3581,0)
ORATR SET TIU NOTE^SETNOTE^ORATR^1^S
"KRN",8994,3581,1,0)
^^3^3^3121005^
"KRN",8994,3581,1,1,0)
This RPC is used to set the TIU NOTE field (#1.07) in the VFD ALERT 
"KRN",8994,3581,1,2,0)
TRACKING file (#21695.2).  It takes in a pointer (in internal format) to
"KRN",8994,3581,1,3,0)
the TIU DOCUMENT file (#8925).
"KRN",8994,3581,2,0)
^8994.02A^2^2
"KRN",8994,3581,2,1,0)
TAR IEN^1^^1^1
"KRN",8994,3581,2,1,1,0)
^^2^2^3121005^
"KRN",8994,3581,2,1,1,1,0)
This is the IEN of the TAR that the note is being associated with.  It is 
"KRN",8994,3581,2,1,1,2,0)
a pointer to the VFD ALERT TRACKING file (#21695.2).
"KRN",8994,3581,2,2,0)
TIU NOTE^1^^1^2
"KRN",8994,3581,2,2,1,0)
^^2^2^3120828^
"KRN",8994,3581,2,2,1,1,0)
This is the IEN of the TIU DOCUMENT that is being associated with the ATR 
"KRN",8994,3581,2,2,1,2,0)
alert.  It is a pointer to the TIU DOCUMENT file (#8925).
"KRN",8994,3581,2,"B","TAR IEN",1)

"KRN",8994,3581,2,"B","TIU NOTE",2)

"KRN",8994,3581,2,"PARAMSEQ",1,1)

"KRN",8994,3581,2,"PARAMSEQ",2,2)

"KRN",8994,3581,3,0)
^^2^2^3121005^
"KRN",8994,3581,3,1,0)
Returns:   1 if successful
"KRN",8994,3581,3,2,0)
          -1 if unsuccessful
"KRN",8994,3582,-1)
0^1
"KRN",8994,3582,0)
ORATR BCCCR TRANSMIT^BCCCR^ORATR^2^S
"KRN",8994,3582,1,0)
^^3^3^3121025^
"KRN",8994,3582,1,1,0)
This RPC returns information about the resolution of a TAR notification 
"KRN",8994,3582,1,2,0)
dealing with abnormal mammogram results.  This information will then be 
"KRN",8994,3582,1,3,0)
transmitted to the BCCCR.
"KRN",8994,3582,2,0)
^8994.02A^^
"KRN",8994,3582,3,0)
^^27^27^3121105^
"KRN",8994,3582,3,1,0)
An array containing information on the follow-up action taken in response 
"KRN",8994,3582,3,2,0)
to an abnormal mammogram (via TAR notifications).
"KRN",8994,3582,3,3,0)
 
"KRN",8994,3582,3,4,0)
Returns information on the next TAR notification that is marked as 
"KRN",8994,3582,3,5,0)
"COMPLETED"
"KRN",8994,3582,3,6,0)
 
"KRN",8994,3582,3,7,0)
  Format of data returned  p1^p2^...^p16^p17 where
"KRN",8994,3582,3,8,0)
     p1  := TAR IEN
"KRN",8994,3582,3,9,0)
     p2  := Patient DFN
"KRN",8994,3582,3,10,0)
     p3  := Site Number
"KRN",8994,3582,3,11,0)
     p4  := Patient ICN
"KRN",8994,3582,3,12,0)
     p5  := Health Factor Name
"KRN",8994,3582,3,13,0)
     p6  := Health Factor Visit Date
"KRN",8994,3582,3,14,0)
     p7  := Health Factor Deleted (Yes/No)
"KRN",8994,3582,3,15,0)
     p8  := Health Factor BI-RAD Code
"KRN",8994,3582,3,16,0)
     p9  := Health Factor Contact Method
"KRN",8994,3582,3,17,0)
     p10 := Health Factor Contact Individual
"KRN",8994,3582,3,18,0)
     p11 := Order Number
"KRN",8994,3582,3,19,0)
     p12 := Order Date
"KRN",8994,3582,3,20,0)
     p13 := Orderable Item Name
"KRN",8994,3582,3,21,0)
     p14 := Orderable Item CPT Code
"KRN",8994,3582,3,22,0)
     p15 := Orderable Item Package
"KRN",8994,3582,3,23,0)
     p16 := Encounter Provider
"KRN",8994,3582,3,24,0)
     p17 := Ordering Provider
"KRN",8994,3582,3,25,0)
 
"KRN",8994,3582,3,26,0)
If there are no notifications completed, returns:
"KRN",8994,3582,3,27,0)
RET(1) = "-1^Error"
"KRN",8994,3583,-1)
0^5
"KRN",8994,3583,0)
ORATR HEALTH FACTORS^GETHF^ORATR^1^S
"KRN",8994,3583,1,0)
^8994.01^1^1^3121022^^^^
"KRN",8994,3583,1,1,0)
This RPC is used to track health factors associated with TAR notifications.
"KRN",8994,3583,1,2,0)
notifications.
"KRN",8994,3583,2,0)
^8994.02A^2^2
"KRN",8994,3583,2,1,0)
TARIEN^1^^1^1
"KRN",8994,3583,2,1,1,0)
^8994.021^1^1^3121022^^^
"KRN",8994,3583,2,1,1,1,0)
This is the IEN for the particular TAR notification
"KRN",8994,3583,2,2,0)
HEALTH FACTORS^1^^1^2
"KRN",8994,3583,2,2,1,0)
^^3^3^3121022^
"KRN",8994,3583,2,2,1,1,0)
This is a list of the associated health factors in the format:
"KRN",8994,3583,2,2,1,2,0)
 
"KRN",8994,3583,2,2,1,3,0)
   ^ HF name ^ HF name ^ HF name ^ ... ^ HF name
"KRN",8994,3583,2,"B","HEALTH FACTORS",2)

"KRN",8994,3583,2,"B","TARIEN",1)

"KRN",8994,3583,2,"PARAMSEQ",1,1)

"KRN",8994,3583,2,"PARAMSEQ",2,2)

"KRN",8994,3583,3,0)
^8994.03^2^2^3121022^^
"KRN",8994,3583,3,1,0)
Returns 1 if successful
"KRN",8994,3583,3,2,0)
Returns -1 ^ Error Message if unsuccessful
"KRN",8994,3585,-1)
0^8
"KRN",8994,3585,0)
ORATR SELECTED ALERT^SETIEN^ORATRMM^1^A^^^^1
"KRN",8994,3585,1,0)
^8994.01^2^2^3121109^^
"KRN",8994,3585,1,1,0)
Sets currently selected VFD Alert Tracking internal number (IEN)
"KRN",8994,3585,1,2,0)
in ^TMP($J,"ORATRIEN")
"KRN",8994,3585,2,0)
^8994.02A^1^1
"KRN",8994,3585,2,1,0)
ORATRIEN^1^^1^1
"KRN",8994,3585,2,1,1,0)
^8994.021^2^2^3121109^^^
"KRN",8994,3585,2,1,1,1,0)
Internal number of the selected alert from file VFD Alert Tracking 
"KRN",8994,3585,2,1,1,2,0)
file 21695.2
"KRN",8994,3585,2,"B","ORATRIEN",1)

"KRN",8994,3585,2,"PARAMSEQ",1,1)

"KRN",8994,3585,3,0)
^^2^2^3121109^
"KRN",8994,3585,3,1,0)
If successful returns 1.
"KRN",8994,3585,3,2,0)
If unsuccessful returns -1^Bad IEN
"MBREQ")
0
"ORD",3,19.1)
19.1;3;;;KEY^XPDTA1;KEYF1^XPDIA1;KEYE1^XPDIA1;KEYF2^XPDIA1;;KEYDEL^XPDIA1
"ORD",3,19.1,0)
SECURITY KEY
"ORD",5,.4)
.4;5;;;EDEOUT^DIFROMSO(.4,DA,"",XPDA);FPRE^DIFROMSI(.4,"",XPDA);EPRE^DIFROMSI(.4,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.4,DA,"",XPDA);DEL^DIFROMSK(.4,"",%)
"ORD",5,.4,0)
PRINT TEMPLATE
"ORD",6,.401)
.401;6;;;EDEOUT^DIFROMSO(.401,DA,"",XPDA);FPRE^DIFROMSI(.401,"",XPDA);EPRE^DIFROMSI(.401,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.401,DA,"",XPDA);DEL^DIFROMSK(.401,"",%)
"ORD",6,.401,0)
SORT TEMPLATE
"ORD",8,.403)
.403;8;;;EDEOUT^DIFROMSO(.403,DA,"",XPDA);FPRE^DIFROMSI(.403,"",XPDA);EPRE^DIFROMSI(.403,DA,$E("N",$G(XPDNEW)),XPDA,"",OLDA);;EPOST^DIFROMSI(.403,DA,"",XPDA);DEL^DIFROMSK(.403,"",%)
"ORD",8,.403,0)
FORM
"ORD",16,8994)
8994;16;1;;;;;;;RPCDEL^XPDIA1
"ORD",16,8994,0)
REMOTE PROCEDURE
"ORD",18,19)
19;18;;;OPT^XPDTA;OPTF1^XPDIA;OPTE1^XPDIA;OPTF2^XPDIA;;OPTDEL^XPDIA
"ORD",18,19,0)
OPTION
"ORD",20,8989.51)
8989.51;20;;;PAR1E1^XPDTA2;PAR1F1^XPDIA3;PAR1E1^XPDIA3;PAR1F2^XPDIA3;;PAR1DEL^XPDIA3(%)
"ORD",20,8989.51,0)
PARAMETER DEFINITION
"PGL",21695.5,0,2,.02)
REMINDER DIALOG^P801.41'^PXRMD(801.41,^0;2^Q
"PGL",21695.5,0,3,.03)
INITIAL NOTE^P8925.1'^TIU(8925.1,^0;3^Q
"QUES","XPF1",0)
Y
"QUES","XPF1","??")
^D REP^XPDH
"QUES","XPF1","A")
Shall I write over your |FLAG| File
"QUES","XPF1","B")
YES
"QUES","XPF1","M")
D XPF1^XPDIQ
"QUES","XPF2",0)
Y
"QUES","XPF2","??")
^D DTA^XPDH
"QUES","XPF2","A")
Want my data |FLAG| yours
"QUES","XPF2","B")
YES
"QUES","XPF2","M")
D XPF2^XPDIQ
"QUES","XPI1",0)
YO
"QUES","XPI1","??")
^D INHIBIT^XPDH
"QUES","XPI1","A")
Want KIDS to INHIBIT LOGONs during the install
"QUES","XPI1","B")
NO
"QUES","XPI1","M")
D XPI1^XPDIQ
"QUES","XPM1",0)
PO^VA(200,:EM
"QUES","XPM1","??")
^D MG^XPDH
"QUES","XPM1","A")
Enter the Coordinator for Mail Group '|FLAG|'
"QUES","XPM1","B")

"QUES","XPM1","M")
D XPM1^XPDIQ
"QUES","XPO1",0)
Y
"QUES","XPO1","??")
^D MENU^XPDH
"QUES","XPO1","A")
Want KIDS to Rebuild Menu Trees Upon Completion of Install
"QUES","XPO1","B")
NO
"QUES","XPO1","M")
D XPO1^XPDIQ
"QUES","XPZ1",0)
Y
"QUES","XPZ1","??")
^D OPT^XPDH
"QUES","XPZ1","A")
Want to DISABLE Scheduled Options, Menu Options, and Protocols
"QUES","XPZ1","B")
NO
"QUES","XPZ1","M")
D XPZ1^XPDIQ
"QUES","XPZ2",0)
Y
"QUES","XPZ2","??")
^D RTN^XPDH
"QUES","XPZ2","A")
Want to MOVE routines to other CPUs
"QUES","XPZ2","B")
NO
"QUES","XPZ2","M")
D XPZ2^XPDIQ
"RTN")
9
"RTN","ORATR")
0^1^B71701278
"RTN","ORATR",1,0)
ORATR ; DSS/SMP/ASF - Abnormal Alert Utilities ; AUG 28, 2012
"RTN","ORATR",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATR",3,0)
 ;;;
"RTN","ORATR",4,0)
 Q
"RTN","ORATR",5,0)
 ;
"RTN","ORATR",6,0)
 ; Documented API and ICRs
"RTN","ORATR",7,0)
 ; -----------------------
"RTN","ORATR",8,0)
 ; 2043      EN1^RAO7PC1
"RTN","ORATR",9,0)
 ; 2051      FIND^DIC   
"RTN","ORATR",10,0)
 ; 2056      $$GET1^DIQ
"RTN","ORATR",11,0)
 ; 2056      GETS^DIQ
"RTN","ORATR",12,0)
 ; 2263      ^XPAR
"RTN","ORATR",13,0)
 ; 3315      UPDATE^DIE
"RTN","ORATR",14,0)
 ;
"RTN","ORATR",15,0)
 ;=====================================================================
"RTN","ORATR",16,0)
 ;                 A B N O R M A L   A L E R T   R P C S
"RTN","ORATR",17,0)
 ;=====================================================================
"RTN","ORATR",18,0)
PROVIDER(ORRET,ORUSR) ; RPC - ORATR PROVIDER
"RTN","ORATR",19,0)
 ; ORRET - Return array, passed by reference
"RTN","ORATR",20,0)
 ; ORUSR - IEN of provider (FILE 200)
"RTN","ORATR",21,0)
 ;
"RTN","ORATR",22,0)
 K ORRET
"RTN","ORATR",23,0)
 N ORX S ORUSR=$G(ORUSR),ORX=$$PROV^ORATRPC
"RTN","ORATR",24,0)
 I 'ORX S ORRET=0
"RTN","ORATR",25,0)
 Q
"RTN","ORATR",26,0)
 ;
"RTN","ORATR",27,0)
PATIENT(ORRET,ORDFN) ; RPC - ORATR PATIENT
"RTN","ORATR",28,0)
 ; ORRET - Return array, passed by reference
"RTN","ORATR",29,0)
 ; ORDFN - IEN of patient (FILE 2)
"RTN","ORATR",30,0)
 ;
"RTN","ORATR",31,0)
 K ORRET
"RTN","ORATR",32,0)
 N ORX S ORDFN=$G(ORDFN),ORX=$$PAT^ORATRPC
"RTN","ORATR",33,0)
 I 'ORX S ORRET=0
"RTN","ORATR",34,0)
 Q
"RTN","ORATR",35,0)
 ;
"RTN","ORATR",36,0)
NOTE(ORRET,ORNOTE) ; RPC - ORATR GET NOTE
"RTN","ORATR",37,0)
 ; ORRET  - Return string
"RTN","ORATR",38,0)
 ; ORNOTE - IEN in the VFD ATR CONTROL file (21695.5)
"RTN","ORATR",39,0)
 K ORRET
"RTN","ORATR",40,0)
 N ORX S ORNOTE=$G(ORNOTE),ORX=$$NOTE^ORATRPC
"RTN","ORATR",41,0)
 I ORX=-1 S ORRET="-1^Error"
"RTN","ORATR",42,0)
 Q
"RTN","ORATR",43,0)
 ;
"RTN","ORATR",44,0)
PARAM(ORRET,ORVAL) ; RPC - ORATR SET FILTER PARAM
"RTN","ORATR",45,0)
 ;PARAM NAME = ORATR FILTER TAR
"RTN","ORATR",46,0)
 D EN^XPAR("USR","ORATR FILTER TAR",,ORVAL,.ORRET)
"RTN","ORATR",47,0)
 Q
"RTN","ORATR",48,0)
 ;
"RTN","ORATR",49,0)
TEMPLATE(ORRET,ORRDIEN) ; RPC - ORATR GET TIU TEMPLATE
"RTN","ORATR",50,0)
 ; ORRET   - Return string
"RTN","ORATR",51,0)
 ; ORRDIEN - IEN in the REMINDER DIALOG file (#801.41)
"RTN","ORATR",52,0)
 K ORRET
"RTN","ORATR",53,0)
 N ORX S ORRDIEN=$G(ORRDIEN),ORX=$$TEMPLATE^ORATRPC
"RTN","ORATR",54,0)
 I 'ORX S ORRET="-1^Error"
"RTN","ORATR",55,0)
 Q
"RTN","ORATR",56,0)
 ;
"RTN","ORATR",57,0)
PROCESS(ORRET,ORIEN,ORPRO) ; RPC - ORATR SET ATR PROCESSING LEVEL
"RTN","ORATR",58,0)
 ; ORRET - Return String
"RTN","ORATR",59,0)
 ; ORIEN - IEN in the VFD ALERT TRACKING file (#21695.2)
"RTN","ORATR",60,0)
 ; ORPRO - Internal form of PROCESSED field (#1.05)
"RTN","ORATR",61,0)
 ;
"RTN","ORATR",62,0)
 ; 0 - Not Processed
"RTN","ORATR",63,0)
 ; 1 - Partially Processed
"RTN","ORATR",64,0)
 ; 2 - Completed
"RTN","ORATR",65,0)
 ; 3 - Transmitted
"RTN","ORATR",66,0)
 ;
"RTN","ORATR",67,0)
 K ORRET
"RTN","ORATR",68,0)
 D FOLLOWUP^ORATR2(ORIEN)
"RTN","ORATR",69,0)
 S ORRET=$$PROCESS^ORATRPC(ORIEN,ORPRO)
"RTN","ORATR",70,0)
 Q
"RTN","ORATR",71,0)
 ;
"RTN","ORATR",72,0)
RESULTS(ORRET,ORDATA) ; RPC - ORATR GET TEST RESULTS
"RTN","ORATR",73,0)
 ; ORRET  - Return array, passed by reference
"RTN","ORATR",74,0)
 ; ORDATA - Input array
"RTN","ORATR",75,0)
 ;     passed by reference
"RTN","ORATR",76,0)
 ;     format:  ORDATA(sub) = code ^ value   where
"RTN","ORATR",77,0)
 ;         code = PAT for patient (#2)
"RTN","ORATR",78,0)
 ;                ATR for notification (#21695.2)
"RTN","ORATR",79,0)
 ;        value = for code PAT - patient DFN
"RTN","ORATR",80,0)
 ;                for code ATR - IEN in VFD ALERT TRACKING (#21695.2)
"RTN","ORATR",81,0)
 K ORRET
"RTN","ORATR",82,0)
 D RESULTS^ORATRDO
"RTN","ORATR",83,0)
 I '$D(ORRET) S ORRET(1)="Input is invalid"
"RTN","ORATR",84,0)
 Q
"RTN","ORATR",85,0)
 ;
"RTN","ORATR",86,0)
SETNOTE(ORRET,ORIEN,ORNOTE) ; RPC - ORATR SET TIU NOTE
"RTN","ORATR",87,0)
 ; ORRET  - Return string, passed by reference
"RTN","ORATR",88,0)
 ; ORIEN  - IEN in the VFD ALERT TRACKING file (#21695.2)
"RTN","ORATR",89,0)
 ; ORNOTE - Pointer to the TIU DOCUMENT file (#8925)
"RTN","ORATR",90,0)
 N ORFDA,ORERR K ORRET
"RTN","ORATR",91,0)
 S ORNOTE=$S(ORNOTE:"`"_ORNOTE,ORNOTE="@":"@",1:-1)
"RTN","ORATR",92,0)
 S ORFDA(21695.2,ORIEN_",",1.07)=ORNOTE
"RTN","ORATR",93,0)
 L +^VFD(21695.2,ORIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR",94,0)
 D UPDATE^DIE("E","ORFDA",,"ORERR")
"RTN","ORATR",95,0)
 L -^VFD(21695.2,ORIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR",96,0)
 S ORRET=$S('$D(ORERR):1,1:-1)
"RTN","ORATR",97,0)
 Q
"RTN","ORATR",98,0)
 ;
"RTN","ORATR",99,0)
BCCCR(ORRET) ; RPC - ORATR BCCCR TRANSMIT
"RTN","ORATR",100,0)
 ; ORRET - Return array, passed by reference
"RTN","ORATR",101,0)
 N ORIEN,ORFLAG
"RTN","ORATR",102,0)
 K ORRET S ORIEN="",ORFLAG=0
"RTN","ORATR",103,0)
 F  S ORIEN=$O(^VFD(21695.2,"APROC",2,ORIEN)) Q:'ORIEN  D  Q:ORFLAG
"RTN","ORATR",104,0)
 .N ORTYPE S ORTYPE=$$GET1^DIQ(21695.2,ORIEN,1.09,"I")
"RTN","ORATR",105,0)
 .;I $$GET1^DIQ(21695.5,+ORTYPE,.01)'["BCCCR" D PROCESS^ORATRPC(ORIEN,3) Q
"RTN","ORATR",106,0)
 .I '$$GET1^DIQ(21695.5,ORTYPE,.06,"I") D PROCESS^ORATRPC(ORIEN,3) Q
"RTN","ORATR",107,0)
 .S ORFLAG=1
"RTN","ORATR",108,0)
 I ORIEN="" S ORRET(1)="-1^Error" Q
"RTN","ORATR",109,0)
 D BCCCR^ORATRPC(ORIEN)
"RTN","ORATR",110,0)
 I '$D(ORRET) S ORRET(1)="-1^Error"
"RTN","ORATR",111,0)
 Q
"RTN","ORATR",112,0)
 ;
"RTN","ORATR",113,0)
GETHF(ORRET,ORIEN,ORHF) ;
"RTN","ORATR",114,0)
 ; HEALTH FACTORS       ^AUTTHF(
"RTN","ORATR",115,0)
 ; V HEALTH FACTOR      ^AUPNVHF(
"RTN","ORATR",116,0)
 N X,Y,Z,ORERR S ORIEN=+$G(ORIEN)
"RTN","ORATR",117,0)
 N ZTIO,ZTRTN,ZTDTH,ZTSAVE,ZTDESC,ZTSYNC,ZTSK
"RTN","ORATR",118,0)
 S ZTRTN="GETHF^ORATRPC",ZTDTH=$H,$P(ZTDTH,",",2)=100+$P(ZTDTH,",",2)
"RTN","ORATR",119,0)
 S ZTDESC="Track Health Factors for SMART Notifications"
"RTN","ORATR",120,0)
 M ^TMP("ORATRHF",$$NOW^XLFDT,ORIEN)=ORHF
"RTN","ORATR",121,0)
 D ^%ZTLOAD I '$D(ZTSK) D GETHF^ORATRPC
"RTN","ORATR",122,0)
 S ORRET=1
"RTN","ORATR",123,0)
 Q 
"RTN","ORATR",124,0)
 ;
"RTN","ORATR",125,0)
 ;=====================================================================
"RTN","ORATR",126,0)
 ;                            U T I L I T E S
"RTN","ORATR",127,0)
 ;=====================================================================
"RTN","ORATR",128,0)
TRANSFER(ORATIEN) ;Transfer data from Alert Tracking to VFD Alert Tracking
"RTN","ORATR",129,0)
 ;asf 7/14/12
"RTN","ORATR",130,0)
 ;ORATIEN- IEN of file 8992.1
"RTN","ORATR",131,0)
 N X,%X,%Y,DA,DIK,ORATRFDA,ORDATA,ORFLAG,ORLOC,ORNOT,VFDNEWIEN,ORERR
"RTN","ORATR",132,0)
 S ORATIEN=+ORATIEN ;remove trailing comma asf 7/17
"RTN","ORATR",133,0)
 I '$D(^XTV(8992.1,ORATIEN)) Q -1  ;out--> bad ien
"RTN","ORATR",134,0)
 S ORDATA=$$GETIEN($$GET1^DIQ(8992.1,ORATIEN,.01,,,"ORERR"))
"RTN","ORATR",135,0)
 S VFDNEWIEN(1)=$P(ORDATA,U) I VFDNEWIEN(1)'>0 Q -1  ;Entry not made out-->
"RTN","ORATR",136,0)
 L +^VFD(21695.2,VFDNEWIEN(1)):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR",137,0)
 D SETUP(VFDNEWIEN(1),'$G(ORFLAG))
"RTN","ORATR",138,0)
 L -^VFD(21695.2,VFDNEWIEN(1)):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR",139,0)
 Q VFDNEWIEN(1)
"RTN","ORATR",140,0)
 ;
"RTN","ORATR",141,0)
GETIEN(ORNM) ;
"RTN","ORATR",142,0)
 ; ORNM is the .01 field in 8992.1
"RTN","ORATR",143,0)
 N ORATRFDA,ORERR,ORIEN,NEWIEN
"RTN","ORATR",144,0)
 S ORNM=$$TRNSFRM(ORNM) Q:ORNM="" -1
"RTN","ORATR",145,0)
 ; check inactive
"RTN","ORATR",146,0)
 Q:$$GET1^DIQ(21695.5,$P(ORNM,";",5),.04,"I") -1
"RTN","ORATR",147,0)
 S ORIEN=$$FIND1^DIC(21695.2,,"X",ORNM,,,"ORERR")
"RTN","ORATR",148,0)
 I ORIEN S ORFLAG=1 Q ORIEN_U_ORNM
"RTN","ORATR",149,0)
 S ORATRFDA(21695.2,"+1,",.01)=ORNM
"RTN","ORATR",150,0)
 D UPDATE^DIE("U","ORATRFDA","NEWIEN")
"RTN","ORATR",151,0)
 Q NEWIEN(1)_U_ORNM
"RTN","ORATR",152,0)
 ;
"RTN","ORATR",153,0)
TRNSFRM(ORNM) ; Transform the .01 field for an ATR notification
"RTN","ORATR",154,0)
 N ORX,ORDATA,ORDER,ORERR,ORFLAG,ORID,ORI,ORY,ORFLAG,ORPAT,ORNOT
"RTN","ORATR",155,0)
 Q:$E(ORNM,1,2)'="OR" ""
"RTN","ORATR",156,0)
 S ORPAT=$$GET1^DIQ(8992.1,ORATIEN,.04,"I",,"ORERR")
"RTN","ORATR",157,0)
 S ORX=$P($P(ORNM,";"),",",3) Q:'ORX ""
"RTN","ORATR",158,0)
 Q:'$D(^VFD(21695.5,"AB",ORX)) ""  S ORNOT=ORX
"RTN","ORATR",159,0)
 S ORDATA=$$GET1^DIQ(8992.1,ORATIEN,2)
"RTN","ORATR",160,0)
 I ORDATA["@OR"&($D(^OR(100,+ORDATA))) S ORDER=+ORDATA_","
"RTN","ORATR",161,0)
 E  S ORDER=$$GETORDER(ORPAT,ORDATA)
"RTN","ORATR",162,0)
 D GETS^DIQ(100,ORDER,".1*","I","ORDER","ORERR")
"RTN","ORATR",163,0)
 S ORX="ORDER" F  S ORX=$Q(@ORX) Q:ORX=""  D  Q:$D(ORID)
"RTN","ORATR",164,0)
 .I $D(^VFD(21695.5,"C",@ORX)) S ORID=$O(^(@ORX,""))
"RTN","ORATR",165,0)
 .I $D(ORID) S ORLOC=$$GET1^DIQ(100,+ORDER_",",6,"I",,"ORERR")
"RTN","ORATR",166,0)
 .I '$D(ORID) S ORID=$$LABTEST(ORATIEN,ORDATA)
"RTN","ORATR",167,0)
 Q:ORID="" ""
"RTN","ORATR",168,0)
 S ORNM="ATR,"_ORPAT_","_ORNOT_";10000;"_ORPAT_";"_$P(ORNM,";",3)_";"_ORID
"RTN","ORATR",169,0)
 S ORNM=ORNM_";"_$$GET1^DIQ(100,ORDER,4,"I")
"RTN","ORATR",170,0)
 Q ORNM
"RTN","ORATR",171,0)
 ;
"RTN","ORATR",172,0)
GETORDER(ORPAT,ORDATA) ;
"RTN","ORATR",173,0)
 N ORX,ORY,ORIEN,TODAY
"RTN","ORATR",174,0)
 S TODAY=$$DT^XLFDT,ORDATA=$TR(ORDATA,"~","-")
"RTN","ORATR",175,0)
 K ^TMP($J,"RAE1")
"RTN","ORATR",176,0)
 D EN1^RAO7PC1(ORPAT,$$FMADD^XLFDT(TODAY,-60),TODAY,10)
"RTN","ORATR",177,0)
 Q:'$D(^TMP($J,"RAE1",ORPAT,ORDATA)) -1  S ORIEN=$P(^(ORDATA),U,11)
"RTN","ORATR",178,0)
 S ORIEN=ORIEN_"," K ^TMP($J,"RAE1")
"RTN","ORATR",179,0)
 Q ORIEN
"RTN","ORATR",180,0)
 ;
"RTN","ORATR",181,0)
LABTEST(ORATIEN,ORDATA) ;
"RTN","ORATR",182,0)
 N ORDT,ORSN,TEMP,OR,ORRET,LBTST S ORRET=""
"RTN","ORATR",183,0)
 I ORDATA'["|" Q ORRET
"RTN","ORATR",184,0)
 S ORDT=$P(ORDATA,";",2),ORSN=$P(ORDATA,";",3)
"RTN","ORATR",185,0)
 I 'ORDT!('ORSN) Q ORRET
"RTN","ORATR",186,0)
 K ^TMP("LRX",$J)
"RTN","ORATR",187,0)
 D 69^LR7OB69(ORDT,ORSN)
"RTN","ORATR",188,0)
 S TEMP=$NA(^TMP("LRX",$J,69)),OR=0
"RTN","ORATR",189,0)
 F  S OR=$O(@TEMP@(OR)) Q:'OR  S LBTST=+@TEMP@(OR) D  Q:ORRET
"RTN","ORATR",190,0)
 .Q:'$D(^VFD(21695.5,"D",LBTST))
"RTN","ORATR",191,0)
 .N RESULT,NODE S NODE=$O(@TEMP@(OR,63,"")) Q:NODE=""
"RTN","ORATR",192,0)
 .S RESULT=$P($G(@TEMP@(OR,63,NODE)),U,2) Q:RESULT=""
"RTN","ORATR",193,0)
 .I $$GET1^DIQ(8992.1,ORATIEN,1.01)[RESULT D
"RTN","ORATR",194,0)
 ..S ORRET=$O(^VFD(21695.5,"D",LBTST,""))
"RTN","ORATR",195,0)
 K ^TMP("LRX",$J)
"RTN","ORATR",196,0)
 Q ORRET
"RTN","ORATR",197,0)
 ;
"RTN","ORATR",198,0)
SETUP(ORIEN,ORNEW) ; Add data to the new entry in 21695.2
"RTN","ORATR",199,0)
 N ORCNT,ORDA,ORDATA,ORERR,ORFDA,ORNA,ORTEMP,ORX
"RTN","ORATR",200,0)
 S ORNA=$NA(ORFDA(21695.2,ORIEN_",")),ORCNT=1
"RTN","ORATR",201,0)
 I ORNEW D SETUP1(ORIEN)
"RTN","ORATR",202,0)
 D GETS^DIQ(8992.1,ORATIEN_",","20*","I","ORDATA","ORERR")
"RTN","ORATR",203,0)
 ; Update 21695.21 Multiple
"RTN","ORATR",204,0)
 S ORX="" F  S ORX=$O(ORDATA(8992.11,ORX)) Q:'ORX  D
"RTN","ORATR",205,0)
 .S ORDA=$$FIND1^DIC(21695.21,","_ORIEN_",","Q",ORDATA(8992.11,ORX,.01,"I"))
"RTN","ORATR",206,0)
 .S:'ORDA ORDA="+"_ORCNT,ORCNT=ORCNT+1
"RTN","ORATR",207,0)
 .D SETUP2(21695.21,8992.11,ORDA_","_ORIEN_",",ORX)
"RTN","ORATR",208,0)
 .S ORTEMP(+ORX)=ORDA
"RTN","ORATR",209,0)
 ; Update 21695.211 Multiple
"RTN","ORATR",210,0)
 S ORX="" F  S ORX=$O(ORDATA(8992.111,ORX)) Q:'ORX  D
"RTN","ORATR",211,0)
 .S ORDA=ORTEMP($P(ORX,",",2))
"RTN","ORATR",212,0)
 .I $E(ORDA,1)="+" S ORDA="+"_ORCNT_","_ORDA_","_ORIEN_",",ORCNT=ORCNT+1
"RTN","ORATR",213,0)
 .E  D
"RTN","ORATR",214,0)
 ..S ORDA(1)=$$FIND1^DIC(21695.211,","_ORDA_","_ORIEN_",","Q",ORDATA(8992.111,ORX,.01,"I"))
"RTN","ORATR",215,0)
 ..S:ORDA(1) ORDA=ORDA(1)_","_ORDA_","_ORIEN_","
"RTN","ORATR",216,0)
 ..S:'ORDA(1) ORDA="+"_ORCNT_","_ORDA_","_ORIEN_",",ORCNT=ORCNT+1
"RTN","ORATR",217,0)
 .D SETUP2(21695.211,8992.111,ORDA,ORX)
"RTN","ORATR",218,0)
 ; Update 21695.212 Multiple
"RTN","ORATR",219,0)
 S ORX="" F  S ORX=$O(ORDATA(8992.112,ORX)) Q:'ORX  D
"RTN","ORATR",220,0)
 .S ORDA=ORTEMP($P(ORX,",",2))
"RTN","ORATR",221,0)
 .I $E(ORDA,1)="+" S ORDA="+"_ORCNT_","_ORDA_","_ORIEN_",",ORCNT=ORCNT+1
"RTN","ORATR",222,0)
 .E  D
"RTN","ORATR",223,0)
 ..S ORDA(1)=$$FIND1^DIC(21695.212,","_ORDA_","_ORIEN_",","Q",ORDATA(8992.112,ORX,.01,"I"))
"RTN","ORATR",224,0)
 ..S:ORDA(1) ORDA=ORDA(1)_","_ORDA_","_ORIEN_","
"RTN","ORATR",225,0)
 ..S:'ORDA(1) ORDA="+"_ORCNT_","_ORDA_","_ORIEN_",",ORCNT=ORCNT+1
"RTN","ORATR",226,0)
 .D SETUP2(21695.212,8992.112,ORDA,ORX)
"RTN","ORATR",227,0)
 D UPDATE^DIE(,"ORFDA",,"ORERR")
"RTN","ORATR",228,0)
 Q
"RTN","ORATR",229,0)
 ;
"RTN","ORATR",230,0)
SETUP1(ORIEN) ; Set top level data
"RTN","ORATR",231,0)
 ; ORIEN - IEN in 21695.2
"RTN","ORATR",232,0)
 N ORDT,ORDUZ,ORERR,ORFDA,ORNA,ORDATA
"RTN","ORATR",233,0)
 D GETS^DIQ(8992.1,ORATIEN_",","*","I","ORDATA","ORERR")
"RTN","ORATR",234,0)
 S ORNA=$NA(ORFDA(21695.2,ORIEN_","))
"RTN","ORATR",235,0)
 S ORX=.01 F  S ORX=$O(ORDATA(8992.1,ORATIEN_",",ORX)) Q:'ORX  D
"RTN","ORATR",236,0)
 .Q:ORX=.08  S @ORNA@(ORX)=ORDATA(8992.1,ORATIEN_",",ORX,"I")
"RTN","ORATR",237,0)
 S ORDUZ=$$GET1^DIQ(8992.11,"1,"_ORATIEN_",",.01,"I",,"ORERR")
"RTN","ORATR",238,0)
 S ORDT=@ORNA@(.02)
"RTN","ORATR",239,0)
 S @ORNA@(.09)=ORATIEN
"RTN","ORATR",240,0)
 S:$G(ORNOT)'="" @ORNA@(.1)=ORNOT
"RTN","ORATR",241,0)
 I ORDUZ,ORDT D
"RTN","ORATR",242,0)
 .S @ORNA@(.11)=$$GET1^DIQ(8992.01,ORDT_","_ORDUZ,.1,"I",,"ORERR")
"RTN","ORATR",243,0)
 S:$G(ORLOC)'="" @ORNA@(.12)=ORLOC
"RTN","ORATR",244,0)
 S @ORNA@(1.05)=0
"RTN","ORATR",245,0)
 S @ORNA@(1.09)=$P($$GET1^DIQ(21695.2,ORIEN,.01),";",5)
"RTN","ORATR",246,0)
 D UPDATE^DIE(,"ORFDA",,"ORERR")
"RTN","ORATR",247,0)
 Q
"RTN","ORATR",248,0)
 ;
"RTN","ORATR",249,0)
SETUP2(ORNEW,OROLD,ORIENS,ORX) ;
"RTN","ORATR",250,0)
 N ORNA,ORY
"RTN","ORATR",251,0)
 S ORNA=$NA(ORFDA(ORNEW,ORIENS))
"RTN","ORATR",252,0)
 S ORY=0 F  S ORY=$O(ORDATA(OROLD,ORX,ORY)) Q:'ORY  D
"RTN","ORATR",253,0)
 .S @ORNA@(ORY)=ORDATA(OROLD,ORX,ORY,"I")
"RTN","ORATR",254,0)
 Q
"RTN","ORATR1")
0^10^B13894599
"RTN","ORATR1",1,0)
ORATR1 ; DSS/SMP/ASF - Abnormal Alert Utilities ; SEP 30, 2012
"RTN","ORATR1",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATR1",3,0)
 ;;;
"RTN","ORATR1",4,0)
 Q
"RTN","ORATR1",5,0)
 ;
"RTN","ORATR1",6,0)
 ; Documented API and ICRs
"RTN","ORATR1",7,0)
 ; -----------------------
"RTN","ORATR1",8,0)
 ; 2051      FIND^DIC   
"RTN","ORATR1",9,0)
 ; 2056      $$GET1^DIQ
"RTN","ORATR1",10,0)
 ; 2056      GETS^DIQ
"RTN","ORATR1",11,0)
 ; 3315      UPDATE^DIE
"RTN","ORATR1",12,0)
 ;
"RTN","ORATR1",13,0)
 ;=====================================================================
"RTN","ORATR1",14,0)
 ;            A B N O R M A L   A L E R T   R E P O R T I N G
"RTN","ORATR1",15,0)
 ;=====================================================================
"RTN","ORATR1",16,0)
 ;
"RTN","ORATR1",17,0)
ONEPT ;INDIVIDUAL PATIENT
"RTN","ORATR1",18,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",19,0)
 S DIC(0)="ACEQMZ"
"RTN","ORATR1",20,0)
 S DIC="^DPT(" D ^DIC Q:Y'>0  S DFN=+Y
"RTN","ORATR1",21,0)
 S DIC="^VFD(21695.2,",FLDS="[ORATR PT DETAIL]",L=0
"RTN","ORATR1",22,0)
 S BY="-.02,@"
"RTN","ORATR1",23,0)
 S DIS(0)="I $P($G(^VFD(21695.2,D0,0)),U,4)="_DFN
"RTN","ORATR1",24,0)
 D EN1^DIP
"RTN","ORATR1",25,0)
 Q
"RTN","ORATR1",26,0)
RECIP ;
"RTN","ORATR1",27,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",28,0)
 S DIC=200,DIC(0)="AEQM" D ^DIC Q:Y'>0  S OR200IEN=+Y
"RTN","ORATR1",29,0)
 S DIC="^VFD(21695.2,",FLDS="[ORATR PT DETAIL]",L=0
"RTN","ORATR1",30,0)
 S BY="-.02,@"
"RTN","ORATR1",31,0)
 S DIS(0)="S D1=+$O(^VFD(21695.2,D0,20,0)) X DIS(""0A"") I $T"
"RTN","ORATR1",32,0)
 S DIS("0A")="F  X DIS(""0AA"") X:D1'>0 ""IF 0"" Q:$T  S D1=$O(^VFD(21695.2,D0,20,D1)) Q:D1'>0"
"RTN","ORATR1",33,0)
 S DIS("0AA")="I $P($G(^VFD(21695.2,D0,20,D1,0)),U,1)="_OR200IEN
"RTN","ORATR1",34,0)
 D EN1^DIP
"RTN","ORATR1",35,0)
 Q
"RTN","ORATR1",36,0)
RECIPME ;USER AS RECIPIENT
"RTN","ORATR1",37,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",38,0)
 S DIC="^VFD(21695.2,",FLDS="[ORATR PT DETAIL]",L=0
"RTN","ORATR1",39,0)
 S BY="-.02,@"
"RTN","ORATR1",40,0)
 S DIS(0)="S D1=+$O(^VFD(21695.2,D0,20,0)) X DIS(""0A"") I $T"
"RTN","ORATR1",41,0)
 S DIS("0A")="F  X DIS(""0AA"") X:D1'>0 ""IF 0"" Q:$T  S D1=$O(^VFD(21695.2,D0,20,D1)) Q:D1'>0"
"RTN","ORATR1",42,0)
 S DIS("0AA")="I $P($G(^VFD(21695.2,D0,20,D1,0)),U,1)="_DUZ
"RTN","ORATR1",43,0)
 D EN1^DIP
"RTN","ORATR1",44,0)
 Q
"RTN","ORATR1",45,0)
ALLDT ;ALL ALERTS BY DATE
"RTN","ORATR1",46,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",47,0)
 S DIC="^VFD(21695.2,",FLDS="[ORATR PT DETAIL]",L=0
"RTN","ORATR1",48,0)
 S BY="-.02,@"
"RTN","ORATR1",49,0)
 D EN1^DIP
"RTN","ORATR1",50,0)
 Q
"RTN","ORATR1",51,0)
PROCESS ;PROCCESSED
"RTN","ORATR1",52,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",53,0)
 S DIC="^VFD(21695.2,",FLDS="!.02;C1,.04,1.01;C6",L=0
"RTN","ORATR1",54,0)
 S BY="+1.05,-.02,@"
"RTN","ORATR1",55,0)
 D EN1^DIP
"RTN","ORATR1",56,0)
 Q
"RTN","ORATR1",57,0)
STAT ;stats by process only
"RTN","ORATR1",58,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",59,0)
 S DIC="^VFD(21695.2,",FLDS="!1.05",L=0 ;"!.02;C1,.04,1.01;C6",L=0
"RTN","ORATR1",60,0)
 S BY="+1.05,-@.02,@"
"RTN","ORATR1",61,0)
 D EN1^DIP
"RTN","ORATR1",62,0)
 Q
"RTN","ORATR1",63,0)
BIRAD ;report by BI-RAD codes
"RTN","ORATR1",64,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",65,0)
 S DIC="^VFD(21695.2,",FLDS="[ORATR BI-RAD]",L=0
"RTN","ORATR1",66,0)
 S BY="[ORATR SMART BI-RAD]" ;"-.02,@"
"RTN","ORATR1",67,0)
 D EN1^DIP
"RTN","ORATR1",68,0)
 Q
"RTN","ORATR1",69,0)
FM ;FM report
"RTN","ORATR1",70,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN,DIR
"RTN","ORATR1",71,0)
 S DIR(0)="S^S:SEARCH;P:PRINT"
"RTN","ORATR1",72,0)
 ;
"RTN","ORATR1",73,0)
 D ^DIR
"RTN","ORATR1",74,0)
 S DIC="^VFD(21695.2,"
"RTN","ORATR1",75,0)
 I Y="S" D EN^DIS Q
"RTN","ORATR1",76,0)
 I Y="P" D EN1^DIP Q
"RTN","ORATR1",77,0)
 Q
"RTN","ORATR1",78,0)
OUTSTAN ;outstanding alerts for national coordinator
"RTN","ORATR1",79,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",80,0)
 S FLDS="!.01" D OUTSTA Q  ;-->out
"RTN","ORATR1",81,0)
OUTSTAL ;outstanding alerts for local coordinator
"RTN","ORATR1",82,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN
"RTN","ORATR1",83,0)
 S FLDS="[ORATR PT DETAIL]" D OUTSTA Q  ;-->out
"RTN","ORATR1",84,0)
OUTSTA ;outstanding alerts
"RTN","ORATR1",85,0)
 S DIC="^VFD(21695.2,",L=0
"RTN","ORATR1",86,0)
 S DIS(0)="I $P(^(D0,1),U,8)<1"
"RTN","ORATR1",87,0)
 S BY="[ORATR OUTSTANDING]"
"RTN","ORATR1",88,0)
 D EN1^DIP
"RTN","ORATR1",89,0)
 Q
"RTN","ORATR1",90,0)
 ;
"RTN","ORATR1",91,0)
NOTIF ;
"RTN","ORATR1",92,0)
 N FLDS,BY,DIC,DIS,Y,OR200IEN,L,DFN,ORATRED,ORATRSD
"RTN","ORATR1",93,0)
 D DRANGE
"RTN","ORATR1",94,0)
 Q:ORATRED'>0  Q:ORATRSD'>0
"RTN","ORATR1",95,0)
 S DIS(0)="I $P($P($G(^VFD(21695.2,D0,0)),U,2),""."")>"_ORATRSD_" I $P($G(^VFD(21695.2,D0,0)),U,2)<"_ORATRED
"RTN","ORATR1",96,0)
 S DIS(1)="I $P($G(^VFD(21695.2,D0,1)),U,8)'?."" """
"RTN","ORATR1",97,0)
 S DIC="^VFD(21695.2,",FLDS="!.01;X",L=0
"RTN","ORATR1",98,0)
 S BY="[ORATR SMART NOTIF3]"
"RTN","ORATR1",99,0)
 S Y=ORATRED D DD^%DT S ORATRED=Y
"RTN","ORATR1",100,0)
 S Y=ORATRSD D DD^%DT S ORATRSD=Y
"RTN","ORATR1",101,0)
 S DHD="Patient Notifications from "_ORATRSD_" to "_ORATRED
"RTN","ORATR1",102,0)
 D EN1^DIP
"RTN","ORATR1",103,0)
 Q
"RTN","ORATR1",104,0)
DRANGE ;date range
"RTN","ORATR1",105,0)
 N DIR,Y
"RTN","ORATR1",106,0)
 S ORATRSD="",ORATRED=""
"RTN","ORATR1",107,0)
 S DIR(0)="D",DIR("A")="Start Date" D ^DIR Q:Y'>1  ;-->out
"RTN","ORATR1",108,0)
 S ORATRSD=Y W $C(9),Y(0)
"RTN","ORATR1",109,0)
 S DIR(0)="D",DIR("A")="End Date" D ^DIR Q:Y'>1  ;-->out
"RTN","ORATR1",110,0)
 S ORATRED=Y W $C(9),Y(0)
"RTN","ORATR1",111,0)
 I ORATRSD>ORATRED S Y=ORATRSD,ORATRSD=ORATRED,ORATRED=Y
"RTN","ORATR1",112,0)
 Q
"RTN","ORATR2")
0^11^B115813215
"RTN","ORATR2",1,0)
ORATR2 ; DSS/SMP/ASF - Abnormal Alert Utilities ; NOV 08, 2012
"RTN","ORATR2",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATR2",3,0)
 ;;;
"RTN","ORATR2",4,0)
 Q
"RTN","ORATR2",5,0)
 ;
"RTN","ORATR2",6,0)
 ; Documented API and ICRs
"RTN","ORATR2",7,0)
 ; -----------------------
"RTN","ORATR2",8,0)
 ; 1252      ^SDUTL3
"RTN","ORATR2",9,0)
 ; 2043      EN1^RAO7PC1
"RTN","ORATR2",10,0)
 ; 2051      FIND^DIC
"RTN","ORATR2",11,0)
 ; 2056      $$GET1^DIQ
"RTN","ORATR2",12,0)
 ; 2056      GETS^DIQ
"RTN","ORATR2",13,0)
 ; 2182      MAIN^PXRM
"RTN","ORATR2",14,0)
 ; 2263      ^XPAR
"RTN","ORATR2",15,0)
 ; 3315      UPDATE^DIE
"RTN","ORATR2",16,0)
 ; 10081     ^XQALERT    ACTION^XQALERT
"RTN","ORATR2",17,0)
 ; 10013     ^DIK
"RTN","ORATR2",18,0)
 ; 10103     ^XLFDT 
"RTN","ORATR2",19,0)
 ;
"RTN","ORATR2",20,0)
 ;=====================================================================
"RTN","ORATR2",21,0)
 ;         M A M M O G R A M   F O L L O W - U P   A L E R T S
"RTN","ORATR2",22,0)
 ;=====================================================================
"RTN","ORATR2",23,0)
1 ; Scheduled task that sends TAR alerts based on Clinical Reminders
"RTN","ORATR2",24,0)
 ;  Can be scheduled to run multiple times a day
"RTN","ORATR2",25,0)
 N DFN,PXRM,TYPE,ORIEN
"RTN","ORATR2",26,0)
 D PROCESS
"RTN","ORATR2",27,0)
 S PXRM="" F  S PXRM=$O(^VFD(21695.5,"CR",PXRM)) Q:'PXRM  D
"RTN","ORATR2",28,0)
 .S TYPE=$O(^VFD(21695.5,"CR",PXRM,""))
"RTN","ORATR2",29,0)
 .Q:$$GET1^DIQ(21695.5,TYPE,.04,"I")
"RTN","ORATR2",30,0)
 .D CHECKHF(PXRM,TYPE)
"RTN","ORATR2",31,0)
 Q
"RTN","ORATR2",32,0)
 ;
"RTN","ORATR2",33,0)
2 ; Scheduled task that runs once a day
"RTN","ORATR2",34,0)
 N DFN,PXRM,TYPE
"RTN","ORATR2",35,0)
 D PROCESS
"RTN","ORATR2",36,0)
 S PXRM="" F  S PXRM=$O(^VFD(21695.5,"CR",PXRM)) Q:'PXRM  D
"RTN","ORATR2",37,0)
 .S TYPE=$O(^VFD(21695.5,"CR",PXRM,""))
"RTN","ORATR2",38,0)
 .Q:$$GET1^DIQ(21695.5,TYPE,.04,"I")
"RTN","ORATR2",39,0)
 .S DFN=0 F  S DFN=$O(^DPT(DFN)) Q:'DFN  D
"RTN","ORATR2",40,0)
 ..Q:$$GET1^DIQ(2,DFN,.351,"I")
"RTN","ORATR2",41,0)
 ..K ^TMP("PXRHM",$J) D MAIN^PXRM(DFN,PXRM,0)
"RTN","ORATR2",42,0)
 ..I $D(^TMP("PXRHM",$J)) D SETUP(DFN,TYPE)
"RTN","ORATR2",43,0)
 K ^TMP("PXRHM",$J)
"RTN","ORATR2",44,0)
 Q
"RTN","ORATR2",45,0)
 ;
"RTN","ORATR2",46,0)
PROCESS ; Check current notificaitons
"RTN","ORATR2",47,0)
 N ORIEN
"RTN","ORATR2",48,0)
 S ORIEN=0 F  S ORIEN=$O(^VFD(21695.2,ORIEN)) Q:'ORIEN  D
"RTN","ORATR2",49,0)
 .D CLEANHF(ORIEN)
"RTN","ORATR2",50,0)
 .N ORPROC S ORPROC=$$GET1^DIQ(21695.2,ORIEN,1.05,"I")
"RTN","ORATR2",51,0)
 .I ORPROC=0 D CHECKDUE(ORIEN)
"RTN","ORATR2",52,0)
 .I ORPROC=1 D FOLLOWUP(ORIEN)
"RTN","ORATR2",53,0)
 .I ORPROC=3 D PURGE(ORIEN)
"RTN","ORATR2",54,0)
 Q
"RTN","ORATR2",55,0)
 ;
"RTN","ORATR2",56,0)
CHECKDUE(ORIEN) ;
"RTN","ORATR2",57,0)
 N ORDT,TODAY S TODAY=$$DT^XLFDT
"RTN","ORATR2",58,0)
 Q:$$GET1^DIQ(21695.2,ORIEN,1.05,"I")'=0
"RTN","ORATR2",59,0)
 S ORDT=$$GET1^DIQ(21695.2,ORIEN,.02,"I")
"RTN","ORATR2",60,0)
 I ORDT<$$FMADD^XLFDT(TODAY,$$GETDAYS) D SENDUP(ORIEN)
"RTN","ORATR2",61,0)
 Q
"RTN","ORATR2",62,0)
 ;
"RTN","ORATR2",63,0)
CHECKHF(PXRM,TYPE) ; 
"RTN","ORATR2",64,0)
 N DFN,HF,HFIEN,PATS
"RTN","ORATR2",65,0)
 ;^PXRMINDX(9000010.23,"IP",HF,DFN)
"RTN","ORATR2",66,0)
 D CHECKHF1
"RTN","ORATR2",67,0)
 S HFIEN="" F  S HFIEN=$O(HF(HFIEN)) Q:'HFIEN  D
"RTN","ORATR2",68,0)
 .S DFN="" F  S DFN=$O(^PXRMINDX(9000010.23,"IP",HFIEN,DFN)) Q:'DFN  D
"RTN","ORATR2",69,0)
 ..S PATS(DFN)=""
"RTN","ORATR2",70,0)
 S DFN=0 F  S DFN=$O(PATS(DFN)) Q:'DFN  D
"RTN","ORATR2",71,0)
 .K ^TMP("PXRHM",$J) D MAIN^PXRM(DFN,PXRM,0)
"RTN","ORATR2",72,0)
 .I $D(^TMP("PXRHM",$J)) D SETUP(DFN,TYPE)
"RTN","ORATR2",73,0)
 K ^TMP("PXRHM",$J)
"RTN","ORATR2",74,0)
 Q
"RTN","ORATR2",75,0)
 ;
"RTN","ORATR2",76,0)
CHECKHF1 ;
"RTN","ORATR2",77,0)
 N REM,TERM,DATA,ORDATA,ORX,ORY
"RTN","ORATR2",78,0)
 D GETS^DIQ(811.9,PXRM_",","20*","I","DATA")
"RTN","ORATR2",79,0)
 S ORX="" F  S ORX=$O(DATA(811.902,ORX)) Q:'ORX  D
"RTN","ORATR2",80,0)
 .S TERM=$G(DATA(811.902,ORX,.01,"I"))
"RTN","ORATR2",81,0)
 .I TERM["AUTTHF(" S HF(+TERM)="" Q
"RTN","ORATR2",82,0)
 .I TERM["PXRMD(811.5" D
"RTN","ORATR2",83,0)
 ..K ORDATA D GETS^DIQ(811.5,+TERM_",","20*","I","ORDATA")
"RTN","ORATR2",84,0)
 ..S ORY="" F  S ORY=$O(ORDATA(811.52,ORY)) Q:'ORY  D
"RTN","ORATR2",85,0)
 ...S TERM=$G(ORDATA(811.52,ORY,.01,"I"))
"RTN","ORATR2",86,0)
 ...I TERM["AUTTHF(" S HF(+TERM)="" Q
"RTN","ORATR2",87,0)
 Q
"RTN","ORATR2",88,0)
 ;
"RTN","ORATR2",89,0)
CHKSENT() ;
"RTN","ORATR2",90,0)
 N IEN,SENT S SENT=0
"RTN","ORATR2",91,0)
 S IEN=0 F  S IEN=$O(^VFD(21695.2,"C",PAT,IEN)) Q:'IEN  D  Q:SENT
"RTN","ORATR2",92,0)
 .S PROV=0 F  S PROV=$O(RECIP(PROV)) Q:'PROV  D
"RTN","ORATR2",93,0)
 ..Q:'$D(^VFD(21695.2,"R",PROV,IEN))
"RTN","ORATR2",94,0)
 ..I $P($$GET1^DIQ(21695.2,IEN,.01),";",5)'=TYPE Q
"RTN","ORATR2",95,0)
 ..S SENT=IEN_U_$$GET1^DIQ(21695.2,IEN,.02,"I")
"RTN","ORATR2",96,0)
 Q SENT
"RTN","ORATR2",97,0)
 ;
"RTN","ORATR2",98,0)
CLEANHF(TARIEN) ; Clean up Health Factor multiple
"RTN","ORATR2",99,0)
 N ORDATA,ORX,ORERR,ORFDA,NEWHF,ORY,VST,VHF
"RTN","ORATR2",100,0)
 D GETS^DIQ(21695.2,TARIEN_",","6*","I","ORDATA","ORERR")
"RTN","ORATR2",101,0)
 S ORX="" F  S ORX=$O(ORDATA(21695.26,ORX)) Q:'ORX  D
"RTN","ORATR2",102,0)
 .S VHF=$G(ORDATA(21695.26,ORX,.01,"I"))
"RTN","ORATR2",103,0)
 .I $D(^AUPNVHF(VHF)) S VST=$$GET1^DIQ(9000010.23,VHF,.03,"I")  D
"RTN","ORATR2",104,0)
 ..S ORY=0 F  S ORY=$O(^AUPNVHF("AD",VST,ORY)) Q:'ORY  D
"RTN","ORATR2",105,0)
 ...I '$D(^VFD(21695.2,TARIEN,6,"B",ORY)) S NEWHF(ORY)=""
"RTN","ORATR2",106,0)
 .I '$D(^AUPNVHF(VHF)) D CLEANHF1(ORX)
"RTN","ORATR2",107,0)
 Q:'$D(NEWHF)
"RTN","ORATR2",108,0)
 S ORX="" F ORY=1:1 S ORX=$O(NEWHF(ORX)) Q:'ORX  D
"RTN","ORATR2",109,0)
 .S ORFDA(21695.26,"+"_ORY_","_TARIEN_",",.01)=ORX
"RTN","ORATR2",110,0)
 L +^VFD(21695.2,TARIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",111,0)
 D UPDATE^DIE(,"ORFDA",,"ORERR")
"RTN","ORATR2",112,0)
 L -^VFD(21695.2,TARIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",113,0)
 Q
"RTN","ORATR2",114,0)
 ;
"RTN","ORATR2",115,0)
CLEANHF1(IENS) ;
"RTN","ORATR2",116,0)
 N ORFDA,ORERR Q:'IENS
"RTN","ORATR2",117,0)
 S ORFDA(21695.26,IENS,.04)=1
"RTN","ORATR2",118,0)
 L +^VFD(21695.2,TARIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",119,0)
 D UPDATE^DIE(,"ORFDA",,"ORERR")
"RTN","ORATR2",120,0)
 L -^VFD(21695.2,TARIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",121,0)
 Q
"RTN","ORATR2",122,0)
 ;
"RTN","ORATR2",123,0)
FOLLOWUP(TARIEN) ; Get follow-up orders based on health factors
"RTN","ORATR2",124,0)
 N CNT,DATE,HF,HFNM,NA,ORERR,ORFDA,ORIEN,PAT,VST
"RTN","ORATR2",125,0)
 S CNT=1,TARIEN=+$G(TARIEN)
"RTN","ORATR2",126,0)
 Q:'TARIEN!($$GET1^DIQ(21695.2,TARIEN,1.05,"I",,"ORERR")'=1)
"RTN","ORATR2",127,0)
 S PAT=$$GET1^DIQ(21695.2,TARIEN,.04,"I") Q:'PAT
"RTN","ORATR2",128,0)
 S HF="" F  S HF=$O(^VFD(21695.2,TARIEN,6,"B",HF)) Q:'HF  D
"RTN","ORATR2",129,0)
 .S HFNM=$$GET1^DIQ(9000010.23,HF,.01) Q:HFNM["PT CONTACT"
"RTN","ORATR2",130,0)
 .S VST=$$GET1^DIQ(9000010,$$GET1^DIQ(9000010.23,HF,.03,"I"),.01,"I")
"RTN","ORATR2",131,0)
 .S:VST DATE(VST)=""
"RTN","ORATR2",132,0)
 Q:'$D(DATE)
"RTN","ORATR2",133,0)
 S DATE=9999999-$P($O(DATE("")),"."),NA=$NA(^OR(100,"ACT",PAT_";DPT("))
"RTN","ORATR2",134,0)
 F  S NA=$Q(@NA) Q:$QS(NA,3)'[PAT!($QS(NA,4)>DATE)  D
"RTN","ORATR2",135,0)
 .S ORIEN=$QS(NA,6),ORIEN(1)=$QS(NA,7)
"RTN","ORATR2",136,0)
 .Q:$$GET1^DIQ(100.008,ORIEN(1)_","_ORIEN_",",2)'="NEW"
"RTN","ORATR2",137,0)
 .Q:$D(^VFD(21695.2,TARIEN,5,"B",ORIEN))
"RTN","ORATR2",138,0)
 .S ORFDA(21695.25,"+"_CNT_","_TARIEN_",",.01)=ORIEN,CNT=CNT+1
"RTN","ORATR2",139,0)
 I $D(ORFDA) D
"RTN","ORATR2",140,0)
 .L +^VFD(21695.2,TARIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",141,0)
 .D UPDATE^DIE("U","ORFDA",,"ORERR")
"RTN","ORATR2",142,0)
 .L -^VFD(21695.2,TARIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",143,0)
 Q
"RTN","ORATR2",144,0)
 ;
"RTN","ORATR2",145,0)
GETDATE(DFN,PXRM) ; 
"RTN","ORATR2",146,0)
 N X,DATE,FIND,SORT,RET S RET=0
"RTN","ORATR2",147,0)
 D FIDATA^PXRM(DFN,PXRM,.FIND)
"RTN","ORATR2",148,0)
 S X=0 F  S X=$O(FIND(X)) Q:'X  D
"RTN","ORATR2",149,0)
 .Q:$G(FIND(X,"TERM"))'["ORDER"
"RTN","ORATR2",150,0)
 .S DATE=$G(FIND(X,"DATE")) Q:'DATE
"RTN","ORATR2",151,0)
 .S SORT(9999999-DATE)=DATE
"RTN","ORATR2",152,0)
 I $D(SORT) S X=$O(SORT(X)),RET=SORT(X)
"RTN","ORATR2",153,0)
 Q RET
"RTN","ORATR2",154,0)
 ;
"RTN","ORATR2",155,0)
GETDAYS() ;
"RTN","ORATR2",156,0)
 N ORX
"RTN","ORATR2",157,0)
 D GETLST^XPAR(.ORX,"SYS","ORATR DAYS TO ROLL-UP","I")
"RTN","ORATR2",158,0)
 Q $S(ORX:-ORX(1),1:-14) ; Defaults to 14 days
"RTN","ORATR2",159,0)
 ;
"RTN","ORATR2",160,0)
GETORD(PAT) ;
"RTN","ORATR2",161,0)
 N ORATIEN,ORDER,ORIEN,ORNOT,TARIEN
"RTN","ORATR2",162,0)
 S TARIEN="" F  S TARIEN=$O(^VFD(21695.2,"C",PAT,TARIEN)) Q:'TARIEN  D
"RTN","ORATR2",163,0)
 .S ORIEN=$$GET1^DIQ(21695.2,TARIEN,2)
"RTN","ORATR2",164,0)
 .I ORIEN["~" D
"RTN","ORATR2",165,0)
 ..S ORIEN=+$$GETORDER^ORATR(PAT,$TR(ORIEN,"~","-"))
"RTN","ORATR2",166,0)
 ..S:ORIEN=-1 ORIEN=""
"RTN","ORATR2",167,0)
 .I ORIEN S ORDER=+ORIEN
"RTN","ORATR2",168,0)
 Q $G(ORDER)
"RTN","ORATR2",169,0)
 ;
"RTN","ORATR2",170,0)
GETRAD(PAT,TODAY) ; Get info on last mammogram screening
"RTN","ORATR2",171,0)
 N X,RET S RET=""
"RTN","ORATR2",172,0)
 K ^TMP($J,"RAE1")
"RTN","ORATR2",173,0)
 D EN1^RAO7PC1(PAT,$$FMADD^XLFDT(TODAY,-60),TODAY,10)
"RTN","ORATR2",174,0)
 S X="" F  S X=$O(^TMP($J,"RAE1",PAT,X)) Q:X=""  D  Q:RET'=""
"RTN","ORATR2",175,0)
 .Q:$P(^TMP($J,"RAE1",PAT,X),U)'="MAMMOGRAM SCREEENING"
"RTN","ORATR2",176,0)
 .S RET=X,ORD=$P(^TMP($J,"RAE1",PAT,X),U,11)
"RTN","ORATR2",177,0)
 .I +$$GET1^DIQ(100,ORD,.02,"I")'=PAT K ORD
"RTN","ORATR2",178,0)
 K ^TMP($J,"RAE1")
"RTN","ORATR2",179,0)
 Q $TR(RET,"-","~")
"RTN","ORATR2",180,0)
 ;
"RTN","ORATR2",181,0)
GETRECIP(DFN,TYPE) ;
"RTN","ORATR2",182,0)
 ; P (Primary Provider): deliver notification to 
"RTN","ORATR2",183,0)
 ; the patient's Primary Provider.  
"RTN","ORATR2",184,0)
 ; 
"RTN","ORATR2",185,0)
 ; A (Attending Physician): deliver notification
"RTN","ORATR2",186,0)
 ; to the patient's Attending Physician.  
"RTN","ORATR2",187,0)
 ; 
"RTN","ORATR2",188,0)
 ; T (Patient Care Team): deliver notification to
"RTN","ORATR2",189,0)
 ; the patient's  primary care Team.  
"RTN","ORATR2",190,0)
 ; 
"RTN","ORATR2",191,0)
 ; M (PCMM Team): deliver notification to
"RTN","ORATR2",192,0)
 ; users/providers linked to the patient via PCMM
"RTN","ORATR2",193,0)
 ; Team Position assignments.  
"RTN","ORATR2",194,0)
 ; 
"RTN","ORATR2",195,0)
 ; E (Encounter Provider): deliver notification to
"RTN","ORATR2",196,0)
 ; the encounter provider who is associated with
"RTN","ORATR2",197,0)
 ; the health factors generating this notification.
"RTN","ORATR2",198,0)
 ; 
"RTN","ORATR2",199,0)
 ; R (PCMM Primary Care Practitioner): deliver
"RTN","ORATR2",200,0)
 ; notification to the patient's PCMM Primary Care
"RTN","ORATR2",201,0)
 ; Practitioner.  
"RTN","ORATR2",202,0)
 ; 
"RTN","ORATR2",203,0)
 ; S (PCMM Associate Provider): deliver
"RTN","ORATR2",204,0)
 ; notification to the patient's PCMM Associate
"RTN","ORATR2",205,0)
 ; Provider.
"RTN","ORATR2",206,0)
 ;
"RTN","ORATR2",207,0)
 S RECIP=$$GET1^DIQ(21695.5,TYPE,.05)
"RTN","ORATR2",208,0)
 I RECIP["P" D P
"RTN","ORATR2",209,0)
 I RECIP["A" D A
"RTN","ORATR2",210,0)
 I RECIP["T" D T
"RTN","ORATR2",211,0)
 I RECIP["E" D E
"RTN","ORATR2",212,0)
 I RECIP["R" D R
"RTN","ORATR2",213,0)
 I RECIP["S" D S
"RTN","ORATR2",214,0)
 I RECIP["M" D M
"RTN","ORATR2",215,0)
 Q
"RTN","ORATR2",216,0)
 ;
"RTN","ORATR2",217,0)
PURGE(ORIEN) ; Purge transmitted notifications out of file 21695.2
"RTN","ORATR2",218,0)
 ; Only purge notifications that were marked "TRANSMITTED" after
"RTN","ORATR2",219,0)
 ; a specified period of time
"RTN","ORATR2",220,0)
 N ORDT,ORDAYS,ORX,TODAY S TODAY=$$DT^XLFDT
"RTN","ORATR2",221,0)
 Q:$$GET1^DIQ(21695.2,ORIEN,1.05,"I")'=3
"RTN","ORATR2",222,0)
 D GETLST^XPAR(.ORX,"SYS","ORATR DAYS TO PURGE","I")
"RTN","ORATR2",223,0)
 S ORDAYS=$S(ORX:-ORX(1),1:-30) ; Defaults to 30 days
"RTN","ORATR2",224,0)
 S ORDT=$$GET1^DIQ(21695.2,ORIEN,1.06,"I")
"RTN","ORATR2",225,0)
 I ORDT<$$FMADD^XLFDT(TODAY,ORDAYS) D
"RTN","ORATR2",226,0)
 .N DA,DIK S DA=ORIEN,DIK="^VFD(21695.2," D ^DIK
"RTN","ORATR2",227,0)
 Q
"RTN","ORATR2",228,0)
 ;
"RTN","ORATR2",229,0)
ROLLDUP(IEN,KEY) ;
"RTN","ORATR2",230,0)
 N ORX,DATA,ERR,NM,RET S RET=0
"RTN","ORATR2",231,0)
 D GETS^DIQ(21695.2,IEN_",","20*",,"DATA","ERR")
"RTN","ORATR2",232,0)
 S ORX="" F  S ORX=$O(DATA(21695.21,ORX)) Q:ORX=""  D
"RTN","ORATR2",233,0)
 .S NM=$G(DATA(21695.21,ORX,.01))
"RTN","ORATR2",234,0)
 .I $D(^VA(200,KEY,NM)) S RET=1
"RTN","ORATR2",235,0)
 Q RET
"RTN","ORATR2",236,0)
 ;
"RTN","ORATR2",237,0)
SEND(PAT,RECIP,TYPE,DATA) ;
"RTN","ORATR2",238,0)
 N NAME,NEWIEN,NOW,ORFDA,ORLOC,ORNA,SENT,TEXT,TODAY,ORX,ORCNT
"RTN","ORATR2",239,0)
 S SENT=$$CHKSENT,TODAY=$$DT^XLFDT
"RTN","ORATR2",240,0)
 I SENT D  Q
"RTN","ORATR2",241,0)
 .I $P(SENT,U,2)<$$FMADD^XLFDT(TODAY,$$GETDAYS) D SENDUP(+SENT)
"RTN","ORATR2",242,0)
 S NOW=$$NOW^XLFDT
"RTN","ORATR2",243,0)
 S NAME="ATR,"_PAT_",;10000;"_PAT_";"_NOW_";"_TYPE_";"
"RTN","ORATR2",244,0)
 I $G(ORD)'="" S NAME=NAME_$$GET1^DIQ(100,ORD,4,"I")
"RTN","ORATR2",245,0)
 I $G(ORD)=""  S NAME=NAME_+$G(DATE)
"RTN","ORATR2",246,0)
 S TEXT=$$GET1^DIQ(21695.5,TYPE,3),ORNA=$NA(ORFDA(21695.2,"+1,"))
"RTN","ORATR2",247,0)
 S @ORNA@(.01)=NAME,@ORNA@(.02)=NOW,@ORNA@(.04)=PAT
"RTN","ORATR2",248,0)
 S @ORNA@(1.01)=TEXT,@ORNA@(1.05)=0,@ORNA@(1.09)=TYPE
"RTN","ORATR2",249,0)
 I $G(ORD)'="" S ORLOC=+$$GET1^DIQ(100,ORD,6,"I",,"ORERR") D
"RTN","ORATR2",250,0)
 .I ORLOC S @ORNA@(.12)=+ORLOC
"RTN","ORATR2",251,0)
 I $G(DATA)'="" S @ORNA@(2)=DATA
"RTN","ORATR2",252,0)
 E  S:$G(ORD)'="" @ORNA@(2)=ORD_"@OR"
"RTN","ORATR2",253,0)
 S ORX=0,ORCNT=2 F  S ORX=$O(RECIP(ORX)) Q:'ORX  D
"RTN","ORATR2",254,0)
 .S ORFDA(21695.21,"+"_ORCNT_",+1,",.01)=ORX
"RTN","ORATR2",255,0)
 .S ORFDA(21695.211,"+"_(ORCNT+1)_",+"_ORCNT_",+1,",.01)=1
"RTN","ORATR2",256,0)
 .S ORCNT=ORCNT+2
"RTN","ORATR2",257,0)
 D UPDATE^DIE("U","ORFDA","NEWIEN")
"RTN","ORATR2",258,0)
 Q
"RTN","ORATR2",259,0)
 ;
"RTN","ORATR2",260,0)
SENDUP(ATRIEN) ; Send this alert to the holder of the key
"RTN","ORATR2",261,0)
 N I,RECIP,KEY,ORFDA,ORERR
"RTN","ORATR2",262,0)
 Q:$$GET1^DIQ(21695.2,ATRIEN,1.05,"I")>1
"RTN","ORATR2",263,0)
 S KEY="AK.ORATRC",RECIP=$NA(^VA(200,KEY))
"RTN","ORATR2",264,0)
 Q:$$ROLLDUP(ATRIEN,KEY)
"RTN","ORATR2",265,0)
 F I=1:1 S RECIP=$Q(@RECIP) Q:$QS(RECIP,2)'=KEY  D
"RTN","ORATR2",266,0)
 .N IENS S IENS="+"_I_","_ATRIEN_","
"RTN","ORATR2",267,0)
 .S ORFDA(21695.21,IENS,.01)=$QS(RECIP,4)
"RTN","ORATR2",268,0)
 .S I=I+1,ORFDA(21695.211,"+"_I_","_IENS,.01)=1
"RTN","ORATR2",269,0)
 L +^VFD(21695.2,ATRIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",270,0)
 D UPDATE^DIE(,"ORFDA",,"ORERR")
"RTN","ORATR2",271,0)
 L -^VFD(21695.2,ATRIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATR2",272,0)
 Q
"RTN","ORATR2",273,0)
 ;
"RTN","ORATR2",274,0)
SETUP(DFN,TYPE) ;
"RTN","ORATR2",275,0)
 N DATA,PROV,ORD,DATE,RECIP,ORX
"RTN","ORATR2",276,0)
 I $$GET1^DIQ(21695.5,TYPE,.01)["PATIENT NOTIFICATION" D
"RTN","ORATR2",277,0)
 .S DATA=$$GETRAD(DFN,$$DT^XLFDT)
"RTN","ORATR2",278,0)
 I '$D(ORD) S ORD=$$GETORD(DFN)
"RTN","ORATR2",279,0)
 D GETRECIP(DFN,TYPE)
"RTN","ORATR2",280,0)
 I $D(RECIP)'>1 D
"RTN","ORATR2",281,0)
 .S ORX=$NA(^VA(200,"AK.ORATRC"))
"RTN","ORATR2",282,0)
 .F  S ORX=$Q(@ORX) Q:$QS(ORX,2)'="AK.ORATRC"  D
"RTN","ORATR2",283,0)
 ..S RECIP($QS(ORX,4))=""
"RTN","ORATR2",284,0)
 I $G(ORD)="" S DATE=$$GETDATE(DFN,PXRM)
"RTN","ORATR2",285,0)
 D SEND(DFN,.RECIP,TYPE,$G(DATA))
"RTN","ORATR2",286,0)
 Q
"RTN","ORATR2",287,0)
 ;
"RTN","ORATR2",288,0)
 ;=====================================================================
"RTN","ORATR2",289,0)
 ;                R E C I P I E N T   U T I L I T I E S
"RTN","ORATR2",290,0)
 ;=====================================================================
"RTN","ORATR2",291,0)
A ; Attending Physician
"RTN","ORATR2",292,0)
 N ORX,VAIN,VADM
"RTN","ORATR2",293,0)
 D OERR^VADPT
"RTN","ORATR2",294,0)
 S ORX=+$P(VAIN(11),U) I ORX S RECIP(ORX)=""
"RTN","ORATR2",295,0)
 Q
"RTN","ORATR2",296,0)
 ;
"RTN","ORATR2",297,0)
E ; Encounter Provider
"RTN","ORATR2",298,0)
 N DEFARR,FIEVAL,ORX,PROV,VHF
"RTN","ORATR2",299,0)
 D DEF^PXRMLDR(PXRM,.DEFARR)
"RTN","ORATR2",300,0)
 D EVAL^PXRM(DFN,.DEFARR,0,1,.FIEVAL)
"RTN","ORATR2",301,0)
 S ORX=0 F  S ORX=$O(FIEVAL(ORX)) Q:'ORX  D
"RTN","ORATR2",302,0)
 .Q:'$G(FIEVAL(ORX))!($G(FIEVAL(ORX,"FILE NUMBER"))'=9000010.23)
"RTN","ORATR2",303,0)
 .S VHF=$G(FIEVAL(ORX,"DAS")) Q:'VHF
"RTN","ORATR2",304,0)
 .S PROV=$$GET1^DIQ(9000010.23,VHF,1204,"I") S:PROV RECIP(PROV)=""
"RTN","ORATR2",305,0)
 Q
"RTN","ORATR2",306,0)
 ;
"RTN","ORATR2",307,0)
M ; PCMM Team
"RTN","ORATR2",308,0)
 N ORPCMM,ORX,ORLST,ORERR,ORTM K ^TMP("ORPCMM",$J)
"RTN","ORATR2",309,0)
 S ORPCMM=$$PRPT^SCAPMC(DFN,,,,,,"^TMP(""ORPCMM"",$J)",)  ;DBIA #1916
"RTN","ORATR2",310,0)
 S ORX=0 F  S ORX=$O(^TMP("ORPCMM",$J,"SCPR",ORX)) Q:'ORX  D
"RTN","ORATR2",311,0)
 .S RECIP(ORX)=""
"RTN","ORATR2",312,0)
 K ^TMP("ORPCMM",$J)
"RTN","ORATR2",313,0)
 ;
"RTN","ORATR2",314,0)
 S ORPCMM=$$TMPT^SCAPMC(DFN,,,"ORLST","ORERR")
"RTN","ORATR2",315,0)
 S ORTM=0 F  S ORTM=$O(ORLST(ORTM)) Q:'ORTM  D
"RTN","ORATR2",316,0)
 .N ORPROV S ORPROV=$$PRTM^SCAPMC(+ORLST(ORTM),,,,"ORPROV","ORERR")
"RTN","ORATR2",317,0)
 .S ORX=0 F  S ORX=$O(ORPROV("SCPR",ORX)) Q:'ORX  D
"RTN","ORATR2",318,0)
 ..S RECIP(ORX)=""
"RTN","ORATR2",319,0)
 Q
"RTN","ORATR2",320,0)
 ;
"RTN","ORATR2",321,0)
P ; Primary Provider
"RTN","ORATR2",322,0)
 N ORX,VAIN,VADM
"RTN","ORATR2",323,0)
 D OERR^VADPT
"RTN","ORATR2",324,0)
 S ORX=+$P(VAIN(2),U) I ORX S RECIP(ORX)=""
"RTN","ORATR2",325,0)
 Q
"RTN","ORATR2",326,0)
 ;
"RTN","ORATR2",327,0)
R ; PCMM Primary Care Practitioner
"RTN","ORATR2",328,0)
 N ORX
"RTN","ORATR2",329,0)
 S ORX=+$$OUTPTPR^SDUTL3(DFN,$$NOW^XLFDT,1)
"RTN","ORATR2",330,0)
 I ORX S RECIP(ORX)=""
"RTN","ORATR2",331,0)
 Q
"RTN","ORATR2",332,0)
 ;
"RTN","ORATR2",333,0)
S ; PCMM Associate Provider
"RTN","ORATR2",334,0)
 N ORX
"RTN","ORATR2",335,0)
 S ORX=+$$OUTPTAP^SDUTL3(DFN,$$NOW^XLFDT)
"RTN","ORATR2",336,0)
 I ORX S RECIP(ORX)=""
"RTN","ORATR2",337,0)
 Q
"RTN","ORATR2",338,0)
 ;
"RTN","ORATR2",339,0)
T ; Patient Care Team
"RTN","ORATR2",340,0)
 N ORLST,ORX
"RTN","ORATR2",341,0)
 D TMSPT^ORQPTQ1(.ORLST,DFN)
"RTN","ORATR2",342,0)
 S ORX=0 F  S ORX=$O(ORLST(ORX)) Q:'ORX  D
"RTN","ORATR2",343,0)
 .N ORTM,ORLST2 S ORTM=+ORLST(ORX) Q:'ORTM
"RTN","ORATR2",344,0)
 .D TEAMPROV^ORQPTQ1(.ORLST2,ORTM)
"RTN","ORATR2",345,0)
 .S ORY=0 F  S ORY=$O(ORLST2(ORY)) Q:'ORY  D
"RTN","ORATR2",346,0)
 ..I +ORLST2(ORY) S RECIP(+ORLST2(ORY))=""
"RTN","ORATR2",347,0)
 Q
"RTN","ORATR2",348,0)
 ;
"RTN","ORATR2",349,0)
TEST ;
"RTN","ORATR2",350,0)
 N OR S OR=0 F  S OR=$O(^VFD(21695.5,"AB",OR)) Q:'OR  D
"RTN","ORATR2",351,0)
 .N NA,ORIEN S NA=$NA(^XTV(8992.1,"PKGID","OR,"_OR)) Q:'$D(@NA)
"RTN","ORATR2",352,0)
 .S ORIEN=0 F  S ORIEN=$O(@NA@(ORIEN)) Q:'ORIEN  D
"RTN","ORATR2",353,0)
 ..Q:$$COMPLETE(ORIEN)  D TRANSFER^ORATR(ORIEN)
"RTN","ORATR2",354,0)
 Q
"RTN","ORATR2",355,0)
 ;
"RTN","ORATR2",356,0)
COMPLETE(ORIEN) ;
"RTN","ORATR2",357,0)
 N DATA,ORERR,FLAG,ORX S FLAG=0
"RTN","ORATR2",358,0)
 D GETS^DIQ(8992.1,ORIEN_",","20*",,"DATA","ORERR")
"RTN","ORATR2",359,0)
 S ORX="" F  S ORX=$O(DATA(8992.11,ORX)) Q:ORX=""  D
"RTN","ORATR2",360,0)
 .I $G(DATA(8992.11,ORX,.04))'="" S FLAG=1
"RTN","ORATR2",361,0)
 Q FLAG
"RTN","ORATR2",362,0)
 ;
"RTN","ORATRCH")
0^12^B3783118
"RTN","ORATRCH",1,0)
ORATRCH ;DSS/ASF CRITICAL CH LABS
"RTN","ORATRCH",2,0)
 ;;1.01;VENDOR - DSS,INC OPEN SOURCE;;Aug 14, 2012;Build 27
"RTN","ORATRCH",3,0)
 ;Copyright 1995-2012, Document Storage Systems, Inc., All Rights Reserved
"RTN","ORATRCH",4,0)
 ;
"RTN","ORATRCH",5,0)
 Q
"RTN","ORATRCH",6,0)
CLABS(DFN,SDATE,EDATE) ;critical ch labs by patient by date
"RTN","ORATRCH",7,0)
 N IDT,ILST,REF,SUB,DATE,FLAG
"RTN","ORATRCH",8,0)
 IF DFN'?1N.N Q  ;--> out
"RTN","ORATRCH",9,0)
 IF SDATE="" D NOW^%DTC S SDATE=%
"RTN","ORATRCH",10,0)
 IF EDATE="" S X="T-199" D ^%DT S EDATE=Y ;CHANGE THIS
"RTN","ORATRCH",11,0)
 K ^TMP("LRRR",$J),^TMP($J,"ORATR","CLABS")
"RTN","ORATRCH",12,0)
 S CLABS="^TMP($J,""ORATR"",""CLABS"")"
"RTN","ORATRCH",13,0)
 D RR^LR7OR1(DFN,"",SDATE,EDATE,"","","","","","") ;Get LAB results for patient
"RTN","ORATRCH",14,0)
 ;Output is set in ^TMP("LRRR",$J,dfn,subscript,inverse d/t,seq)=
"RTN","ORATRCH",15,0)
 ; testID^result^flag^units^refrange^resultstatus(F or P)^^^natlCode^natlName^system^Verifyby^^Theraputicflag(T or "")^PrintName^Accession^Order#^Specimen
"RTN","ORATRCH",16,0)
 S @CLABS@(1,0)="Critical Lab Results from "_$$FMTE^XLFDT(SDATE)_" TO "_$$FMTE^XLFDT(EDATE)
"RTN","ORATRCH",17,0)
 S @CLABS@(2,0)="Test      Result            Date                   Ref Range"
"RTN","ORATRCH",18,0)
 S @CLABS@(3,0)="No criticals found.",ILST=2
"RTN","ORATRCH",19,0)
 S SUB="" F  S SUB=$O(^TMP("LRRR",$J,DFN,SUB)) Q:SUB=""  D
"RTN","ORATRCH",20,0)
 . S IDT=0 F  S IDT=$O(^TMP("LRRR",$J,DFN,SUB,IDT)) Q:'IDT  D
"RTN","ORATRCH",21,0)
 . . S I=0 F  S I=$O(^TMP("LRRR",$J,DFN,SUB,IDT,I)) Q:'I  S X=^(I) D
"RTN","ORATRCH",22,0)
 . . . S DATE=$$FMTE^XLFDT(9999999-IDT),FLAG=$P(X,U,3)
"RTN","ORATRCH",23,0)
 . . . S REF=$P(X,U,5)
"RTN","ORATRCH",24,0)
 . . . S:$L(REF) REF="("_$P(X,U,5)_")"
"RTN","ORATRCH",25,0)
 . . . S X=$P(X,U,15)_U_$P(X,U,2)_U_$P(X,U,4)_U_FLAG_U_DATE_U_REF
"RTN","ORATRCH",26,0)
 . . . S X=$$TABPIECE(X,"1,2,3,4,5,6","9,18,24,27,50")
"RTN","ORATRCH",27,0)
 . . .  I FLAG?.E1"*".E S ILST=ILST+1,@CLABS@(ILST,0)=X ;list only criticals
"RTN","ORATRCH",28,0)
 K ^TMP("LRRR",$J)
"RTN","ORATRCH",29,0)
 Q "~@"_$NA(@CLABS) ;-->out
"RTN","ORATRCH",30,0)
TABPIECE(X,PIECES,TABS) ; return pieces with withspace between them
"RTN","ORATRCH",31,0)
 N I,J,Y,APIECE S Y=""
"RTN","ORATRCH",32,0)
 F I=1:1:$L(PIECES,",") S APIECE=+$P(PIECES,",",I) D
"RTN","ORATRCH",33,0)
 . S Y=Y_$P(X,U,APIECE)
"RTN","ORATRCH",34,0)
 . F J=$L(Y):1:+$P(TABS,",",I) S Y=Y_" "
"RTN","ORATRCH",35,0)
 Q Y
"RTN","ORATRCOM")
0^13^B880378
"RTN","ORATRCOM",1,0)
ORATRCOM ;DSS/ASF/SMP- TIU TO COMPLETE TAR
"RTN","ORATRCOM",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATRCOM",3,0)
 ;;;
"RTN","ORATRCOM",4,0)
 Q
"RTN","ORATRCOM",5,0)
COMPLETE(DFN) ; set processed as complete
"RTN","ORATRCOM",6,0)
 S ORATRT="Error, not completed"
"RTN","ORATRCOM",7,0)
 S TARIEN=9999999,TARIEN=$O(^VFD(21695.2,"C",DFN,TARIEN),-1)
"RTN","ORATRCOM",8,0)
 Q:'$D(^VFD(21695.2,TARIEN,0)) ORATRT ;-->out
"RTN","ORATRCOM",9,0)
 S G=^VFD(21695.2,TARIEN,0),G1=$G(^VFD(21695.2,TARIEN,1))
"RTN","ORATRCOM",10,0)
 S ORATRP=$P(G1,U,5)
"RTN","ORATRCOM",11,0)
 I ORATRP>1 S ORATRT="Previously Completed" Q ORATRT ;-->out
"RTN","ORATRCOM",12,0)
 S DIE="^VFD(21695.2,",DA=TARIEN,DR="1.05///2" D ^DIE
"RTN","ORATRCOM",13,0)
 S ORATRT="Successfuly completed"
"RTN","ORATRCOM",14,0)
 Q ORATRT
"RTN","ORATRDO")
0^9^B2982515
"RTN","ORATRDO",1,0)
ORATRDO ; DSS/SMP/ASF - Abnormal Alert Utilities ; AUG 22, 2012
"RTN","ORATRDO",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATRDO",3,0)
 ;
"RTN","ORATRDO",4,0)
 ; Documented API and ICRs
"RTN","ORATRDO",5,0)
 ; -----------------------
"RTN","ORATRDO",6,0)
 ; 2056      $$GET1^DIQ
"RTN","ORATRDO",7,0)
 ;
"RTN","ORATRDO",8,0)
 Q
"RTN","ORATRDO",9,0)
RADLAB(ORIEN,DFN) ;SELECT RADIOLOGY VS CHEM
"RTN","ORATRDO",10,0)
 N XQADATA
"RTN","ORATRDO",11,0)
 S XQADATA=$$GET1^DIQ(21695.2,ORIEN_",",2)
"RTN","ORATRDO",12,0)
 I '$G(DFN) S DFN=$$GET1^DIQ(21695.2,ORIEN_",",.04,"I")
"RTN","ORATRDO",13,0)
 I XQADATA?.E1"@".E D LABATR Q  ;-->out
"RTN","ORATRDO",14,0)
 I XQADATA?.E1"~".E D ATROBJ Q  ;-->out
"RTN","ORATRDO",15,0)
 S ORBY(1)="No test results"
"RTN","ORATRDO",16,0)
 Q
"RTN","ORATRDO",17,0)
ATROBJ ;
"RTN","ORATRDO",18,0)
 N X,INVDT,CASE
"RTN","ORATRDO",19,0)
 S INVDT=$P(XQADATA,"~",1),CASE=$P(XQADATA,"~",2)
"RTN","ORATRDO",20,0)
 D DETAIL^ORQQRA(.ORBY,DFN,INVDT,CASE)
"RTN","ORATRDO",21,0)
 Q
"RTN","ORATRDO",22,0)
LABATR ;
"RTN","ORATRDO",23,0)
 N X,ORDER
"RTN","ORATRDO",24,0)
 S ORDER=$P(XQADATA,"@")
"RTN","ORATRDO",25,0)
 D DETAIL^ORQQLR(.ORBY,DFN,ORDER)
"RTN","ORATRDO",26,0)
 Q
"RTN","ORATRDO",27,0)
 ;
"RTN","ORATRDO",28,0)
RESULTS ; RPC - ORATR GET TEST RESULTS
"RTN","ORATRDO",29,0)
 N ORX,ORATR,ORPAT,ORY
"RTN","ORATRDO",30,0)
 S ORX="" F  S ORX=$O(ORDATA(ORX)) Q:ORX=""  D
"RTN","ORATRDO",31,0)
 .I $P(ORDATA(ORX),U)="PAT" S ORPAT($P(ORDATA(ORX),U,2))=""
"RTN","ORATRDO",32,0)
 .I $P(ORDATA(ORX),U)="ATR" S ORATR($P(ORDATA(ORX),U,2))=""
"RTN","ORATRDO",33,0)
 I $D(ORATR) D  Q
"RTN","ORATRDO",34,0)
 .S ORX=0 F  S ORX=$O(ORATR(ORX)) Q:'ORX  D
"RTN","ORATRDO",35,0)
 ..N ORBY D RADLAB(ORX),ADD(.ORRET,.ORBY)
"RTN","ORATRDO",36,0)
 I $D(ORPAT) D  Q
"RTN","ORATRDO",37,0)
 .S ORX=0 F  S ORX=$O(ORPAT(ORX)) Q:'ORX  D
"RTN","ORATRDO",38,0)
 ..S ORY="" F  S ORY=$O(^VFD(21695.2,"C",ORX,ORY)) Q:'ORY  D
"RTN","ORATRDO",39,0)
 ...N ORBY D RADLAB(ORY,ORX),ADD(.ORRET,.ORBY)
"RTN","ORATRDO",40,0)
 Q
"RTN","ORATRDO",41,0)
 ;
"RTN","ORATRDO",42,0)
ADD(RET,IN) ;
"RTN","ORATRDO",43,0)
 N ORX,ORY S ORX=$O(RET(""),-1)+1
"RTN","ORATRDO",44,0)
 F ORY=1:1 Q:'$D(IN(ORY))  S RET(ORX)=IN(ORY),ORX=ORX+1
"RTN","ORATRDO",45,0)
 Q
"RTN","ORATRMM")
0^14^B28891943
"RTN","ORATRMM",1,0)
ORATRMM ; DSS/ASF - Abnormal Alert Utilities ;SEPT 14, 2012
"RTN","ORATRMM",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATRMM",3,0)
 ;
"RTN","ORATRMM",4,0)
 ; Documented API and ICRs
"RTN","ORATRMM",5,0)
 ; -----------------------
"RTN","ORATRMM",6,0)
 ; 2056      $$GET1^DIQ
"RTN","ORATRMM",7,0)
 ;           $$GET1^DID          
"RTN","ORATRMM",8,0)
 ;           $$EXTERNAL^DILFD    
"RTN","ORATRMM",9,0)
 ;----------------------------------------------------------
"RTN","ORATRMM",10,0)
 ;  M A M M O G R A P H Y
"RTN","ORATRMM",11,0)
 ;----------------------------------------------------------
"RTN","ORATRMM",12,0)
 ;
"RTN","ORATRMM",13,0)
MMLAST(DFN) ;entry to show last MM study
"RTN","ORATRMM",14,0)
 N FLD,G,ORATRC,ORATRDT,ORATRP,ORATRPE,ORATRNO,G,V,X1,X,ORATRIM,L,N,ORATRCNT,ORATRTOP
"RTN","ORATRMM",15,0)
 S ORATRCNT=0,ORATRTOP="Last Breast Imaging"
"RTN","ORATRMM",16,0)
 D MM
"RTN","ORATRMM",17,0)
 I ORATRCNT=2 D SET("one other study found")
"RTN","ORATRMM",18,0)
 I ORATRCNT>2 D SET(ORATRCNT-1_" other studies found")
"RTN","ORATRMM",19,0)
 Q "~@"_$NA(@MMRAD) ;-->out
"RTN","ORATRMM",20,0)
MMALL(DFN) ;entry to show all mm studies
"RTN","ORATRMM",21,0)
 N FLD,G,ORATRC,ORATRDT,ORATRP,ORATRPE,ORATRNO,G,V,X1,X,ORATRIM,L,N,ORATRCNT,ORATRTOP
"RTN","ORATRMM",22,0)
 S ORATRCNT=-999,ORATRTOP="Breast Imaging"
"RTN","ORATRMM",23,0)
 D MM
"RTN","ORATRMM",24,0)
 Q "~@"_$NA(@MMRAD) ;-->out
"RTN","ORATRMM",25,0)
MM ;entry point for DO
"RTN","ORATRMM",26,0)
 K ^TMP($J,"ORATR","MMRAD")
"RTN","ORATRMM",27,0)
 S MMRAD="^TMP($J,""ORATR"",""MMRAD"")"
"RTN","ORATRMM",28,0)
 S @MMRAD@(1,0)=ORATRTOP ;"Mammography and Breast Imaging"
"RTN","ORATRMM",29,0)
 S @MMRAD@(2,0)=""
"RTN","ORATRMM",30,0)
 S ORATRNO=1 ;indicates no mam found
"RTN","ORATRMM",31,0)
 S L=2 ; line #
"RTN","ORATRMM",32,0)
 S ORATRDT=0 F  S ORATRDT=$O(^RADPT(DFN,"DT",ORATRDT)) Q:ORATRDT'>0  S ORATRC=0 F  S ORATRC=$O(^RADPT(DFN,"DT",ORATRDT,"P",ORATRC)) Q:ORATRC'>0  D DETAIL
"RTN","ORATRMM",33,0)
 I ORATRNO D SET(""),SET("No studies found")
"RTN","ORATRMM",34,0)
 Q
"RTN","ORATRMM",35,0)
DETAIL ;show IT
"RTN","ORATRMM",36,0)
 S ORATRP=$P($G(^RADPT(DFN,"DT",ORATRDT,"P",ORATRC,0)),U,2)
"RTN","ORATRMM",37,0)
 S ORATRPE=$$EXTERNAL^DILFD(70.03,2,"",ORATRP)
"RTN","ORATRMM",38,0)
 Q:(ORATRPE'?.E1"BREAST".E)&(ORATRPE'?.E1"MAMMOGRAM".E)  ;--> show only these!
"RTN","ORATRMM",39,0)
 S ORATRNO=0
"RTN","ORATRMM",40,0)
 S ORATRCNT=ORATRCNT+1 Q:ORATRCNT>1
"RTN","ORATRMM",41,0)
 D SET("")
"RTN","ORATRMM",42,0)
 D SET("Date: "_$$FMTE^XLFDT(9999999-ORATRDT))
"RTN","ORATRMM",43,0)
 F FLD=.01,2,4,13 D
"RTN","ORATRMM",44,0)
 . S X=$$GET1^DID(70.03,FLD,"","LABEL")_": "
"RTN","ORATRMM",45,0)
 . S G=$$GET1^DID(70.03,FLD,"","GLOBAL SUBSCRIPT LOCATION")
"RTN","ORATRMM",46,0)
 . S G=$P(G,";",2)
"RTN","ORATRMM",47,0)
 . S V=^RADPT(DFN,"DT",ORATRDT,"P",ORATRC,0)
"RTN","ORATRMM",48,0)
 . S X1=$$EXTERNAL^DILFD(70.03,FLD,"",$P(V,U,G))
"RTN","ORATRMM",49,0)
 . D SET(X_X1)
"RTN","ORATRMM",50,0)
 S X="Impression Text:" D SET(X)
"RTN","ORATRMM",51,0)
 S ORATRIM=$P(^RADPT(DFN,"DT",ORATRDT,"P",ORATRC,0),U,17)
"RTN","ORATRMM",52,0)
 Q:ORATRIM=""  ;-->out
"RTN","ORATRMM",53,0)
 S N=0 F  S N=$O(^RARPT(ORATRIM,"I",N)) Q:N'>0  S X=$G(^RARPT(ORATRIM,"I",N,0)) D SET(X)
"RTN","ORATRMM",54,0)
 Q
"RTN","ORATRMM",55,0)
SET(X) ;
"RTN","ORATRMM",56,0)
 S L=L+1
"RTN","ORATRMM",57,0)
 S @MMRAD@(L,0)=X
"RTN","ORATRMM",58,0)
 Q
"RTN","ORATRMM",59,0)
 ;---------------------------------------------------------------------------------
"RTN","ORATRMM",60,0)
 ; C O M P U T E D   F I N D I N G
"RTN","ORATRMM",61,0)
 ;---------------------------------------------------------------------------------
"RTN","ORATRMM",62,0)
MAMA(DFN,NGET,BDT,EDT,NFOUND,TEST,DATE,DATA,TEXT) ;Computed finding for mammogram
"RTN","ORATRMM",63,0)
 N CNT,ORATRDT,ORATRC,ORATRP,ORATRPE,ORATRDX,ORATRDXE
"RTN","ORATRMM",64,0)
 S CNT=0,NFOUND=0
"RTN","ORATRMM",65,0)
 S NGET=$S(NGET<0:-NGET,1:NGET)
"RTN","ORATRMM",66,0)
 S ORATRDT=(9999999-EDT)-.000001
"RTN","ORATRMM",67,0)
 F  S ORATRDT=$O(^RADPT(DFN,"DT",ORATRDT)) Q:ORATRDT'>0  Q:CNT>NGET  Q:(9999999-ORATRDT)<BDT  D
"RTN","ORATRMM",68,0)
 . S ORATRC=0 F  S ORATRC=$O(^RADPT(DFN,"DT",ORATRDT,"P",ORATRC)) Q:ORATRC'>0  D TSTFIND
"RTN","ORATRMM",69,0)
 Q
"RTN","ORATRMM",70,0)
TSTFIND ;test finding
"RTN","ORATRMM",71,0)
 S ORATRP=$P($G(^RADPT(DFN,"DT",ORATRDT,"P",ORATRC,0)),U,2)
"RTN","ORATRMM",72,0)
 S ORATRPE=$$EXTERNAL^DILFD(70.03,2,"",ORATRP)
"RTN","ORATRMM",73,0)
 Q:(ORATRPE'?.E1"BREAST".E)&(ORATRPE'?.E1"MAMMOGRAM".E)  ;--> show only these!
"RTN","ORATRMM",74,0)
 S ORATRDX=$P($G(^RADPT(DFN,"DT",ORATRDT,"P",ORATRC,0)),U,13)
"RTN","ORATRMM",75,0)
 S ORATRDXE=$$EXTERNAL^DILFD(70.03,13,"",ORATRDX)
"RTN","ORATRMM",76,0)
 S CNT=CNT+1
"RTN","ORATRMM",77,0)
 S TEST(CNT)=1
"RTN","ORATRMM",78,0)
 S DATE(CNT)=9999999-ORATRDT
"RTN","ORATRMM",79,0)
 S DATA(CNT,"VALUE")=ORATRDXE
"RTN","ORATRMM",80,0)
 S DATA(CNT,"PROCEEDURE")=ORATRPE
"RTN","ORATRMM",81,0)
 S NFOUND=CNT
"RTN","ORATRMM",82,0)
 Q
"RTN","ORATRMM",83,0)
 ;-------------------------------------------------------------------------------------
"RTN","ORATRMM",84,0)
SETIEN(ORRET,ORATRIEN) ;set current VFD ALERT TRACKING (^VFD(21695.2,) IEN
"RTN","ORATRMM",85,0)
 K ^TMP($J,"ORATRIEN")
"RTN","ORATRMM",86,0)
 S ORRET="-1^Bad IEN"
"RTN","ORATRMM",87,0)
 ;Q:ORATRIEN'?1N.N
"RTN","ORATRMM",88,0)
 Q:'$D(^VFD(21695.2,ORATRIEN))
"RTN","ORATRMM",89,0)
 S ^TMP($J,"ORATRIEN")=ORATRIEN
"RTN","ORATRMM",90,0)
 S ORRET=1
"RTN","ORATRMM",91,0)
 Q
"RTN","ORATRMM",92,0)
 ;--------------------------------------------------------------------------------------
"RTN","ORATRMM",93,0)
MMIEN(DFN) ;DO FOR SPECIFIED IEN
"RTN","ORATRMM",94,0)
 N FLD,G,ORATRC,ORATRDT,ORATRP,ORATRPE,ORATRNO,G,V,X1,X,ORATRIM,L,N,ORATRCNT,ORATRTOP,ORATRG
"RTN","ORATRMM",95,0)
 I '$D(^TMP($J,"ORATRIEN")) D MMLAST(DFN) Q "~@"_$NA(@MMRAD)  ;-->out if no VDF set present last image
"RTN","ORATRMM",96,0)
 S ORATRIEN=^TMP($J,"ORATRIEN")
"RTN","ORATRMM",97,0)
 S ORATRG=$G(^VFD(21695.2,ORATRIEN,2))
"RTN","ORATRMM",98,0)
 I ORATRG=""!(ORATRG["@OR") D MMLAST(DFN) Q "~@"_$NA(@MMRAD)  ;-->out if no VDF DATA set present last image
"RTN","ORATRMM",99,0)
 ;
"RTN","ORATRMM",100,0)
 S ORATRCNT=0,ORATRTOP="Associated Breast Imaging"
"RTN","ORATRMM",101,0)
 K ^TMP($J,"ORATR","MMRAD")
"RTN","ORATRMM",102,0)
 S MMRAD="^TMP($J,""ORATR"",""MMRAD"")"
"RTN","ORATRMM",103,0)
 S @MMRAD@(1,0)="Associated Mammography and Breast Imaging"
"RTN","ORATRMM",104,0)
 S @MMRAD@(2,0)=""
"RTN","ORATRMM",105,0)
 S ORATRDT=$P(ORATRG,"~",1),ORATRC=$P(ORATRG,"~",2)
"RTN","ORATRMM",106,0)
 S L=2
"RTN","ORATRMM",107,0)
 D DETAIL
"RTN","ORATRMM",108,0)
 Q "~@"_$NA(@MMRAD) ;-->out
"RTN","ORATRMM",109,0)
 ;-------------------------------------------------------------------------------------------
"RTN","ORATRMM",110,0)
OUTSIDE(DFN) ;OUTSIDE RESULTS
"RTN","ORATRMM",111,0)
 N X,DIC,Y,N,L,ORATRN,ORATRV
"RTN","ORATRMM",112,0)
 K ^TMP($J)
"RTN","ORATRMM",113,0)
 K ^TMP($J,"ORATR","MMRAD")
"RTN","ORATRMM",114,0)
 S MMRAD="^TMP($J,""ORATR"",""MMRAD"")"
"RTN","ORATRMM",115,0)
 S @MMRAD@(1,0)="Outside Mammography and Breast Imaging"
"RTN","ORATRMM",116,0)
 S @MMRAD@(2,0)=""
"RTN","ORATRMM",117,0)
 S @MMRAD@(3,0)="No outside abnormal/incomplete studies found"
"RTN","ORATRMM",118,0)
 S L=2
"RTN","ORATRMM",119,0)
 ;list of health factors to find
"RTN","ORATRMM",120,0)
 S DIC=9999999.64,DIC(0)="X"
"RTN","ORATRMM",121,0)
 S X="SMART OUTSIDE ABNL BR MRI" D ^DIC S:Y>0 ^TMP($J,+Y)=""
"RTN","ORATRMM",122,0)
 S X="SMART OUTSIDE ABNL BR ULTRASOUND" D ^DIC S:Y>0 ^TMP($J,+Y)=""
"RTN","ORATRMM",123,0)
 S X="SMART OUTSIDE INCOMPLETE BR MRI"  D ^DIC S:Y>0 ^TMP($J,+Y)=""
"RTN","ORATRMM",124,0)
 S X="SMART OUTSIDE INCOMPLETE BR ULTRASOUND" D ^DIC S:Y>0 ^TMP($J,+Y)=""
"RTN","ORATRMM",125,0)
 S X="WH OUTSIDE ABNL MAMMOGRAM" D ^DIC S:Y>0 ^TMP($J,+Y)=""
"RTN","ORATRMM",126,0)
 S X="WH OUTSIDE INCOMPLETE MAMMOGRAM" D ^DIC S:Y>0 ^TMP($J,+Y)=""
"RTN","ORATRMM",127,0)
 S N=0 F  S N=$O(^AUPNVHF("C",DFN,N)) Q:N'>0  D
"RTN","ORATRMM",128,0)
 . S G=+^AUPNVHF(N,0),Y=+$G(^AUPNVHF(N,12),0),ORATRN=$P(^AUTTHF(G,0),U,1)
"RTN","ORATRMM",129,0)
 . I Y=0 S ORATRV=$P(^AUPNVHF(N,0),U,3),Y=+$G(^AUPNVSIT(ORATRV,0),0)
"RTN","ORATRMM",130,0)
 . S X=$E(ORATRN_"                          ",1,45)
"RTN","ORATRMM",131,0)
 . I Y X ^DD("DD") S X=X_Y
"RTN","ORATRMM",132,0)
 . I $D(^TMP($J,G)) D SET(X)
"RTN","ORATRMM",133,0)
 Q "~@"_$NA(@MMRAD) ;-->out
"RTN","ORATRORG")
0^16^B70627558
"RTN","ORATRORG",1,0)
ORATRORG ; DSS/SMP - ORDER GROUPER UTILITIES ; SEP 17, 2012
"RTN","ORATRORG",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;;Build 27
"RTN","ORATRORG",3,0)
 ;Copyright 1995-2012, Document Storage Systems, Inc., All Rights Reserved
"RTN","ORATRORG",4,0)
 ;
"RTN","ORATRORG",5,0)
 Q
"RTN","ORATRORG",6,0)
 ;
"RTN","ORATRORG",7,0)
 ;=================
"RTN","ORATRORG",8,0)
 ;  ORDERID^VFDOR
"RTN","ORATRORG",9,0)
 ;=================
"RTN","ORATRORG",10,0)
ORDERID(VFDORLST,VFDEVNT) ;
"RTN","ORATRORG",11,0)
 ; Pass CPRS order number(s) array and get group order ID back
"RTN","ORATRORG",12,0)
 ; Called from RPC . . .
"RTN","ORATRORG",13,0)
 ; Inputs
"RTN","ORATRORG",14,0)
 ;  VFDORLST:<byref> Array of IDs for this group.
"RTN","ORATRORG",15,0)
 ;           VFDORLST(1)= ORIFN (CPRS order number)
"RTN","ORATRORG",16,0)
 ;           VFDORLST(2)= ORIFN . . .
"RTN","ORATRORG",17,0)
 ;  VFDEVNT: set of codes: 0=UNKNOWN, 1=ORDER, 2=REPRINT, 3=PRINT
"RTN","ORATRORG",18,0)
 ;
"RTN","ORATRORG",19,0)
 ; Outputs
"RTN","ORATRORG",20,0)
 ;  Returns the #21695 Order Groups Number (w checksum)
"RTN","ORATRORG",21,0)
 ;      eg  123455
"RTN","ORATRORG",22,0)
 ;  or  0^err #^err msg
"RTN","ORATRORG",23,0)
 ;
"RTN","ORATRORG",24,0)
 N X,OGN,VFDI,VFDOERR,VFDPKG,VFDLPREF,VFDPREF,VFDGLST
"RTN","ORATRORG",25,0)
 N R94,ISLAB,DIERR,VFDMSG,STATUS
"RTN","ORATRORG",26,0)
 ;K ^XTMP("VFDOR")
"RTN","ORATRORG",27,0)
 ;S VFDEVNT=$G(VFDEVNT) ;seeing if this is necessary 3/16/10
"RTN","ORATRORG",28,0)
 S VFDI=""
"RTN","ORATRORG",29,0)
 F  S VFDI=$O(VFDORLST(VFDI)) Q:'VFDI  D  ;
"RTN","ORATRORG",30,0)
 .;call from ORWDX passed format ORIFN;1^1^1^E
"RTN","ORATRORG",31,0)
 .S VFDOERR=+VFDORLST(VFDI) ;OERR #
"RTN","ORATRORG",32,0)
 .S R94=$$GET1^DIQ(100,VFDOERR,12,"I","","VFDMSG") ; #9.4 IEN
"RTN","ORATRORG",33,0)
 .S VFDPREF=$$GET1^DIQ(100,VFDOERR,33,"I","","VFDMSG") ; PKG REF
"RTN","ORATRORG",34,0)
 .;S ^XTMP("VFDOR","PKGREF",VFDOERR)=VFDPREF
"RTN","ORATRORG",35,0)
 .; When called from ORWDX, only lab orders appear to have been set
"RTN","ORATRORG",36,0)
 .;  and have a package reference entry
"RTN","ORATRORG",37,0)
 .;
"RTN","ORATRORG",38,0)
 .S VFDGLST(VFDOERR)=""
"RTN","ORATRORG",39,0)
 .S VFDGLST(VFDOERR,1)=VFDPREF
"RTN","ORATRORG",40,0)
 .S VFDGLST(VFDOERR,2)=R94
"RTN","ORATRORG",41,0)
 .;
"RTN","ORATRORG",42,0)
 .S ISLAB=(R94=$$GETPKG("LAB SERVICE"))
"RTN","ORATRORG",43,0)
 .I ISLAB D  ;
"RTN","ORATRORG",44,0)
 ..N VFDIENS,VFDCOL
"RTN","ORATRORG",45,0)
 ..N R69,R6901,R6903
"RTN","ORATRORG",46,0)
 ..; Determine and update Package Reference
"RTN","ORATRORG",47,0)
 ..S R69=$P(VFDPREF,";",2)
"RTN","ORATRORG",48,0)
 ..S R6901=$P(VFDPREF,";",3)
"RTN","ORATRORG",49,0)
 ..;S ^XTMP("VFDOR","LABPASS",VFDOERR,$H)=""
"RTN","ORATRORG",50,0)
 ..S R6903=$$OERR6903(R69,R6901,"",VFDOERR,)
"RTN","ORATRORG",51,0)
 ..I 'R6903 D  Q  ;
"RTN","ORATRORG",52,0)
 ...;S ^XTMP("VFDOR","OERR6903-ERR",VFDOERR,$H)=R6903
"RTN","ORATRORG",53,0)
 ..;
"RTN","ORATRORG",54,0)
 ..S VFDPREF=R69_";"_R6901_";"_R6903
"RTN","ORATRORG",55,0)
 ..S VFDGLST(VFDOERR,1)=VFDPREF
"RTN","ORATRORG",56,0)
 ..;S ^XTMP("VFDOR",VFDOERR,"LPREF")=VFDPREF
"RTN","ORATRORG",57,0)
 ..I "23"[VFDEVNT D  ;3=print, 2=reprint
"RTN","ORATRORG",58,0)
 ...; get collection type
"RTN","ORATRORG",59,0)
 ...S VFDIENS=R6901_","_R69_","
"RTN","ORATRORG",60,0)
 ...S VFDCOL=$$GET1^DIQ(69.01,VFDIENS,4,"I","","VFDMSG")
"RTN","ORATRORG",61,0)
 ...;screen out all but send patient (SP) orders
"RTN","ORATRORG",62,0)
 ...I VFDCOL'="SP" D  ;
"RTN","ORATRORG",63,0)
 ....S VFDGLST(VFDOERR,"WC")=1  ;K VFDGLST(VFDOERR)
"RTN","ORATRORG",64,0)
 ...; this flag is used to stop WC orders from being added to the ORM
"RTN","ORATRORG",65,0)
 ..;
"RTN","ORATRORG",66,0)
 .;
"RTN","ORATRORG",67,0)
 ;
"RTN","ORATRORG",68,0)
 S STATUS="0^1^No Group Assigned"
"RTN","ORATRORG",69,0)
 I $D(VFDGLST) D  ;
"RTN","ORATRORG",70,0)
 .S X=$$ADDGROUP(.VFDGLST,VFDEVNT)
"RTN","ORATRORG",71,0)
 .S OGN=$P(X,U,2)
"RTN","ORATRORG",72,0)
 .S STATUS=OGN
"RTN","ORATRORG",73,0)
 ;
"RTN","ORATRORG",74,0)
 ;====================================begin VXPRE/OS removal
"RTN","ORATRORG",75,0)
 ;====================================================end VXPRE/OS removal
"RTN","ORATRORG",76,0)
 Q STATUS
"RTN","ORATRORG",77,0)
 ;
"RTN","ORATRORG",78,0)
 ;==================
"RTN","ORATRORG",79,0)
 ;  GETPKG^VFDUOGF
"RTN","ORATRORG",80,0)
 ;==================
"RTN","ORATRORG",81,0)
GETPKG(IN) ;
"RTN","ORATRORG",82,0)
 ; Returns the PACKAGE (#9.4) IEN or name, dependant on
"RTN","ORATRORG",83,0)
 ; input type.
"RTN","ORATRORG",84,0)
 ; Inputs
"RTN","ORATRORG",85,0)
 ;   IN:<req>   Numeric (IEN) or non-numeric (package name)
"RTN","ORATRORG",86,0)
 ; Outputs
"RTN","ORATRORG",87,0)
 ;   If IN was numeric, will return the .01 field.
"RTN","ORATRORG",88,0)
 ;   If IN was non-numeric, will return IEN of #9.4 entry.
"RTN","ORATRORG",89,0)
 ;   If not found, returns zero.
"RTN","ORATRORG",90,0)
 N VFDMSG,DIERR
"RTN","ORATRORG",91,0)
 S IN=$G(IN)
"RTN","ORATRORG",92,0)
 I IN'=+IN Q +$$FIND1^DIC(9.4,"","CO",IN,"B","","VFDMSG")
"RTN","ORATRORG",93,0)
 Q $$GET1^DIQ(9.4,IN_",",.01,"I","","VFDMSG")
"RTN","ORATRORG",94,0)
 ;
"RTN","ORATRORG",95,0)
 ;======================
"RTN","ORATRORG",96,0)
 ;  ORERR6903^VFDLAOGF
"RTN","ORATRORG",97,0)
 ;======================
"RTN","ORATRORG",98,0)
OERR6903(R69,R6901,R6903,OERR,OUT) ;
"RTN","ORATRORG",99,0)
 ; Finds the OERR # for this record in file #69, or finds the
"RTN","ORATRORG",100,0)
 ; R6903+IEN for the R69+R6901+OERR supplied.
"RTN","ORATRORG",101,0)
 ;  If R6903 is null and OERR is supplied, will find the 69.03 IEN.
"RTN","ORATRORG",102,0)
 ;  If OERR is null and R6903 supplied, will return the OERR #.
"RTN","ORATRORG",103,0)
 ; Inputs
"RTN","ORATRORG",104,0)
 ;     R69: #69 IEN
"RTN","ORATRORG",105,0)
 ;   R6901: #69.01 IEN
"RTN","ORATRORG",106,0)
 ;   R6903:<opt> #69.03 IEN
"RTN","ORATRORG",107,0)
 ;    OERR:<opt> OERR #
"RTN","ORATRORG",108,0)
 ;     OUT:<byref> See Outputs
"RTN","ORATRORG",109,0)
 ; Outputs
"RTN","ORATRORG",110,0)
 ;   Dependant on which Inputs were specified, returns either
"RTN","ORATRORG",111,0)
 ;   the OERR # for this #69 record, or retuns the #69.03 IEN
"RTN","ORATRORG",112,0)
 ;   that has the OERR # specified.
"RTN","ORATRORG",113,0)
 ;   or returns 0^err num^err msg
"RTN","ORATRORG",114,0)
 ;     OUT(OERR #,R6903)=""
"RTN","ORATRORG",115,0)
 N DATA,STATUS,X
"RTN","ORATRORG",116,0)
 S R69=+$G(R69)
"RTN","ORATRORG",117,0)
 S R6901=+$G(R6901)
"RTN","ORATRORG",118,0)
 S R6903=+$G(R6903)
"RTN","ORATRORG",119,0)
 S OERR=$G(OERR)
"RTN","ORATRORG",120,0)
 K OUT
"RTN","ORATRORG",121,0)
 I 'R69 I 'R6901 Q "0^1^Insufficient data passed"
"RTN","ORATRORG",122,0)
 I 'R6903&(OERR="") Q "0^2^Insufficient data passed"
"RTN","ORATRORG",123,0)
 I R6903 I OERR'="" Q "0^3^Nothing to do"
"RTN","ORATRORG",124,0)
 S STATUS="0^4^Not found"
"RTN","ORATRORG",125,0)
 I R6903 D  ;
"RTN","ORATRORG",126,0)
 .S OERR=""
"RTN","ORATRORG",127,0)
 .S DATA=$G(^LRO(69,R69,1,R6901,2,R6903,0))
"RTN","ORATRORG",128,0)
 .S OERR=$P(DATA,U,7)
"RTN","ORATRORG",129,0)
 .I OERR="" Q
"RTN","ORATRORG",130,0)
 .S STATUS=OERR
"RTN","ORATRORG",131,0)
 ;
"RTN","ORATRORG",132,0)
 I 'R6903 I OERR'="" D  ;
"RTN","ORATRORG",133,0)
 .N STOP
"RTN","ORATRORG",134,0)
 .S STOP=0
"RTN","ORATRORG",135,0)
 .S R6903=0
"RTN","ORATRORG",136,0)
 .F  S R6903=$O(^LRO(69,R69,1,R6901,2,R6903)) Q:'R6903  D  Q:STOP  ;
"RTN","ORATRORG",137,0)
 ..S DATA=$G(^LRO(69,R69,1,R6901,2,R6903,0))
"RTN","ORATRORG",138,0)
 ..S X=$P(DATA,U,7)
"RTN","ORATRORG",139,0)
 ..S OUT(X,R6903)=""
"RTN","ORATRORG",140,0)
 ..I X=OERR S STOP=1 S STATUS=R6903 Q
"RTN","ORATRORG",141,0)
 .;
"RTN","ORATRORG",142,0)
 ;
"RTN","ORATRORG",143,0)
 Q STATUS
"RTN","ORATRORG",144,0)
 ;
"RTN","ORATRORG",145,0)
 ;===================
"RTN","ORATRORG",146,0)
 ;  ADGROUP^VFDUOGF
"RTN","ORATRORG",147,0)
 ;===================
"RTN","ORATRORG",148,0)
ADDGROUP(VFDIDS,EVENT) ;
"RTN","ORATRORG",149,0)
 ; Add new Order Groups (File #21695) entry
"RTN","ORATRORG",150,0)
 ; Inputs
"RTN","ORATRORG",151,0)
 ;   VFDIDS:<byref><opt> Array of IDs for this group.
"RTN","ORATRORG",152,0)
 ;      VFIDS(0,5,Related Group Number)=""  <opt>
"RTN","ORATRORG",153,0)
 ;      VFIDS(ID)=""
"RTN","ORATRORG",154,0)
 ;      VFIDS(ID,1)=Record Locator
"RTN","ORATRORG",155,0)
 ;      VFIDS(ID,2)=#9.4 IEN
"RTN","ORATRORG",156,0)
 ;      VFIDS(ID,2.4)=Created reason (defaults to 1)
"RTN","ORATRORG",157,0)
 ;    EVENT: Event code
"RTN","ORATRORG",158,0)
 ; Outputs
"RTN","ORATRORG",159,0)
 ;  Returns the #21695 IEN and Group Number (w checksum)
"RTN","ORATRORG",160,0)
 ;      eg  1^123455
"RTN","ORATRORG",161,0)
 N DATA,DIERR,VFDMSG,VFDFDA,NUM,OGN,VFDIEN,VFDRELATED,I,ID,IEN,X
"RTN","ORATRORG",162,0)
 S EVENT=+$G(EVENT)
"RTN","ORATRORG",163,0)
 I EVENT<0 S EVENT=0
"RTN","ORATRORG",164,0)
 F  L +^VFD(21695,0):10 Q:$T
"RTN","ORATRORG",165,0)
 S NUM=$$MAKENUM()
"RTN","ORATRORG",166,0)
 S NUM=NUM_$$VHCSUM(NUM)
"RTN","ORATRORG",167,0)
 S VFDFDA(1,21695,"?+1,",.01)=NUM
"RTN","ORATRORG",168,0)
 S VFDFDA(1,21695,"?+1,",.04)=EVENT
"RTN","ORATRORG",169,0)
 D UPDATE^DIE("","VFDFDA(1)","VFDIEN","VFDMSG")
"RTN","ORATRORG",170,0)
 S VFDIEN=+$G(VFDIEN(1))
"RTN","ORATRORG",171,0)
 L -^VFD(21695,0)
"RTN","ORATRORG",172,0)
 ; Adding ID info
"RTN","ORATRORG",173,0)
 I VFDIEN I $D(VFDIDS) D  ;
"RTN","ORATRORG",174,0)
 .F  L +^VFD(21695,VFDIEN):10 Q:$T
"RTN","ORATRORG",175,0)
 .S OGN=^VFD(21695,VFDIEN,0)
"RTN","ORATRORG",176,0)
 .S OGN=$P(OGN,"^",1)
"RTN","ORATRORG",177,0)
 .I $D(VFDIDS(0,5)) D  ;
"RTN","ORATRORG",178,0)
 ..; Add Related Group Numbers
"RTN","ORATRORG",179,0)
 ..S I=0
"RTN","ORATRORG",180,0)
 ..K DIERR,VFDFDA,VFDMSG
"RTN","ORATRORG",181,0)
 ..S X=""
"RTN","ORATRORG",182,0)
 ..F  S X=$O(VFDIDS(0,5,X)) Q:X=""  D  ;
"RTN","ORATRORG",183,0)
 ...I X=OGN Q
"RTN","ORATRORG",184,0)
 ...I '$O(^VFD(21695,"B",X,0)) Q
"RTN","ORATRORG",185,0)
 ...S I=I+1
"RTN","ORATRORG",186,0)
 ...S IEN="?+"_I_","_VFDIEN_","
"RTN","ORATRORG",187,0)
 ...S VFDFDA(1,21695.0002,IEN,.01)=X
"RTN","ORATRORG",188,0)
 ..;
"RTN","ORATRORG",189,0)
 ..I $D(VFDFDA) D  ;
"RTN","ORATRORG",190,0)
 ...D UPDATE^DIE("","VFDFDA(1)","","VFDMSG")
"RTN","ORATRORG",191,0)
 ..;
"RTN","ORATRORG",192,0)
 .;
"RTN","ORATRORG",193,0)
 .; Set IDs
"RTN","ORATRORG",194,0)
 .S ID=0
"RTN","ORATRORG",195,0)
 .K VFDRELATED
"RTN","ORATRORG",196,0)
 .F  S ID=$O(VFDIDS(ID)) Q:ID=""  D  ;
"RTN","ORATRORG",197,0)
 ..S X=$O(^VFD(21695,"AE",ID,0)) ; 1st group number
"RTN","ORATRORG",198,0)
 ..I X I X'=OGN S VFDRELATED(X)=""
"RTN","ORATRORG",199,0)
 ..K DIERR,VFDFDA,VFDMSG
"RTN","ORATRORG",200,0)
 ..S IEN="?+1,"_VFDIEN_","
"RTN","ORATRORG",201,0)
 ..S VFDFDA(1,21695.0001,IEN,.01)=ID
"RTN","ORATRORG",202,0)
 ..S X=$G(VFDIDS(ID,1))
"RTN","ORATRORG",203,0)
 ..I X'="" S VFDFDA(1,21695.0001,IEN,1)=X
"RTN","ORATRORG",204,0)
 ..S DATA=$G(VFDIDS(ID,2))
"RTN","ORATRORG",205,0)
 ..S X=$P(DATA,"^",1)
"RTN","ORATRORG",206,0)
 ..I X'="" S VFDFDA(1,21695.0001,IEN,2)=X
"RTN","ORATRORG",207,0)
 ..S X=$G(VFDIDS(ID,2.4),1)
"RTN","ORATRORG",208,0)
 ..S VFDFDA(1,21695.0001,IEN,2.4)=X
"RTN","ORATRORG",209,0)
 ..D  ;
"RTN","ORATRORG",210,0)
 ...N I
"RTN","ORATRORG",211,0)
 ...D UPDATE^DIE("","VFDFDA(1)","","VFDMSG")
"RTN","ORATRORG",212,0)
 ..;
"RTN","ORATRORG",213,0)
 .;
"RTN","ORATRORG",214,0)
 .; Add Related Groups for non-order events
"RTN","ORATRORG",215,0)
 .I '$D(VFDIDS(0,5)) I EVENT>1 D  ;
"RTN","ORATRORG",216,0)
 ..K VFDFDA
"RTN","ORATRORG",217,0)
 ..S I=0
"RTN","ORATRORG",218,0)
 ..S X=""
"RTN","ORATRORG",219,0)
 ..F  S X=$O(VFDRELATED(X)) Q:X=""  D  ;
"RTN","ORATRORG",220,0)
 ...I X=OGN Q
"RTN","ORATRORG",221,0)
 ...I '$O(^VFD(21695,"B",X,0)) Q
"RTN","ORATRORG",222,0)
 ...K DIERR,VFDFDA,VFDMSG
"RTN","ORATRORG",223,0)
 ...S I=I+1
"RTN","ORATRORG",224,0)
 ...S IEN="?+"_I_","_VFDIEN_","
"RTN","ORATRORG",225,0)
 ...S VFDFDA(1,21695.0002,IEN,.01)=X
"RTN","ORATRORG",226,0)
 ...;
"RTN","ORATRORG",227,0)
 ..I $D(VFDFDA) D  ;
"RTN","ORATRORG",228,0)
 ...D UPDATE^DIE("","VFDFDA(1)","","VFDMSG")
"RTN","ORATRORG",229,0)
 ..;
"RTN","ORATRORG",230,0)
 .;
"RTN","ORATRORG",231,0)
 .L -^VFD(21695,VFDIEN)
"RTN","ORATRORG",232,0)
 ;
"RTN","ORATRORG",233,0)
 I $Q Q +VFDIEN_"^"_NUM
"RTN","ORATRORG",234,0)
 Q
"RTN","ORATRORG",235,0)
 ;
"RTN","ORATRORG",236,0)
 ;===================
"RTN","ORATRORG",237,0)
 ;  MAKENUM^VFDUOGF
"RTN","ORATRORG",238,0)
 ;===================
"RTN","ORATRORG",239,0)
MAKENUM() ;
"RTN","ORATRORG",240,0)
 ; Creates the Order Group number for file #21695 field .01
"RTN","ORATRORG",241,0)
 ; Private method
"RTN","ORATRORG",242,0)
 ; Outputs
"RTN","ORATRORG",243,0)
 ;   Returns Order Group number (without check digit)
"RTN","ORATRORG",244,0)
 ;   Also updates the PARAMETER file entry.
"RTN","ORATRORG",245,0)
 N NUM,X,I
"RTN","ORATRORG",246,0)
 S NUM=0
"RTN","ORATRORG",247,0)
 F  L +^VFD(21695,0):10 Q:$T
"RTN","ORATRORG",248,0)
 F  L +^XTV(8989.51,"B","ORATR ORDER GROUP NUMBER"):10 Q:$T
"RTN","ORATRORG",249,0)
 ;
"RTN","ORATRORG",250,0)
 ; Check PARAMETER
"RTN","ORATRORG",251,0)
 S X=$$GETPARAM()
"RTN","ORATRORG",252,0)
 I X>0 D  ;
"RTN","ORATRORG",253,0)
 .S I=$O(^VFD(21695,"AC","A"),-1) ;last number
"RTN","ORATRORG",254,0)
 .I X<I S X=I
"RTN","ORATRORG",255,0)
 .F  S X=X+1  D  Q:NUM  ;
"RTN","ORATRORG",256,0)
 ..I '$D(^VFD(21695,"AC",X)) S NUM=X
"RTN","ORATRORG",257,0)
 .;
"RTN","ORATRORG",258,0)
 ;
"RTN","ORATRORG",259,0)
 ; If no PARAMETER entry, get last used # from file.
"RTN","ORATRORG",260,0)
 I 'NUM D  ;
"RTN","ORATRORG",261,0)
 .S X=$O(^VFD(21695,"AC","A"),-1)
"RTN","ORATRORG",262,0)
 .Q:'X
"RTN","ORATRORG",263,0)
 .S NUM=X+1
"RTN","ORATRORG",264,0)
 ;
"RTN","ORATRORG",265,0)
 ; If still no number, use starting point
"RTN","ORATRORG",266,0)
 I 'NUM D  ;
"RTN","ORATRORG",267,0)
 .S NUM=12543
"RTN","ORATRORG",268,0)
 ;
"RTN","ORATRORG",269,0)
 D SETPARAM(NUM)
"RTN","ORATRORG",270,0)
 L -^XTV(8989.51,"B","ORATR ORDER GROUP NUMBER")
"RTN","ORATRORG",271,0)
 L -^VFD(21695,0)
"RTN","ORATRORG",272,0)
 Q NUM
"RTN","ORATRORG",273,0)
 ;
"RTN","ORATRORG",274,0)
 ;====================
"RTN","ORATRORG",275,0)
 ;  GETPARAM^VFDUOGF
"RTN","ORATRORG",276,0)
 ;====================
"RTN","ORATRORG",277,0)
GETPARAM() ;
"RTN","ORATRORG",278,0)
 ; Check PARAM file for last group #
"RTN","ORATRORG",279,0)
 ; Private method
"RTN","ORATRORG",280,0)
 Q $$GET^XPAR("SYS","ORATR ORDER GROUP NUMBER",1,"Q")
"RTN","ORATRORG",281,0)
 ;
"RTN","ORATRORG",282,0)
 ;====================
"RTN","ORATRORG",283,0)
 ;  SETPARAM^VFDUOGF
"RTN","ORATRORG",284,0)
 ;====================
"RTN","ORATRORG",285,0)
SETPARAM(NUM) ;
"RTN","ORATRORG",286,0)
 ; Sets PARAM file to this group NUM
"RTN","ORATRORG",287,0)
 ; Private method
"RTN","ORATRORG",288,0)
 N ERR
"RTN","ORATRORG",289,0)
 D EN^XPAR("SYS","ORATR ORDER GROUP NUMBER",1,NUM,.ERR)
"RTN","ORATRORG",290,0)
 Q
"RTN","ORATRORG",291,0)
 ;
"RTN","ORATRORG",292,0)
 ;===================
"RTN","ORATRORG",293,0)
 ;  VHCSUM^VFDUCSUM
"RTN","ORATRORG",294,0)
 ;===================
"RTN","ORATRORG",295,0)
VHCSUM(NUM,VDT) ;
"RTN","ORATRORG",296,0)
 ; Calculate Verhoeffs checksum for number
"RTN","ORATRORG",297,0)
 ; Inputs
"RTN","ORATRORG",298,0)
 ;   NUM: Number to generate checksum for
"RTN","ORATRORG",299,0)
 ;   VDT:<byref><opt> The Viredohf tables (from VCARRAY above)
"RTN","ORATRORG",300,0)
 ; Outputs
"RTN","ORATRORG",301,0)
 ;  The single checksum digit for the number.
"RTN","ORATRORG",302,0)
 ;  VDT array will hold the tables (if VDT passed in).
"RTN","ORATRORG",303,0)
 N NUM2,CSUM,I,POS,T1,T2
"RTN","ORATRORG",304,0)
 S NUM=$G(NUM)
"RTN","ORATRORG",305,0)
 I NUM'=+NUM Q ""
"RTN","ORATRORG",306,0)
 I $D(VDT) I '$D(VDT(1))!'$D(VDT(2))!'$D(VDT(3)) D  ;
"RTN","ORATRORG",307,0)
 .K VDT
"RTN","ORATRORG",308,0)
 ;
"RTN","ORATRORG",309,0)
 I '$D(VDT) D  ;
"RTN","ORATRORG",310,0)
 .D VCARRAY(.VDT)
"RTN","ORATRORG",311,0)
 ;
"RTN","ORATRORG",312,0)
 S CSUM=0
"RTN","ORATRORG",313,0)
 S NUM2=$RE(NUM)
"RTN","ORATRORG",314,0)
 F POS=1:1:$L(NUM2) D  ;
"RTN","ORATRORG",315,0)
 .S I=$E(NUM2,POS,POS) ;current digit
"RTN","ORATRORG",316,0)
 .S T2=VDT(2,(POS)#8,I)
"RTN","ORATRORG",317,0)
 .S T1=VDT(1,CSUM,T2)
"RTN","ORATRORG",318,0)
 .S CSUM=T1
"RTN","ORATRORG",319,0)
 ;
"RTN","ORATRORG",320,0)
 Q VDT(3,CSUM)
"RTN","ORATRORG",321,0)
 ;
"RTN","ORATRORG",322,0)
 ;====================
"RTN","ORATRORG",323,0)
 ;  VCARRAY^VFDUCSUM
"RTN","ORATRORG",324,0)
 ;====================
"RTN","ORATRORG",325,0)
VCARRAY(LRVDT) ;
"RTN","ORATRORG",326,0)
 ; Build the three tables (arrays) for the Verhoeff check
"RTN","ORATRORG",327,0)
 ; Private methos
"RTN","ORATRORG",328,0)
 ; Inputs
"RTN","ORATRORG",329,0)
 ;   LRVDT: <byref> The array that will hold the Verhoeff data
"RTN","ORATRORG",330,0)
 ; Outputs
"RTN","ORATRORG",331,0)
 ;   LRVDT: The three tables needed to compute the Verhoeff check
"RTN","ORATRORG",332,0)
 ;    LRVDT(I,Y,X)
"RTN","ORATRORG",333,0)
 ; I=Table id (1=Dihedral multiplication, 2=Function F
"RTN","ORATRORG",334,0)
 ;             3=Inverse D5)  Y=Row  X=Column
"RTN","ORATRORG",335,0)
 N DATA,C,R
"RTN","ORATRORG",336,0)
 K LRVDT
"RTN","ORATRORG",337,0)
 ; table 1
"RTN","ORATRORG",338,0)
 S DATA="0123456789"
"RTN","ORATRORG",339,0)
 F C=0:1:9 S LRVDT(1,0,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",340,0)
 S DATA="1234067895"
"RTN","ORATRORG",341,0)
 F C=0:1:9 S LRVDT(1,1,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",342,0)
 S DATA="2340178956"
"RTN","ORATRORG",343,0)
 F C=0:1:9 S LRVDT(1,2,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",344,0)
 S DATA="3401289567"
"RTN","ORATRORG",345,0)
 F C=0:1:9 S LRVDT(1,3,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",346,0)
 S DATA="4012395678"
"RTN","ORATRORG",347,0)
 F C=0:1:9 S LRVDT(1,4,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",348,0)
 S DATA="5987604321"
"RTN","ORATRORG",349,0)
 F C=0:1:9 S LRVDT(1,5,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",350,0)
 S DATA="6598710432"
"RTN","ORATRORG",351,0)
 F C=0:1:9 S LRVDT(1,6,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",352,0)
 S DATA="7659821043"
"RTN","ORATRORG",353,0)
 F C=0:1:9 S LRVDT(1,7,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",354,0)
 S DATA="8765932104"
"RTN","ORATRORG",355,0)
 F C=0:1:9 S LRVDT(1,8,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",356,0)
 S DATA="9876543210"
"RTN","ORATRORG",357,0)
 F C=0:1:9 S LRVDT(1,9,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",358,0)
 ;
"RTN","ORATRORG",359,0)
 ; table #2
"RTN","ORATRORG",360,0)
 S DATA="0123456789"
"RTN","ORATRORG",361,0)
 F C=0:1:9 S LRVDT(2,0,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",362,0)
 S DATA="1576283094"
"RTN","ORATRORG",363,0)
 F C=0:1:9 S LRVDT(2,1,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",364,0)
 F R=2:1:7 F C=0:1:9 S LRVDT(2,R,C)=LRVDT(2,R-1,LRVDT(2,1,C))
"RTN","ORATRORG",365,0)
 ;
"RTN","ORATRORG",366,0)
 ;table #3
"RTN","ORATRORG",367,0)
 S DATA="0432156789"
"RTN","ORATRORG",368,0)
 F C=0:1:9 S LRVDT(3,C)=$E(DATA,C+1,C+1)
"RTN","ORATRORG",369,0)
 Q
"RTN","ORATRPC")
0^2^B65001210
"RTN","ORATRPC",1,0)
ORATRPC ; DSS/SMP - Abnormal Alert RPCs ; AUG 17, 2012
"RTN","ORATRPC",2,0)
 ;;1.0;VENDOR - DOCUMENT STORAGE SYSTEMS;;7/17/2012;Build 27
"RTN","ORATRPC",3,0)
 Q
"RTN","ORATRPC",4,0)
 ;
"RTN","ORATRPC",5,0)
 ; Documented API and ICRs
"RTN","ORATRPC",6,0)
 ; -----------------------
"RTN","ORATRPC",7,0)
 ; 2056      $$GET1^DIQ
"RTN","ORATRPC",8,0)
 ; 2056      GETS^DIQ
"RTN","ORATRPC",9,0)
 ; 10103     $$FMTE^XLFDT
"RTN","ORATRPC",10,0)
 ; XXXXX     $$NODEDATA^TIUSRVT
"RTN","ORATRPC",11,0)
 ;
"RTN","ORATRPC",12,0)
 ; Return Array Format For PAT and PROV
"RTN","ORATRPC",13,0)
 ;  ^ Piece
"RTN","ORATRPC",14,0)
 ;  1 - Info Flag
"RTN","ORATRPC",15,0)
 ;  2 - Patient Name ABC,PATIE (A4321)
"RTN","ORATRPC",16,0)
 ;  3 - Patient Location
"RTN","ORATRPC",17,0)
 ;  4 - Alert Urgency Level (HIGH, Moderate, low)
"RTN","ORATRPC",18,0)
 ;  5 - Alert Date/Time
"RTN","ORATRPC",19,0)
 ;  6 - Alert Message
"RTN","ORATRPC",20,0)
 ;  7 - Forwarded By/When
"RTN","ORATRPC",21,0)
 ;  8 - XQAID
"RTN","ORATRPC",22,0)
 ;  9 - null
"RTN","ORATRPC",23,0)
 ; 10 - Remove w/o Processing Flag
"RTN","ORATRPC",24,0)
 ; 11 - Forwarding Comments (if applicable)
"RTN","ORATRPC",25,0)
 ; 12 - Pointer to the Order File (#100)
"RTN","ORATRPC",26,0)
 ; 13 - Processing Level
"RTN","ORATRPC",27,0)
 ;
"RTN","ORATRPC",28,0)
 ; Return Array Example
"RTN","ORATRPC",29,0)
 ; RET(1)="^BHYHGDST  (B1022)^^HIGH^06/06/2012@10:15^BCCCR.^^ATR;10000;155^^"
"RTN","ORATRPC",30,0)
 ;
"RTN","ORATRPC",31,0)
PAT() ; RPC - ORATR PATIENT
"RTN","ORATRPC",32,0)
 N ORX,ORNA,ORCNT S ORCNT=1
"RTN","ORATRPC",33,0)
 S ORNA=$NA(^VFD(21695.2,"C",ORDFN)) Q:'$D(@ORNA) 0
"RTN","ORATRPC",34,0)
 S ORX=0 F  S ORX=$O(@ORNA@(ORX)) Q:'ORX  D
"RTN","ORATRPC",35,0)
 .N ORY D GETINFO(ORX) D:$G(ORY)'="" ADD(ORY)
"RTN","ORATRPC",36,0)
 Q 1
"RTN","ORATRPC",37,0)
 ;
"RTN","ORATRPC",38,0)
PROV() ; RPC - ORATR PROVIDER
"RTN","ORATRPC",39,0)
 N ORX,ORX2,ORNA,ORCNT S ORCNT=1
"RTN","ORATRPC",40,0)
 S ORNA=$NA(^VFD(21695.2,"R",ORUSR)) Q:'$D(@ORNA) 0
"RTN","ORATRPC",41,0)
 S ORX=0 F  S ORX=$O(@ORNA@(ORX)) Q:'ORX  D
"RTN","ORATRPC",42,0)
 .S ORX2=0 F  S ORX2=$O(@ORNA@(ORX,ORX2)) Q:'ORX2  D
"RTN","ORATRPC",43,0)
 ..N ORY D GETINFO(ORX,ORX2,1) D:$G(ORY)'="" ADD(ORY)
"RTN","ORATRPC",44,0)
 Q 1
"RTN","ORATRPC",45,0)
 ;
"RTN","ORATRPC",46,0)
NOTE() ; RPC - ORATR GET NOTE
"RTN","ORATRPC",47,0)
 N ORX,ORFLDS,ORIENS,ORDATA,ORERR,ORNA
"RTN","ORATRPC",48,0)
 Q:'$D(^VFD(21695.5,ORNOTE)) -1
"RTN","ORATRPC",49,0)
 S ORIENS=ORNOTE_",",ORFLDS=".02;.03"
"RTN","ORATRPC",50,0)
 D GETS^DIQ(21695.5,ORIENS,ORFLDS,"IE","ORDATA","ORERR")
"RTN","ORATRPC",51,0)
 Q:$D(ORERR) -1  S ORNA=$NA(ORDATA(21695.5,ORIENS))
"RTN","ORATRPC",52,0)
 S ORRET=$G(@ORNA@(.03,"I"))_U_$G(@ORNA@(.03,"E"))_U_$G(@ORNA@(.02,"I"))
"RTN","ORATRPC",53,0)
 Q 1
"RTN","ORATRPC",54,0)
 ;
"RTN","ORATRPC",55,0)
TEMPLATE() ; RPC - ORATR GET TIU TEMPLATE
"RTN","ORATRPC",56,0)
 N ORX Q:'ORRDIEN 0
"RTN","ORATRPC",57,0)
 Q:'$D(^PXRMD(801.41,ORRDIEN)) 0
"RTN","ORATRPC",58,0)
 S ORX=0 F  S ORX=$O(^TIU(8927,ORX)) Q:'ORX  D  ;Q:$D(ORRET)
"RTN","ORATRPC",59,0)
 .Q:$P(^TIU(8927,ORX,0),U,15)'=ORRDIEN
"RTN","ORATRPC",60,0)
 .S ORRET=$$NODEDATA^TIUSRVT(ORX)
"RTN","ORATRPC",61,0)
 Q $D(ORRET)
"RTN","ORATRPC",62,0)
 ;
"RTN","ORATRPC",63,0)
PROCESS(ORIEN,ORPRO) ; RPC - ORATR SET ATR PROCESSING LEVEL
"RTN","ORATRPC",64,0)
 N ORFDA,ORERR
"RTN","ORATRPC",65,0)
 S ORFDA(21695.2,ORIEN_",",1.05)=ORPRO
"RTN","ORATRPC",66,0)
 ; if COMPLETED, put date/time in DATE COMPLETED field
"RTN","ORATRPC",67,0)
 I ORPRO=2 D
"RTN","ORATRPC",68,0)
 .S ORFDA(21695.2,ORIEN_",",1.08)=$$NOW^XLFDT
"RTN","ORATRPC",69,0)
 .N ALERT S ALERT=$$GET1^DIQ(21695.2,ORIEN,.09)
"RTN","ORATRPC",70,0)
 .I ALERT'="" D ACTION^XQALERT(ALERT)
"RTN","ORATRPC",71,0)
 ; if TRANSMITTED, put date in DATE TRANSMITTED field
"RTN","ORATRPC",72,0)
 I ORPRO=3 S ORFDA(21695.2,ORIEN_",",1.06)=$$DT^XLFDT
"RTN","ORATRPC",73,0)
 L +^VFD(21695.2,ORIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATRPC",74,0)
 D UPDATE^DIE("E","ORFDA",,"ORERR")
"RTN","ORATRPC",75,0)
 L -^VFD(21695.2,ORIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATRPC",76,0)
 Q $S('$D(ORERR):1,1:-1)
"RTN","ORATRPC",77,0)
 ;
"RTN","ORATRPC",78,0)
BCCCR(ORIEN) ; RPC - ORATR BCCCR TRANSMIT
"RTN","ORATRPC",79,0)
 ;  1     TAR IEN
"RTN","ORATRPC",80,0)
 ;  2     Patient DFN
"RTN","ORATRPC",81,0)
 ;  3     Site NUM
"RTN","ORATRPC",82,0)
 ;  4     Patient ICN
"RTN","ORATRPC",83,0)
 ;  5     HF Name
"RTN","ORATRPC",84,0)
 ;  6     HF Date
"RTN","ORATRPC",85,0)
 ;  7     HF Deleted (Yes/No)
"RTN","ORATRPC",86,0)
 ;  8     HF BI-RAD
"RTN","ORATRPC",87,0)
 ;  9     HF Contact Method
"RTN","ORATRPC",88,0)
 ; 10     HF Contact Individual
"RTN","ORATRPC",89,0)
 ; 11     Order IEN
"RTN","ORATRPC",90,0)
 ; 12     Order Date
"RTN","ORATRPC",91,0)
 ; 13     Orderable Item Name
"RTN","ORATRPC",92,0)
 ; 14     Orderable Item CPT Code
"RTN","ORATRPC",93,0)
 ; 15     Orderable Item Package
"RTN","ORATRPC",94,0)
 ; 16     Encounter Provider DUZ
"RTN","ORATRPC",95,0)
 ; 17     Ordering Provider DUZ
"RTN","ORATRPC",96,0)
 ;
"RTN","ORATRPC",97,0)
 N DATA,DFN,FLDS,IENS,NA,ORCNT,ORCPT,ORDER,ORERR,ORHF,ORX,ORY,SITE,TYPE
"RTN","ORATRPC",98,0)
 N STATION,ICN
"RTN","ORATRPC",99,0)
 S ORCNT=1,STATION=$P($$SITE^VASITE,U,3)
"RTN","ORATRPC",100,0)
 S IENS=ORIEN_",",FLDS=".01;.04;.12;2;5*;6*"
"RTN","ORATRPC",101,0)
 D GETS^DIQ(21695.2,IENS,FLDS,"I","DATA","ORERR")
"RTN","ORATRPC",102,0)
 ;D GETS^DIQ(21695.2,IENS,FLDS,"IE","DATA","ORERR")
"RTN","ORATRPC",103,0)
 S NA=$NA(DATA(21695.2,IENS)) Q:'$D(@NA)
"RTN","ORATRPC",104,0)
 S DFN=$G(@NA@(.04,"I")),ORX=$G(@NA@(2,"I"))
"RTN","ORATRPC",105,0)
 I $L($T(GETICN^MPIF001)) S ICN=$$GETICN^MPIF001(DFN)
"RTN","ORATRPC",106,0)
 ; GETICN returns ICN_"V"_CHECKSUM
"RTN","ORATRPC",107,0)
 I +ICN=-1 ;DO SOMETHING
"RTN","ORATRPC",108,0)
 S ID=ORIEN_U_DFN_U_STATION_U_ICN_U
"RTN","ORATRPC",109,0)
 S ORX="" F  S ORX=$O(DATA(21695.26,ORX)) Q:ORX=""  D
"RTN","ORATRPC",110,0)
 .D ADD(ID_$$HF(ORX))
"RTN","ORATRPC",111,0)
 S ORX="" F  S ORX=$O(DATA(21695.25,ORX)) Q:ORX=""  D
"RTN","ORATRPC",112,0)
 .N ORDER,ORDATA S ORDER=DATA(21695.25,ORX,.01,"I")
"RTN","ORATRPC",113,0)
 .D ORDATA(ORDER,ID)
"RTN","ORATRPC",114,0)
 Q
"RTN","ORATRPC",115,0)
 ;
"RTN","ORATRPC",116,0)
GETHF ; RPC - ORATR HEALTH FACTORS
"RTN","ORATRPC",117,0)
 ; HEALTH FACTORS       ^AUTTHF(
"RTN","ORATRPC",118,0)
 ; V HEALTH FACTOR      ^AUPNVHF(
"RTN","ORATRPC",119,0)
 N ORIEN,ORHF,ORX,HFIEN,ORFDA,ORERR,CNT,DFN,ORDT
"RTN","ORATRPC",120,0)
 S ORDT=$O(^TMP("ORATRHF","")) Q:'ORDT
"RTN","ORATRPC",121,0)
 S ORIEN=$O(^TMP("ORATRHF",ORDT,"")) Q:'ORIEN  S ORHF=$G(^(ORIEN))
"RTN","ORATRPC",122,0)
 S DFN=$$GET1^DIQ(21695.2,ORIEN,.04,"I"),ORIEN=ORIEN_",",CNT=1
"RTN","ORATRPC",123,0)
 F ORX=2:1:$L(ORHF,U) D
"RTN","ORATRPC",124,0)
 .K ORERR S HF=$$FIND1^DIC(9999999.64,,"X",$P(ORHF,U,ORX),,,"ORERR")
"RTN","ORATRPC",125,0)
 .I '$D(ORERR) S ORHF(HF)=$P(ORHF,U,ORX)
"RTN","ORATRPC",126,0)
 S HF="" F  S HF=$O(ORHF(HF)) Q:'HF  D
"RTN","ORATRPC",127,0)
 .N FLAG S VHF=""
"RTN","ORATRPC",128,0)
 .F  S VHF=$O(^AUPNVHF("B",HF,VHF),-1) Q:'VHF  D  Q:$D(FLAG)
"RTN","ORATRPC",129,0)
 ..Q:'$D(^AUPNVHF("C",DFN,VHF))
"RTN","ORATRPC",130,0)
 ..I $D(^VFD(21695.2,+ORIEN,6,"B",VHF)) S FLAG=1 Q
"RTN","ORATRPC",131,0)
 ..D GETHF1
"RTN","ORATRPC",132,0)
 D:$D(ORFDA)
"RTN","ORATRPC",133,0)
 .L +^VFD(21695.2,ORIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATRPC",134,0)
 .D UPDATE^DIE(,"ORFDA",,"ORERR")
"RTN","ORATRPC",135,0)
 .L -^VFD(21695.2,ORIEN):$S($G(DILOCKTM)>0:DILOCKTM,1:5)
"RTN","ORATRPC",136,0)
 I '$D(ORERR) K ^TMP("ORATRHF",ORDT,+ORIEN)
"RTN","ORATRPC",137,0)
 D FOLLOWUP^ORATR2(+ORIEN)
"RTN","ORATRPC",138,0)
 Q
"RTN","ORATRPC",139,0)
 ;
"RTN","ORATRPC",140,0)
 ;=====================================================================
"RTN","ORATRPC",141,0)
 ;                      R P C   U T I L I T I E S
"RTN","ORATRPC",142,0)
 ;=====================================================================
"RTN","ORATRPC",143,0)
 ;
"RTN","ORATRPC",144,0)
GETINFO(ORIEN,ORSUB,ORPROV) ; gets info for alert at ^VFD(21695.2,ORIEN,"XQA",ORSUB)
"RTN","ORATRPC",145,0)
 ; TOP LEVEL INFORMATION
"RTN","ORATRPC",146,0)
 ; PATIENT               .04
"RTN","ORATRPC",147,0)
 ; ALERT DATE/TIME       .01 (can be obtained thru .01 field)
"RTN","ORATRPC",148,0)
 ; ALERT MESSAGE        1.01
"RTN","ORATRPC",149,0)
 ; XQAID                 .01
"RTN","ORATRPC",150,0)
 ; URGNECY               .1  (can be obtained thru .1 field)
"RTN","ORATRPC",151,0)
 ; CAN DELETE...         .11
"RTN","ORATRPC",152,0)
 ; PATIENT LOCATION      .12
"RTN","ORATRPC",153,0)
 ; DATA FOR PROCESSING  2
"RTN","ORATRPC",154,0)
 ; PROCESSED            1.05
"RTN","ORATRPC",155,0)
 ;
"RTN","ORATRPC",156,0)
 ;
"RTN","ORATRPC",157,0)
 N X,ORX,OROUT,ORIENS,ORFLDS,ORERR,ORSSN,ORNA,ORURG
"RTN","ORATRPC",158,0)
 S ORFLDS=".01;.04;.1;.11;.12;1.01;1.05;1.07;2",ORIENS=ORIEN_","
"RTN","ORATRPC",159,0)
 D GETS^DIQ(21695.2,ORIENS,ORFLDS,"IE","OROUT","ORERR")
"RTN","ORATRPC",160,0)
 S ORNA=$NA(OROUT(21695.2,ORIENS))
"RTN","ORATRPC",161,0)
 ; Patient Name/SSN
"RTN","ORATRPC",162,0)
 S ORX=$G(@ORNA@(.04,"I"))_U_$G(@ORNA@(.04,"E"))
"RTN","ORATRPC",163,0)
 I ORX S ORSSN=$$GET1^DIQ(2,+ORX,.09,"E") D
"RTN","ORATRPC",164,0)
 .S ORX=$E($P(ORX,U,2),1,9)_" (",ORX=ORX_$E(ORX,1)_$E(ORSSN,6,9)_")"
"RTN","ORATRPC",165,0)
 .S $P(ORY,U,2)=ORX
"RTN","ORATRPC",166,0)
 ; Patient Location
"RTN","ORATRPC",167,0)
 S $P(ORY,U,3)=$G(@ORNA@(.12,"E"))
"RTN","ORATRPC",168,0)
 ; Alert Urgency Level
"RTN","ORATRPC",169,0)
 S ORX=$G(@ORNA@(.1,"I"))
"RTN","ORATRPC",170,0)
 I ORX D URGENCY^ORQORB(.ORURG,ORX) S ORURG=$S($G(ORURG)>0:ORURG,1:2) D
"RTN","ORATRPC",171,0)
 .S $P(ORY,U,4)=$S(ORURG=1:"HIGH",ORURG=2:"Moderate",1:"low")
"RTN","ORATRPC",172,0)
 ; Alert Date/Time
"RTN","ORATRPC",173,0)
 S ORX=$P($G(@ORNA@(.01,"I")),";",4)
"RTN","ORATRPC",174,0)
 S $P(ORY,U,5)=$$FMTE^XLFDT(ORX,"7M")
"RTN","ORATRPC",175,0)
 ; Alert Message
"RTN","ORATRPC",176,0)
 S ORX=$G(@ORNA@(1.01,"E")) I $G(ORPROV),$L(ORX,"):")>1 S ORX=$P(ORX,": ",2,99)
"RTN","ORATRPC",177,0)
 S $P(ORY,U,6)=ORX
"RTN","ORATRPC",178,0)
 ; XQAID
"RTN","ORATRPC",179,0)
 ;============================================
"RTN","ORATRPC",180,0)
 ;    Set ORX to the TIU DOCUMENT POINTER
"RTN","ORATRPC",181,0)
 ;============================================
"RTN","ORATRPC",182,0)
 S ORX=$G(@ORNA@(1.07,"I"))
"RTN","ORATRPC",183,0)
 S $P(ORY,U,8)=$G(@ORNA@(.01,"E"))_";"_ORIEN_";"_ORX_U
"RTN","ORATRPC",184,0)
 ; Remove w/o Processing Flag
"RTN","ORATRPC",185,0)
 S $P(ORY,U,10)=$G(@ORNA@(.11,"I"))
"RTN","ORATRPC",186,0)
 ; Pointer to the Order File (#100)
"RTN","ORATRPC",187,0)
 S ORX=$G(@ORNA@(2,"E")) I ORX["@OR" D
"RTN","ORATRPC",188,0)
 .S $P(ORY,U,12)=+ORX
"RTN","ORATRPC",189,0)
 ; Processing Level
"RTN","ORATRPC",190,0)
 S $P(ORY,U,13)=$G(@ORNA@(1.05,"I"))
"RTN","ORATRPC",191,0)
 ; Get latest forwarding information
"RTN","ORATRPC",192,0)
 I '$D(ORSUB) S ORSUB=$$GETSUB(ORIEN)
"RTN","ORATRPC",193,0)
 S ORX=$O(^VFD(21695.2,ORIEN,20,ORSUB,2,"A"),-1)
"RTN","ORATRPC",194,0)
 K @ORNA S ORIENS=ORX_","_ORSUB_","_ORIEN_",",ORFLDS=".01;.03;1.01"
"RTN","ORATRPC",195,0)
 I ORX D GETS^DIQ(21695.212,ORIENS,ORFLDS,"IE","OROUT","ORERR") D
"RTN","ORATRPC",196,0)
 .S ORNA=$NA(OROUT(21695.212,ORIENS))
"RTN","ORATRPC",197,0)
 .; Forwarded by/when
"RTN","ORATRPC",198,0)
 .S ORX=$G(@ORNA@(.03,"E"))_";"_$$FMTE^XLFDT($G(@ORNA@(.01,"I")),"7M")
"RTN","ORATRPC",199,0)
 .S $P(ORY,U,7)=ORX
"RTN","ORATRPC",200,0)
 .; Forwarding Comments (if applicable)
"RTN","ORATRPC",201,0)
 .S $P(ORY,U,11)=$G(@ORNA@(1.01,"E"))
"RTN","ORATRPC",202,0)
 Q
"RTN","ORATRPC",203,0)
 ;
"RTN","ORATRPC",204,0)
GETHF1 ;
"RTN","ORATRPC",205,0)
 N VST,VSTDT
"RTN","ORATRPC",206,0)
 S VST=$$GET1^DIQ(9000010.23,VHF,.03,"I")
"RTN","ORATRPC",207,0)
 S VSTDT=$$GET1^DIQ(9000010,VST,.01,"I")
"RTN","ORATRPC",208,0)
 S ORFDA(21695.26,"+"_CNT_","_ORIEN,.01)=VHF
"RTN","ORATRPC",209,0)
 S ORFDA(21695.26,"+"_CNT_","_ORIEN,.02)=$$GET1^DIQ(9999999.64,HF,.03,"I")
"RTN","ORATRPC",210,0)
 S ORFDA(21695.26,"+"_CNT_","_ORIEN,.03)=ORHF(HF)
"RTN","ORATRPC",211,0)
 S ORFDA(21695.26,"+"_CNT_","_ORIEN,1)=VSTDT
"RTN","ORATRPC",212,0)
 S CNT=CNT+1,FLAG=1
"RTN","ORATRPC",213,0)
 Q
"RTN","ORATRPC",214,0)
 ;
"RTN","ORATRPC",215,0)
ADD(ORSTR) ;
"RTN","ORATRPC",216,0)
 S ORRET(ORCNT)=ORSTR,ORCNT=ORCNT+1
"RTN","ORATRPC",217,0)
 Q
"RTN","ORATRPC",218,0)
 ;
"RTN","ORATRPC",219,0)
GETSUB(ORIEN) ;
"RTN","ORATRPC",220,0)
 N ORX,RET
"RTN","ORATRPC",221,0)
 S ORX=0 F  S ORX=$O(^VFD(21695.2,ORIEN,20,ORX)) Q:'ORX  D
"RTN","ORATRPC",222,0)
 .I $D(^VFD(21695.2,ORIEN,20,ORX,2)) S RET=ORX
"RTN","ORATRPC",223,0)
 Q $G(RET,-1)
"RTN","ORATRPC",224,0)
 ;
"RTN","ORATRPC",225,0)
 ;=====================================================================
"RTN","ORATRPC",226,0)
 ;     U S E D   W I T H   O R A T R   B C C C R   T R A N S M I T
"RTN","ORATRPC",227,0)
 ;=====================================================================
"RTN","ORATRPC",228,0)
 ;
"RTN","ORATRPC",229,0)
HF(IENS) ; Returns information relating to a health factor
"RTN","ORATRPC",230,0)
 ;  5     HF Name
"RTN","ORATRPC",231,0)
 ;  6     HF Date
"RTN","ORATRPC",232,0)
 ;  7     HF Deleted (Yes/No)
"RTN","ORATRPC",233,0)
 ;  8     HF BI-RAD
"RTN","ORATRPC",234,0)
 ;  9     HF Contact Method
"RTN","ORATRPC",235,0)
 ; 10     HF Contact Individual
"RTN","ORATRPC",236,0)
 ; 16     Encounter Provider DUZ
"RTN","ORATRPC",237,0)
 N X,DEL,FLDS,HF,HFDATA,HFERR,PROV,RET,VST
"RTN","ORATRPC",238,0)
 S HF(1)=$G(DATA(21695.26,IENS,.03,"I"))
"RTN","ORATRPC",239,0)
 S HF(2)=$G(DATA(21695.26,IENS,1,"I"))
"RTN","ORATRPC",240,0)
 S DEL=+$G(DATA(21695.26,IENS,.04,"I"))
"RTN","ORATRPC",241,0)
 S HF=$G(DATA(21695.26,IENS,.01,"I"))_",",FLDS=".01;.03;1201;1204;81101"
"RTN","ORATRPC",242,0)
 I 'DEL D
"RTN","ORATRPC",243,0)
 .D GETS^DIQ(9000010.23,HF,FLDS,"IE","HFDATA","HFERR")
"RTN","ORATRPC",244,0)
 S HF(3)=$S('DEL:"No",1:"Yes")
"RTN","ORATRPC",245,0)
 I HF(1)["BI-RAD" S HF(4)=+$P(HF(1),"RAD ",2)
"RTN","ORATRPC",246,0)
 I HF(1)["CONTACT METHOD" D
"RTN","ORATRPC",247,0)
 .S HF(5)=$P(HF(1),":",2)
"RTN","ORATRPC",248,0)
 .S HF(6)=$G(HFDATA(9000010.23,HF,81101,"E"))
"RTN","ORATRPC",249,0)
 S X="" F  S X=$O(HF(X)) Q:'X  S $P(RET,U,X)=HF(X)
"RTN","ORATRPC",250,0)
 S PROV=$G(HFDATA(9000010.23,HF,1204,"I"))
"RTN","ORATRPC",251,0)
 S $P(RET,U,12)=PROV
"RTN","ORATRPC",252,0)
 Q RET
"RTN","ORATRPC",253,0)
 ;
"RTN","ORATRPC",254,0)
ORDATA(IEN,ID) ; Gathers information relating to an order
"RTN","ORATRPC",255,0)
 ; 11     Order IEN
"RTN","ORATRPC",256,0)
 ; 12     Order Date
"RTN","ORATRPC",257,0)
 ; 13     Orderable Item Name
"RTN","ORATRPC",258,0)
 ; 14     Orderable Item CPT Code
"RTN","ORATRPC",259,0)
 ; 15     Orderable Item Package
"RTN","ORATRPC",260,0)
 ; 17     Ordering Provider
"RTN","ORATRPC",261,0)
 N CPT,ORDATA,ORITEM,ORX,PROV S $P(ID,U,11)=IEN
"RTN","ORATRPC",262,0)
 D GETS^DIQ(100,IEN_",",".1*;1;4","IE","ORDATA","ORERR")
"RTN","ORATRPC",263,0)
 S $P(ID,U,12)=$G(ORDATA(100,IEN_",",4,"I"))
"RTN","ORATRPC",264,0)
 S PROV=$G(ORDATA(100,IEN_",",1,"I"))
"RTN","ORATRPC",265,0)
 S ORY="" F  S ORY=$O(ORDATA(100.001,ORY)) Q:ORY=""  D
"RTN","ORATRPC",266,0)
 .N ORX S ORX=ID,ORITEM=ORDATA(100.001,ORY,.01,"I")
"RTN","ORATRPC",267,0)
 .S $P(ORX,U,13)=ORDATA(100.001,ORY,.01,"E")
"RTN","ORATRPC",268,0)
 .S ORX=ORX_U_$$GETORITM(ORITEM),$P(ORX,U,17)=PROV
"RTN","ORATRPC",269,0)
 .D ADD(ORX)
"RTN","ORATRPC",270,0)
 Q
"RTN","ORATRPC",271,0)
 ;
"RTN","ORATRPC",272,0)
GETORITM(ORITEM) ;
"RTN","ORATRPC",273,0)
 N CPT,IENS,ORERR,ORINFO,RET S IENS=ORITEM_","
"RTN","ORATRPC",274,0)
 D GETS^DIQ(101.43,IENS,"1.1;3;4",,"ORINFO","ORERR")
"RTN","ORATRPC",275,0)
 I $G(ORINFO(101.43,IENS,4))["CPT" D
"RTN","ORATRPC",276,0)
 .S CPT=$G(ORINFO(101.43,IENS,3))
"RTN","ORATRPC",277,0)
 .Q:$$GET1^DIQ(81,CPT,5,"I")
"RTN","ORATRPC",278,0)
 .S RET=CPT
"RTN","ORATRPC",279,0)
 S $P(RET,U,2)=$G(ORINFO(101.43,IENS,1.1))
"RTN","ORATRPC",280,0)
 Q RET
"RTN","ORATRPC",281,0)
 ;
"SEC","^DIC",21695,21695,0,"AUDIT")
@
"SEC","^DIC",21695,21695,0,"DD")
@
"SEC","^DIC",21695,21695,0,"DEL")
@
"SEC","^DIC",21695,21695,0,"LAYGO")
@
"SEC","^DIC",21695,21695,0,"RD")
@
"SEC","^DIC",21695,21695,0,"WR")
@
"SEC","^DIC",21695.2,21695.2,0,"AUDIT")
@
"SEC","^DIC",21695.2,21695.2,0,"DD")
@
"SEC","^DIC",21695.2,21695.2,0,"DEL")
@
"SEC","^DIC",21695.2,21695.2,0,"LAYGO")
@
"SEC","^DIC",21695.2,21695.2,0,"RD")
@
"SEC","^DIC",21695.2,21695.2,0,"WR")
@
"SEC","^DIC",21695.5,21695.5,0,"AUDIT")
@
"SEC","^DIC",21695.5,21695.5,0,"DD")
@
"SEC","^DIC",21695.5,21695.5,0,"DEL")
@
"SEC","^DIC",21695.5,21695.5,0,"LAYGO")
@
"SEC","^DIC",21695.5,21695.5,0,"RD")
@
"SEC","^DIC",21695.5,21695.5,0,"WR")
@
"VER")
8.0^22.0
"^DD",21695,21695,0)
FIELD^^7^7
"^DD",21695,21695,0,"DDA")
N
"^DD",21695,21695,0,"DT")
3120628
"^DD",21695,21695,0,"IX","B",21695,.01)

"^DD",21695,21695,0,"NM","VFD ORDER GROUPS")

"^DD",21695,21695,0,"PT",21695,7)

"^DD",21695,21695,0,"VRPK")
VFD VXVISTA UPDATE
"^DD",21695,21695,.01,0)
GROUP NUMBER^NJ15,0XI^^0;1^K X
"^DD",21695,21695,.01,1,0)
^.1
"^DD",21695,21695,.01,1,1,0)
21695^B
"^DD",21695,21695,.01,1,1,1)
S ^VFD(21695,"B",$E(X,1,30),DA)=""
"^DD",21695,21695,.01,1,1,2)
K ^VFD(21695,"B",$E(X,1,30),DA)
"^DD",21695,21695,.01,1,2,0)
^^TRIGGER^21695^.02
"^DD",21695,21695,.01,1,2,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^VFD(21695,D0,0)):^(0),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=$$NOW^XLFDT() S DIH=$G(^VFD(21695,DIV(0),0)),DIV=X S $P(^(0),U,2)=DIV,DIH=21695,DIG=.02 D ^DICR
"^DD",21695,21695,.01,1,2,2)
Q
"^DD",21695,21695,.01,1,2,"%D",0)
^^1^1^3091112^
"^DD",21695,21695,.01,1,2,"%D",1,0)
Trigger for DATE field.
"^DD",21695,21695,.01,1,2,"CREATE VALUE")
S X=$$NOW^XLFDT()
"^DD",21695,21695,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",21695,21695,.01,1,2,"DT")
3091112
"^DD",21695,21695,.01,1,2,"FIELD")
DATE
"^DD",21695,21695,.01,1,3,0)
^^TRIGGER^21695^.03
"^DD",21695,21695,.01,1,3,1)
K DIV S DIV=X,D0=DA,DIV(0)=D0 S Y(1)=$S($D(^VFD(21695,D0,0)):^(0),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S X=$G(DUZ) S DIH=$G(^VFD(21695,DIV(0),0)),DIV=X S $P(^(0),U,3)=DIV,DIH=21695,DIG=.03 D ^DICR
"^DD",21695,21695,.01,1,3,2)
Q
"^DD",21695,21695,.01,1,3,"%D",0)
^^1^1^3091119^
"^DD",21695,21695,.01,1,3,"%D",1,0)
Trigger to populate CREATED BY field with DUZ.
"^DD",21695,21695,.01,1,3,"CREATE VALUE")
S X=$G(DUZ)
"^DD",21695,21695,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",21695,21695,.01,1,3,"DT")
3091119
"^DD",21695,21695,.01,1,3,"FIELD")
CREATED BY
"^DD",21695,21695,.01,3)
NOT EDITABLE
"^DD",21695,21695,.01,21,0)
^.001^1^1^3100205^^^^
"^DD",21695,21695,.01,21,1,0)
The Order Group Number.  This is a unique number.
"^DD",21695,21695,.01,"DT")
3100205
"^DD",21695,21695,.02,0)
DATE CREATED^DI^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695,21695,.02,5,1,0)
21695^.01^2
"^DD",21695,21695,.02,9)
^
"^DD",21695,21695,.02,21,0)
^^1^1^3100205^
"^DD",21695,21695,.02,21,1,0)
Date/Time this record was created.
"^DD",21695,21695,.02,23,0)
^^1^1^3100205^
"^DD",21695,21695,.02,23,1,0)
Populated via Trigger on #.01 field.
"^DD",21695,21695,.02,"DT")
3091113
"^DD",21695,21695,.03,0)
CREATED BY^RP200'I^VA(200,^0;3^Q
"^DD",21695,21695,.03,3)

"^DD",21695,21695,.03,5,1,0)
21695^.01^3
"^DD",21695,21695,.03,9)
^
"^DD",21695,21695,.03,21,0)
^^1^1^3100205^
"^DD",21695,21695,.03,21,1,0)
User that created this record.
"^DD",21695,21695,.03,23,0)
^^1^1^3100205^
"^DD",21695,21695,.03,23,1,0)
Populated via Trigger on #.01 field.
"^DD",21695,21695,.03,"DT")
3091119
"^DD",21695,21695,.04,0)
EVENT^SI^0:UNKNOWN;1:ORDER;2:na;3:PRINT;4:REPRINT;^0;4^Q
"^DD",21695,21695,.04,21,0)
^.001^1^1^3100507^^^^
"^DD",21695,21695,.04,21,1,0)
The event that caused this record to be created.
"^DD",21695,21695,.04,23,0)
^^18^18^3100507^
"^DD",21695,21695,.04,23,1,0)
Event 1: Order.  This event is when the order in CPRS is signed off.  
"^DD",21695,21695,.04,23,2,0)
This is the only Order Group that will contain all of the orders for all
"^DD",21695,21695,.04,23,3,0)
PACKAGE types.
"^DD",21695,21695,.04,23,4,0)
 
"^DD",21695,21695,.04,23,5,0)
Event 2: na.  (formerly named REPRINT).  This event is when the CPRS user
"^DD",21695,21695,.04,23,6,0)
has selected tests to reprint.  The order list is sent to LAB^VFDLRST.  If
"^DD",21695,21695,.04,23,7,0)
any other tests are found that weren't included on the user's order list,
"^DD",21695,21695,.04,23,8,0)
those tests are added in the 'INFO' data elements and returned to CPRS.  
"^DD",21695,21695,.04,23,9,0)
The CPRS user is prompted if they want to include those 'missed' tests as
"^DD",21695,21695,.04,23,10,0)
well.  This event only produces the data array -- it does not create a new
"^DD",21695,21695,.04,23,11,0)
Order Group entry.
"^DD",21695,21695,.04,23,12,0)
 
"^DD",21695,21695,.04,23,13,0)
Event 3: PRINT   This event occurs immediately after Event #1 via CPRS.  
"^DD",21695,21695,.04,23,14,0)
This Order Group will only contain the orders of one PACKAGE type.
"^DD",21695,21695,.04,23,15,0)
 
"^DD",21695,21695,.04,23,16,0)
Event 4: REPRINT   This event occurs once the user has verified that this 
"^DD",21695,21695,.04,23,17,0)
is the order list they wish to reprint.  It is the last step in the 
"^DD",21695,21695,.04,23,18,0)
reprint process.
"^DD",21695,21695,.04,"DT")
3100506
"^DD",21695,21695,5,0)
RELATED ORDER GROUPS^21695.0002^^5;0
"^DD",21695,21695,7,0)
PARENT GROUP^P21695'^VFD(21695,^0;5^Q
"^DD",21695,21695,7,3)
ENTER A RELATED PREVIOUS GROUPING
"^DD",21695,21695,7,21,0)
^^1^1^3120628^
"^DD",21695,21695,7,21,1,0)
This field groups the groups together.
"^DD",21695,21695,7,"DT")
3120628
"^DD",21695,21695,10,0)
IDS^21695.0001^^10;0
"^DD",21695,21695,10,21,0)
^.001^1^1^3100205^^^^
"^DD",21695,21695,10,21,1,0)
The order ID, which is usually the order's OERR number.
"^DD",21695,21695.0001,0)
IDS SUB-FIELD^^2.4^6
"^DD",21695,21695.0001,0,"DT")
3100104
"^DD",21695,21695.0001,0,"IX","B",21695.0001,.01)

"^DD",21695,21695.0001,0,"NM","IDS")

"^DD",21695,21695.0001,0,"UP")
21695
"^DD",21695,21695.0001,.01,0)
ID^FI^^0;1^K:$L(X)>245!($L(X)<1) X
"^DD",21695,21695.0001,.01,1,0)
^.1
"^DD",21695,21695.0001,.01,1,1,0)
21695.0001^B
"^DD",21695,21695.0001,.01,1,1,1)
S ^VFD(21695,DA(1),10,"B",$E(X,1,30),DA)=""
"^DD",21695,21695.0001,.01,1,1,2)
K ^VFD(21695,DA(1),10,"B",$E(X,1,30),DA)
"^DD",21695,21695.0001,.01,1,2,0)
^^TRIGGER^21695.0001^2.2
"^DD",21695,21695.0001,.01,1,2,1)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(1)=$S($D(^VFD(21695,D0,10,D1,2)):^(2),1:"") S X=$P(Y(1),U,2),X=X S DIU=X K Y S X=DIV S X=$$NOW^XLFDT() X ^DD(21695.0001,.01,1,2,1.4)
"^DD",21695,21695.0001,.01,1,2,1.4)
S DIH=$G(^VFD(21695,DIV(0),10,DIV(1),2)),DIV=X S $P(^(2),U,2)=DIV,DIH=21695.0001,DIG=2.2 D ^DICR
"^DD",21695,21695.0001,.01,1,2,2)
Q
"^DD",21695,21695.0001,.01,1,2,"%D",0)
^^2^2^3120425^
"^DD",21695,21695.0001,.01,1,2,"%D",1,0)
Set the DATE CREATED field to current date/time when Field #.01 is
"^DD",21695,21695.0001,.01,1,2,"%D",2,0)
created.
"^DD",21695,21695.0001,.01,1,2,"CREATE VALUE")
S X=$$NOW^XLFDT()
"^DD",21695,21695.0001,.01,1,2,"DELETE VALUE")
NO EFFECT
"^DD",21695,21695.0001,.01,1,2,"DT")
3100104
"^DD",21695,21695.0001,.01,1,2,"FIELD")
#2.2
"^DD",21695,21695.0001,.01,1,3,0)
^^TRIGGER^21695.0001^2.3
"^DD",21695,21695.0001,.01,1,3,1)
K DIV S DIV=X,D0=DA(1),DIV(0)=D0,D1=DA,DIV(1)=D1 S Y(1)=$S($D(^VFD(21695,D0,10,D1,2)):^(2),1:"") S X=$P(Y(1),U,3),X=X S DIU=X K Y S X=DIV S X=DUZ X ^DD(21695.0001,.01,1,3,1.4)
"^DD",21695,21695.0001,.01,1,3,1.4)
S DIH=$G(^VFD(21695,DIV(0),10,DIV(1),2)),DIV=X S $P(^(2),U,3)=DIV,DIH=21695.0001,DIG=2.3 D ^DICR
"^DD",21695,21695.0001,.01,1,3,2)
Q
"^DD",21695,21695.0001,.01,1,3,"%D",0)
^^1^1^3100104^
"^DD",21695,21695.0001,.01,1,3,"%D",1,0)
Set the CREATED BY field to the DUZ when Field #.01 is created.
"^DD",21695,21695.0001,.01,1,3,"CREATE VALUE")
S X=DUZ
"^DD",21695,21695.0001,.01,1,3,"DELETE VALUE")
NO EFFECT
"^DD",21695,21695.0001,.01,1,3,"DT")
3100104
"^DD",21695,21695.0001,.01,1,3,"FIELD")
#2.3
"^DD",21695,21695.0001,.01,3)
Answer must be 1-245 characters in length.
"^DD",21695,21695.0001,.01,21,0)
^^1^1^3100205^
"^DD",21695,21695.0001,.01,21,1,0)
The Identifier to use for this record, usually the OERR # (File #100 IEN).
"^DD",21695,21695.0001,.01,"DT")
3100104
"^DD",21695,21695.0001,1,0)
RECORD LOCATOR^FI^^1;E1,254^K:$L(X)>245!($L(X)<1) X
"^DD",21695,21695.0001,1,3)
Answer must be 1-245 characters in length.
"^DD",21695,21695.0001,1,21,0)
^.001^6^6^3100205^^^
"^DD",21695,21695.0001,1,21,1,0)
This is a free text field which is used to determine the order that this 
"^DD",21695,21695.0001,1,21,2,0)
ID is in reference to.
"^DD",21695,21695.0001,1,21,3,0)
 
"^DD",21695,21695.0001,1,21,4,0)
For example, for Lab orders, the RECORD LOCATOR is:
"^DD",21695,21695.0001,1,21,5,0)
     #69 IEN;#69.01 IEN;#69.03 IEN
"^DD",21695,21695.0001,1,21,6,0)
which gets the record locator down to the ordered test level.
"^DD",21695,21695.0001,1,"DT")
3100205
"^DD",21695,21695.0001,2,0)
PACKAGE^P9.4'I^DIC(9.4,^2;1^Q
"^DD",21695,21695.0001,2,21,0)
^^1^1^3100205^
"^DD",21695,21695.0001,2,21,1,0)
The PACKAGE (File #9.4) this record belongs to.
"^DD",21695,21695.0001,2,"DT")
3100205
"^DD",21695,21695.0001,2.2,0)
DATE CREATED^DI^^2;2^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",21695,21695.0001,2.2,5,1,0)
21695.0001^.01^2
"^DD",21695,21695.0001,2.2,9)
^
"^DD",21695,21695.0001,2.2,21,0)
^^1^1^3100205^
"^DD",21695,21695.0001,2.2,21,1,0)
The date/time this record was created.
"^DD",21695,21695.0001,2.2,23,0)
^^1^1^3100205^
"^DD",21695,21695.0001,2.2,23,1,0)
Populated via Trigger on #.01 field.
"^DD",21695,21695.0001,2.2,"DT")
3100205
"^DD",21695,21695.0001,2.3,0)
CREATED BY^P200'I^VA(200,^2;3^Q
"^DD",21695,21695.0001,2.3,5,1,0)
21695.0001^.01^3
"^DD",21695,21695.0001,2.3,9)
^
"^DD",21695,21695.0001,2.3,21,0)
^^1^1^3100205^
"^DD",21695,21695.0001,2.3,21,1,0)
The person that created this record.
"^DD",21695,21695.0001,2.3,23,0)
^^1^1^3100205^
"^DD",21695,21695.0001,2.3,23,1,0)
Populated via Trigger on #.01 field.
"^DD",21695,21695.0001,2.3,"DT")
3100205
"^DD",21695,21695.0001,2.4,0)
CREATED REASON^SI^0:UNKNOWN;1:NORMAL;2:ORDER ADDED;^2;4^Q
"^DD",21695,21695.0001,2.4,21,0)
^^1^1^3100205^
"^DD",21695,21695.0001,2.4,21,1,0)
The reason this record was created.
"^DD",21695,21695.0001,2.4,"DT")
3100205
"^DD",21695,21695.0002,0)
RELATED ORDER GROUPS SUB-FIELD^^.01^1
"^DD",21695,21695.0002,0,"DT")
3091119
"^DD",21695,21695.0002,0,"IX","B",21695.0002,.01)

"^DD",21695,21695.0002,0,"NM","RELATED ORDER GROUPS")

"^DD",21695,21695.0002,0,"UP")
21695
"^DD",21695,21695.0002,.01,0)
RELATED GROUP NUMBER^MNJ15,0I^^0;1^K:+X'=X!(X>999999999999999)!(X<1)!(X?.E1"."1N.N) X
"^DD",21695,21695.0002,.01,1,0)
^.1
"^DD",21695,21695.0002,.01,1,1,0)
21695.0002^B
"^DD",21695,21695.0002,.01,1,1,1)
S ^VFD(21695,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",21695,21695.0002,.01,1,1,2)
K ^VFD(21695,DA(1),5,"B",$E(X,1,30),DA)
"^DD",21695,21695.0002,.01,3)
Type a Number between 1 and 999999999999999, 0 Decimal Digits
"^DD",21695,21695.0002,.01,"DT")
3100205
"^DD",21695.2,21695.2,0)
FIELD^^1.09^27
"^DD",21695.2,21695.2,0,"DDA")
N
"^DD",21695.2,21695.2,0,"DT")
3121102
"^DD",21695.2,21695.2,0,"IX","APROC",21695.2,1.05)

"^DD",21695.2,21695.2,0,"IX","AUD",21695.211,.04)

"^DD",21695.2,21695.2,0,"IX","B",21695.2,.01)

"^DD",21695.2,21695.2,0,"IX","C",21695.2,.04)

"^DD",21695.2,21695.2,0,"IX","D",21695.2,.02)

"^DD",21695.2,21695.2,0,"IX","PKGID",21695.2,.03)

"^DD",21695.2,21695.2,0,"IX","R",21695.21,.01)

"^DD",21695.2,21695.2,0,"NM","VFD ALERT TRACKING")

"^DD",21695.2,21695.2,.01,0)
NAME^RFI^^0;1^K:$L(X)>50!($L(X)<3)!'(X'?1P.E) X
"^DD",21695.2,21695.2,.01,1,0)
^.1
"^DD",21695.2,21695.2,.01,1,1,0)
21695.2^B
"^DD",21695.2,21695.2,.01,1,1,1)
S ^VFD(21695.2,"B",$E(X,1,50),DA)=""
"^DD",21695.2,21695.2,.01,1,1,2)
K ^VFD(21695.2,"B",$E(X,1,50),DA)
"^DD",21695.2,21695.2,.01,3)
Answer must be 3-50 characters in length.
"^DD",21695.2,21695.2,.01,"DT")
3120906
"^DD",21695.2,21695.2,.02,0)
DATE CREATED^DI^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.2,.02,1,0)
^.1
"^DD",21695.2,21695.2,.02,1,1,0)
21695.2^D
"^DD",21695.2,21695.2,.02,1,1,1)
S ^VFD(21695.2,"D",$E(X,1,30),DA)=""
"^DD",21695.2,21695.2,.02,1,1,2)
K ^VFD(21695.2,"D",$E(X,1,30),DA)
"^DD",21695.2,21695.2,.02,1,1,"DT")
2940707
"^DD",21695.2,21695.2,.02,3)
This is the date and time that the alert was created.
"^DD",21695.2,21695.2,.02,"DT")
3120906
"^DD",21695.2,21695.2,.03,0)
PKG ID^FI^^0;3^K:$L(X)>30!($L(X)<1) X
"^DD",21695.2,21695.2,.03,1,0)
^.1
"^DD",21695.2,21695.2,.03,1,1,0)
21695.2^PKGID
"^DD",21695.2,21695.2,.03,1,1,1)
S ^VFD(21695.2,"PKGID",$E(X,1,30),DA)=""
"^DD",21695.2,21695.2,.03,1,1,2)
K ^VFD(21695.2,"PKGID",$E(X,1,30),DA)
"^DD",21695.2,21695.2,.03,1,1,"DT")
2940707
"^DD",21695.2,21695.2,.03,3)
Answer must be 1-30 characters in length
"^DD",21695.2,21695.2,.03,"DT")
2991110
"^DD",21695.2,21695.2,.04,0)
PATIENT^P2'I^DPT(^0;4^Q
"^DD",21695.2,21695.2,.04,1,0)
^.1
"^DD",21695.2,21695.2,.04,1,1,0)
21695.2^C
"^DD",21695.2,21695.2,.04,1,1,1)
S ^VFD(21695.2,"C",$E(X,1,30),DA)=""
"^DD",21695.2,21695.2,.04,1,1,2)
K ^VFD(21695.2,"C",$E(X,1,30),DA)
"^DD",21695.2,21695.2,.04,1,1,"DT")
2940707
"^DD",21695.2,21695.2,.04,3)
This is the patient which is indicated by the alert.
"^DD",21695.2,21695.2,.04,"DT")
3120906
"^DD",21695.2,21695.2,.05,0)
GENERATED BY^P200'I^VA(200,^0;5^Q
"^DD",21695.2,21695.2,.05,3)
This is the individual who generated the alert
"^DD",21695.2,21695.2,.05,"DT")
2941215
"^DD",21695.2,21695.2,.06,0)
GENERATED WHILE QUEUED^SI^1:YES;^0;6^Q
"^DD",21695.2,21695.2,.06,3)
This field is used to indicate alerts which were generated by queued jobs.
"^DD",21695.2,21695.2,.06,"DT")
2941215
"^DD",21695.2,21695.2,.07,0)
STATUS^SI^U:UNREAD-REMOVED BY DATE;C:COMPLETELY READ;P:PARTIALLY READ - REMOVED;^0;7^Q
"^DD",21695.2,21695.2,.07,3)
This field is used to indicate the status of the alert
"^DD",21695.2,21695.2,.07,"DT")
2941215
"^DD",21695.2,21695.2,.09,0)
ALERT TRACKING^P8992.1'^XTV(8992.1,^0;9^Q
"^DD",21695.2,21695.2,.09,3)
Enter the ALERT that this references
"^DD",21695.2,21695.2,.09,21,0)
^^2^2^3120718^
"^DD",21695.2,21695.2,.09,21,1,0)
This is a pointer to the correspoinding alert in the ALERT TRACKING FILE 
"^DD",21695.2,21695.2,.09,21,2,0)
(#8992.1).  This is just used as a link between the two files.
"^DD",21695.2,21695.2,.09,"DT")
3120718
"^DD",21695.2,21695.2,.1,0)
NOTIFICATION ID^P100.9'^ORD(100.9,^0;10^Q
"^DD",21695.2,21695.2,.1,21,0)
^^2^2^3120718^
"^DD",21695.2,21695.2,.1,21,1,0)
This is a pointer to the OE/RR NOTIFICATION FILE (#100.9) and is used to 
"^DD",21695.2,21695.2,.1,21,2,0)
gauge the urgency of the notification.
"^DD",21695.2,21695.2,.1,"DT")
3120718
"^DD",21695.2,21695.2,.11,0)
CAN DELETE WITHOUT PROCESSING^S^1:YES;^0;11^Q
"^DD",21695.2,21695.2,.11,3)
A value in this field indicates that the alert may be deleted by the user without having processed it.
"^DD",21695.2,21695.2,.11,21,0)
^.001^7^7^3120724^^^
"^DD",21695.2,21695.2,.11,21,1,0)
This field was added as a flag to identify alerts which the packages 
"^DD",21695.2,21695.2,.11,21,2,0)
indicate may be deleted by the user without processing the alert.  The 
"^DD",21695.2,21695.2,.11,21,3,0)
value is optional and is passed by the package which generates the alert 
"^DD",21695.2,21695.2,.11,21,4,0)
if they want to give permission for users to be able to delete the 
"^DD",21695.2,21695.2,.11,21,5,0)
alert.  The flag is checked in the code handling user deletion of 
"^DD",21695.2,21695.2,.11,21,6,0)
alerts.  If an alert involves an action (via an option or routine) it may 
"^DD",21695.2,21695.2,.11,21,7,0)
not be deleted by the user unless this flag is set.
"^DD",21695.2,21695.2,.11,"DT")
3120724
"^DD",21695.2,21695.2,.12,0)
PATIENT LOCATION^V^^0;12^Q
"^DD",21695.2,21695.2,.12,3)
Enter the location of the patient.
"^DD",21695.2,21695.2,.12,21,0)
^^1^1^3120724^
"^DD",21695.2,21695.2,.12,21,1,0)
This is the hospital location from which the order originated.
"^DD",21695.2,21695.2,.12,"DT")
3120724
"^DD",21695.2,21695.2,.12,"V",0)
^.12P^1^1
"^DD",21695.2,21695.2,.12,"V",1,0)
44^HOSPITAL LOCATION^1^H^n^n
"^DD",21695.2,21695.2,1.01,0)
DISPLAY TEXT^FI^^1;1^K:$L(X)>70!($L(X)<2) X
"^DD",21695.2,21695.2,1.01,3)
This is the text displayed for the alert
"^DD",21695.2,21695.2,1.01,"DT")
2941215
"^DD",21695.2,21695.2,1.02,0)
OPTION FOR PROCESSING^FI^^1;2^K:$L(X)>60!($L(X)<1) X
"^DD",21695.2,21695.2,1.02,3)
This is the option which the alert jumps to when the alert is selected for processing
"^DD",21695.2,21695.2,1.02,"DT")
2941215
"^DD",21695.2,21695.2,1.03,0)
ROUTINE TAG^FI^^1;3^K:$L(X)>8!($L(X)<1) X
"^DD",21695.2,21695.2,1.03,3)
This is the tag indicated for the routine specified for use when the alert is selected.
"^DD",21695.2,21695.2,1.03,"DT")
2941215
"^DD",21695.2,21695.2,1.04,0)
ROUTINE FOR PROCESSING^FI^^1;4^K:$L(X)>30!($L(X)<2) X
"^DD",21695.2,21695.2,1.04,3)
This is the routine to be invoked when the alert is selected (if a value exists for TAG, then entry will be at the indicated TAG within the routine).
"^DD",21695.2,21695.2,1.04,"DT")
2941215
"^DD",21695.2,21695.2,1.05,0)
PROCESSED^S^0:NOT PROCESSED;1:PARTIALLY PROCESSED;2:COMPLETED;3:TRANSMITTED;^1;5^Q
"^DD",21695.2,21695.2,1.05,1,0)
^.1
"^DD",21695.2,21695.2,1.05,1,1,0)
21695.2^APROC
"^DD",21695.2,21695.2,1.05,1,1,1)
S ^VFD(21695.2,"APROC",$E(X,1,30),DA)=""
"^DD",21695.2,21695.2,1.05,1,1,2)
K ^VFD(21695.2,"APROC",$E(X,1,30),DA)
"^DD",21695.2,21695.2,1.05,1,1,"DT")
3120917
"^DD",21695.2,21695.2,1.05,3)
Has this notification been processed?
"^DD",21695.2,21695.2,1.05,21,0)
^^19^19^3121003^
"^DD",21695.2,21695.2,1.05,21,1,0)
This field keeps track of the degree of processing that has been done on 
"^DD",21695.2,21695.2,1.05,21,2,0)
this notification.  This field will be used to keep persistent data.
"^DD",21695.2,21695.2,1.05,21,3,0)
There are three possible statuses:
"^DD",21695.2,21695.2,1.05,21,4,0)
 
"^DD",21695.2,21695.2,1.05,21,5,0)
  0 - Not Processed - The provider has not yet begun to process this and
"^DD",21695.2,21695.2,1.05,21,6,0)
                      possibly has not even looked at it yet.
"^DD",21695.2,21695.2,1.05,21,7,0)
 
"^DD",21695.2,21695.2,1.05,21,8,0)
  1 - Partially Processed - The provider has looked at the notification 
"^DD",21695.2,21695.2,1.05,21,9,0)
                            and starting processing it, but have not 
"^DD",21695.2,21695.2,1.05,21,10,0)
                            marked it as complete yet.
"^DD",21695.2,21695.2,1.05,21,11,0)
 
"^DD",21695.2,21695.2,1.05,21,12,0)
  2 - Completed - The provider has marked this notification as complete 
"^DD",21695.2,21695.2,1.05,21,13,0)
                  and is totally finished processing it.
"^DD",21695.2,21695.2,1.05,21,14,0)
 
"^DD",21695.2,21695.2,1.05,21,15,0)
  3 - Transmitted - The notification and follow-up action has been 
"^DD",21695.2,21695.2,1.05,21,16,0)
                    transmitted to the Registry.
"^DD",21695.2,21695.2,1.05,21,17,0)
 
"^DD",21695.2,21695.2,1.05,21,18,0)
A TAR Notification with a status of Transmitted is eligible to be 
"^DD",21695.2,21695.2,1.05,21,19,0)
cleared from this file after a specified amount of time.
"^DD",21695.2,21695.2,1.05,"DT")
3121010
"^DD",21695.2,21695.2,1.06,0)
DATE TRANSMITTED^D^^1;6^S %DT="E" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.2,1.06,21,0)
^^2^2^3120809^
"^DD",21695.2,21695.2,1.06,21,1,0)
This is the date that the notification and follow-up actions were 
"^DD",21695.2,21695.2,1.06,21,2,0)
transmitted to the Registry.  Populated by code.
"^DD",21695.2,21695.2,1.06,"DT")
3121010
"^DD",21695.2,21695.2,1.07,0)
TIU NOTE^P8925'^TIU(8925,^1;7^Q
"^DD",21695.2,21695.2,1.07,21,0)
^^2^2^3121003^
"^DD",21695.2,21695.2,1.07,21,1,0)
This is the TIU Note that was signed when processing this TAR 
"^DD",21695.2,21695.2,1.07,21,2,0)
notification. This note will be used to help determine PROCESSING LEVEL.
"^DD",21695.2,21695.2,1.07,"DT")
3121003
"^DD",21695.2,21695.2,1.08,0)
DATE COMPLETED^D^^1;8^S %DT="ESTR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.2,1.08,21,0)
^.001^2^2^3121010^^^
"^DD",21695.2,21695.2,1.08,21,1,0)
This is the date/time that a TAR notification is marked as COMPLETE.  This
"^DD",21695.2,21695.2,1.08,21,2,0)
field is populated by code.
"^DD",21695.2,21695.2,1.08,"DT")
3121010
"^DD",21695.2,21695.2,1.09,0)
TAR NOTIFICATION TYPE^P21695.5'^VFD(21695.5,^1;9^Q
"^DD",21695.2,21695.2,1.09,21,0)
^.001^2^2^3121107^^
"^DD",21695.2,21695.2,1.09,21,1,0)
This is the type of TAR Notification as described in the VFD TAR CONTROL
"^DD",21695.2,21695.2,1.09,21,2,0)
file (#21695.5).
"^DD",21695.2,21695.2,1.09,"DT")
3121011
"^DD",21695.2,21695.2,2,0)
DATA FOR PROCESSING^FI^^2;E1,245^K:$L(X)>245!($L(X)<1) X
"^DD",21695.2,21695.2,2,3)
This is a string of data elements, which may be separated by any desired character, which will be returned to the application when the alert is selected for processing.
"^DD",21695.2,21695.2,2,"DT")
2941215
"^DD",21695.2,21695.2,3,0)
DAYS TO COMPLETE^CJ8,0^^ ; ^X ^DD(21695.2,3,9.2) S X=$P(Y(21695.2,3,3),U,2),Y=X,X=Y(21695.2,3,2),X=X,X1=X,X2=Y,X="" D:X2 ^%DTC:X1
"^DD",21695.2,21695.2,3,9)
^
"^DD",21695.2,21695.2,3,9.01)
21695.2^.02;21695.2^1.08
"^DD",21695.2,21695.2,3,9.1)
(DATE COMPLETED)-(DATE CREATED)
"^DD",21695.2,21695.2,3,9.2)
S Y(21695.2,3,3)=$S($D(^VFD(21695.2,D0,0)):^(0),1:""),Y(21695.2,3,1)=$S($D(^VFD(21695.2,D0,1)):^(1),1:"") S X=$P(Y(21695.2,3,1),U,8),Y(21695.2,3,2)=$G(X)
"^DD",21695.2,21695.2,3,"DT")
3121011
"^DD",21695.2,21695.2,3.01,0)
GUID FOR GUI^F^^3;1^K:$L(X)>38!($L(X)<38) X
"^DD",21695.2,21695.2,3.01,3)
Answer must be a 38 character GUID {.......}
"^DD",21695.2,21695.2,3.01,21,0)
^^8^8^3010703^
"^DD",21695.2,21695.2,3.01,21,1,0)
This field contains a Globally Unique IDentifier (GUID) which is used to
"^DD",21695.2,21695.2,3.01,21,2,0)
identify the application which should be used in a graphical user
"^DD",21695.2,21695.2,3.01,21,3,0)
interface environment (windows) to process the alert.  This application
"^DD",21695.2,21695.2,3.01,21,4,0)
must implement the IVAlert interface.  The GUID should be of the form
"^DD",21695.2,21695.2,3.01,21,5,0)
 
"^DD",21695.2,21695.2,3.01,21,6,0)
  {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}
"^DD",21695.2,21695.2,3.01,21,7,0)
 
"^DD",21695.2,21695.2,3.01,21,8,0)
where each x is a hexadecimal digit (0 through 9 or A through F).
"^DD",21695.2,21695.2,3.01,"DT")
3010703
"^DD",21695.2,21695.2,4,0)
LONG INFO TEXT^21695.24^^4;0
"^DD",21695.2,21695.2,5,0)
FOLLOW-UP ORDERS^21695.25P^^5;0
"^DD",21695.2,21695.2,6,0)
HEALTH FACTORS^21695.26P^^6;0
"^DD",21695.2,21695.2,6,21,0)
^.001^2^2^3121113^^^^
"^DD",21695.2,21695.2,6,21,1,0)
This multiple contains HEALTH FACTORS that have been triggered in response to
"^DD",21695.2,21695.2,6,21,2,0)
this TAR notification.
"^DD",21695.2,21695.2,20,0)
RECIPIENT^21695.21PA^^20;0
"^DD",21695.2,21695.2,20,"DT")
2980526
"^DD",21695.2,21695.21,0)
RECIPIENT SUB-FIELD^^3^12
"^DD",21695.2,21695.21,0,"IX","B",21695.21,.01)

"^DD",21695.2,21695.21,0,"NM","RECIPIENT")

"^DD",21695.2,21695.21,0,"UP")
21695.2
"^DD",21695.2,21695.21,.01,0)
RECIPIENT^MP200'I^VA(200,^0;1^Q
"^DD",21695.2,21695.21,.01,1,0)
^.1
"^DD",21695.2,21695.21,.01,1,1,0)
21695.21^B
"^DD",21695.2,21695.21,.01,1,1,1)
S ^VFD(21695.2,DA(1),20,"B",$E(X,1,30),DA)=""
"^DD",21695.2,21695.21,.01,1,1,2)
K ^VFD(21695.2,DA(1),20,"B",$E(X,1,30),DA)
"^DD",21695.2,21695.21,.01,1,2,0)
21695.2^R
"^DD",21695.2,21695.21,.01,1,2,1)
S ^VFD(21695.2,"R",$E(X,1,30),DA(1),DA)=""
"^DD",21695.2,21695.21,.01,1,2,2)
K ^VFD(21695.2,"R",$E(X,1,30),DA(1),DA)
"^DD",21695.2,21695.21,.01,1,2,"DT")
2940707
"^DD",21695.2,21695.21,.01,3)
The entry was specified as a receipient of the alert.
"^DD",21695.2,21695.21,.01,"DT")
2980526
"^DD",21695.2,21695.21,.02,0)
ALERT FIRST DISPLAYED^DI^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.21,.02,3)
This is the date and time that the alert was first displayed to the user (during a menu cycle).
"^DD",21695.2,21695.21,.02,"DT")
2941215
"^DD",21695.2,21695.21,.03,0)
FIRST SELECTED ALERT^D^^0;3^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.21,.03,3)
This field indicates when the alert was first selected for processing within the VIEW ALERTS option.
"^DD",21695.2,21695.21,.03,"DT")
2940707
"^DD",21695.2,21695.21,.04,0)
PROCESSED ALERT^DI^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.21,.04,3)
This indicates when the processing of the alert was completed, as indicated by the kill flag not being cleared on return.
"^DD",21695.2,21695.21,.04,"DT")
2941215
"^DD",21695.2,21695.21,.05,0)
DELETED ON^DI^^0;5^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.21,.05,3)
This is the date and time that the alert was deleted for this user.
"^DD",21695.2,21695.21,.05,"DT")
2941215
"^DD",21695.2,21695.21,.06,0)
AUTO DELETED^DI^^0;6^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.21,.06,3)
This is the date and time that the alert was deleted automatically due to the age of the alert.
"^DD",21695.2,21695.21,.06,"DT")
2941215
"^DD",21695.2,21695.21,.07,0)
FORWARDED BY^P200'I^VA(200,^0;7^Q
"^DD",21695.2,21695.21,.07,3)
This is the user who forwarded the alert to the recipient
"^DD",21695.2,21695.21,.07,"DT")
2941215
"^DD",21695.2,21695.21,.08,0)
DATE/TIME FORWARDED^DI^^0;8^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.21,.08,3)
This is the date and time that the alert was forwarded to the recipient.
"^DD",21695.2,21695.21,.08,"DT")
2941215
"^DD",21695.2,21695.21,.09,0)
DELETED BY USER^P200'^VA(200,^0;9^Q
"^DD",21695.2,21695.21,.09,3)
This field is filled in automatically when an alert is deleted for the user, if it was deleted by a user as opposed to deleted during processing.
"^DD",21695.2,21695.21,.09,21,0)
^^5^5^2990203^
"^DD",21695.2,21695.21,.09,21,1,0)
The 'USER DELETED BY' field is poplulated if the alert is deleted for the
"^DD",21695.2,21695.21,.09,21,2,0)
current user by someone (either the user or another person from IRM or an
"^DD",21695.2,21695.21,.09,21,3,0)
ADPAC, etc.) with a delete option as opposed to deletion as a part of the
"^DD",21695.2,21695.21,.09,21,4,0)
processing of the alert.  The field points to the user who selected the
"^DD",21695.2,21695.21,.09,21,5,0)
delete option resulting in deletion of the alert prior to its processing.
"^DD",21695.2,21695.21,.09,"DT")
2990219
"^DD",21695.2,21695.21,1,0)
RECIPIENT TYPE^21695.211PA^^1;0
"^DD",21695.2,21695.21,2,0)
FORWARDED DATE/TIME^21695.212D^^2;0
"^DD",21695.2,21695.21,2,"DT")
3030221
"^DD",21695.2,21695.21,3,0)
SURROGATE FOR^21695.213P^^3;0
"^DD",21695.2,21695.211,0)
RECIPIENT TYPE SUB-FIELD^^.04^4
"^DD",21695.2,21695.211,0,"IX","B",21695.211,.01)

"^DD",21695.2,21695.211,0,"NM","RECIPIENT TYPE")

"^DD",21695.2,21695.211,0,"UP")
21695.21
"^DD",21695.2,21695.211,.01,0)
RECIPIENT TYPE^RP8992.2^XTV(8992.2,^0;1^Q
"^DD",21695.2,21695.211,.01,1,0)
^.1
"^DD",21695.2,21695.211,.01,1,1,0)
21695.211^B
"^DD",21695.2,21695.211,.01,1,1,1)
S ^VFD(21695.2,DA(2),20,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",21695.2,21695.211,.01,1,1,2)
K ^VFD(21695.2,DA(2),20,DA(1),1,"B",$E(X,1,30),DA)
"^DD",21695.2,21695.211,.01,3)
This is a pointer to a file of different recipient types (i.e., the reason someone was sent the alert)
"^DD",21695.2,21695.211,.01,21,0)
^^24^24^3031020^
"^DD",21695.2,21695.211,.01,21,1,0)
This field is used to track how a specific recipient was selected for 
"^DD",21695.2,21695.211,.01,21,2,0)
receiving the alert. The initial recipients are those to whom the alert
"^DD",21695.2,21695.211,.01,21,3,0)
was initially directed (INITIAL RECIPIENT).  Other recipients may be the
"^DD",21695.2,21695.211,.01,21,4,0)
result of forwarding.  Recipients of the alert from forwarding are noted
"^DD",21695.2,21695.211,.01,21,5,0)
by the type of forwarding involved (FWD BY USER, EMAIL SURROGATE,
"^DD",21695.2,21695.211,.01,21,6,0)
CHIEF/SUPERVISOR, BACKUP REVIEWER, or LAST HOPE).
"^DD",21695.2,21695.211,.01,21,7,0)
 
"^DD",21695.2,21695.211,.01,21,8,0)
Marked as a specific category are those to whom the alert was directed,
"^DD",21695.2,21695.211,.01,21,9,0)
but who were not available to receive an alert due to lack of access
"^DD",21695.2,21695.211,.01,21,10,0)
(marked with the suffix "-UNDELIVERABLE" added to the basis for the 
"^DD",21695.2,21695.211,.01,21,11,0)
alert being sent to the user).
"^DD",21695.2,21695.211,.01,21,12,0)
 
"^DD",21695.2,21695.211,.01,21,13,0)
Those who have alerts forwarded to their surrogate or receive the alert 
"^DD",21695.2,21695.211,.01,21,14,0)
while acting as a surrogate for another user are indicated by entries in 
"^DD",21695.2,21695.211,.01,21,15,0)
fields #.02 (SENT TO SURROGATE) and #.03 (ACTING AS SURROGATE), 
"^DD",21695.2,21695.211,.01,21,16,0)
respectively.  In addition, those who are acting as surrogates are 
"^DD",21695.2,21695.211,.01,21,17,0)
identified in the current field by the suffix "-SURROGATE" added to the 
"^DD",21695.2,21695.211,.01,21,18,0)
basis for the alert being received.  Since the recipient may be acting as 
"^DD",21695.2,21695.211,.01,21,19,0)
surrogate for more than one user, the actual users for which the message 
"^DD",21695.2,21695.211,.01,21,20,0)
was sent on a surrogate basis are indicated in the SURROGATE FOR sub-file 
"^DD",21695.2,21695.211,.01,21,21,0)
(#21695.213) under the RECIPIENT sub-file.
"^DD",21695.2,21695.211,.01,21,22,0)
 
"^DD",21695.2,21695.211,.01,21,23,0)
The values stored for this field are pointers to entries in the ALERT 
"^DD",21695.2,21695.211,.01,21,24,0)
RECIPIENT TYPE file (#8992.2).
"^DD",21695.2,21695.211,.01,"DT")
3031020
"^DD",21695.2,21695.211,.02,0)
SENT TO SURROGATE^P200'^VA(200,^0;2^Q
"^DD",21695.2,21695.211,.02,3)
This is the individual that was sent the alert in a surrogate capacity instead of the originally specified recipient.
"^DD",21695.2,21695.211,.02,21,0)
^^2^2^3030221^
"^DD",21695.2,21695.211,.02,21,1,0)
This field is used to identify the surrogate to whom the alert
"^DD",21695.2,21695.211,.02,21,2,0)
was sent instead of this originally specified recipient.
"^DD",21695.2,21695.211,.02,"DT")
3030221
"^DD",21695.2,21695.211,.03,0)
ACTING AS SURROGATE^S^Y:YES;N:NO;^0;3^Q
"^DD",21695.2,21695.211,.03,3)
Enter Y (YES) if this recipient received the alert acting as surrogate for another user.
"^DD",21695.2,21695.211,.03,21,0)
^^3^3^3030220^
"^DD",21695.2,21695.211,.03,21,1,0)
This field is used to identify those recipients who were sent the alert 
"^DD",21695.2,21695.211,.03,21,2,0)
because they were selected as an active surrogate for the originally 
"^DD",21695.2,21695.211,.03,21,3,0)
intended user.  In most cases only the Y (YES) entries will be entered.
"^DD",21695.2,21695.211,.03,"DT")
3030220
"^DD",21695.2,21695.211,.04,0)
ALERT DATE/TIME^D^^0;4^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.211,.04,1,0)
^.1
"^DD",21695.2,21695.211,.04,1,1,0)
21695.2^AUD^MUMPS
"^DD",21695.2,21695.211,.04,1,1,1)
N XQALDA1 S XQALDA1=+^VFD(21695.2,DA(2),20,DA(1),0),^VFD(21695.2,"AUD",XQALDA1,X,DA(2))=""
"^DD",21695.2,21695.211,.04,1,1,2)
N XQALDA1 S XQALDA1=+^VFD(21695.2,DA(2),20,DA(1),0) K ^VFD(21695.2,"AUD",XQALDA1,X,DA(2))
"^DD",21695.2,21695.211,.04,1,1,"DT")
3041028
"^DD",21695.2,21695.211,.04,3)
This is the date and time the alert was sent/forwarded to the current recipient with this recipient type
"^DD",21695.2,21695.211,.04,21,0)
^^2^2^3030221^
"^DD",21695.2,21695.211,.04,21,1,0)
This is the date and time the alert was sent/forwarded to the 
"^DD",21695.2,21695.211,.04,21,2,0)
current recipient with this recipient type
"^DD",21695.2,21695.211,.04,"DT")
3041028
"^DD",21695.2,21695.212,0)
FORWARDED DATE/TIME SUB-FIELD^^1.01^4
"^DD",21695.2,21695.212,0,"IX","B",21695.212,.01)

"^DD",21695.2,21695.212,0,"NM","FORWARDED DATE/TIME")

"^DD",21695.2,21695.212,0,"UP")
21695.21
"^DD",21695.2,21695.212,.01,0)
FORWARDED DATE/TIME^MD^^0;1^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.212,.01,1,0)
^.1
"^DD",21695.2,21695.212,.01,1,1,0)
21695.212^B
"^DD",21695.2,21695.212,.01,1,1,1)
S ^VFD(21695.2,DA(2),20,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",21695.2,21695.212,.01,1,1,2)
K ^VFD(21695.2,DA(2),20,DA(1),2,"B",$E(X,1,30),DA)
"^DD",21695.2,21695.212,.01,3)
This is the date/time that the alert was forwarded to the current recipient
"^DD",21695.2,21695.212,.01,21,0)
^^5^5^3030221^
"^DD",21695.2,21695.212,.01,21,1,0)
This field is used to track the date/time of forwarding of the alert to 
"^DD",21695.2,21695.212,.01,21,2,0)
this recipient.  This is a multiple field to track instances in which 
"^DD",21695.2,21695.212,.01,21,3,0)
multiple copies of the alert may be forwarded to a single recipient for
"^DD",21695.2,21695.212,.01,21,4,0)
various reasons.  This multiple field will indicate when it was forwarded
"^DD",21695.2,21695.212,.01,21,5,0)
and the basis for forwarding of the alert.
"^DD",21695.2,21695.212,.01,"DT")
3030221
"^DD",21695.2,21695.212,.02,0)
FORWARDING CATEGORY^P8992.2^XTV(8992.2,^0;2^Q
"^DD",21695.2,21695.212,.02,3)
This field points to a file containing the different reasons for forwarding.
"^DD",21695.2,21695.212,.02,21,0)
^^8^8^3031020^
"^DD",21695.2,21695.212,.02,21,1,0)
This field is used to track the basis on which the alert is forwarded to 
"^DD",21695.2,21695.212,.02,21,2,0)
the current recipient.  The alert might be forwarded to the recipient by 
"^DD",21695.2,21695.212,.02,21,3,0)
a user directly, or by programmed forwarding related to alerts not being 
"^DD",21695.2,21695.212,.02,21,4,0)
processed within a specified time to EMAIL SURROGATE, CHIEF/SUPERVISOR; 
"^DD",21695.2,21695.212,.02,21,5,0)
BACKUP REVIEWER, or LAST RESORT.
"^DD",21695.2,21695.212,.02,21,6,0)
 
"^DD",21695.2,21695.212,.02,21,7,0)
Entries for this field are pointers to the values in the ALERT RECIPIENT 
"^DD",21695.2,21695.212,.02,21,8,0)
TYPE file (#8992.2).
"^DD",21695.2,21695.212,.02,"DT")
3031020
"^DD",21695.2,21695.212,.03,0)
FORWARDED BY OR FOR^P200'^VA(200,^0;3^Q
"^DD",21695.2,21695.212,.03,3)
This is the individual that forwarded the alert, or the alert was forwarded for.
"^DD",21695.2,21695.212,.03,21,0)
^^2^2^3030404^
"^DD",21695.2,21695.212,.03,21,1,0)
This is a record of the individual who forwarded the alert, or on whose 
"^DD",21695.2,21695.212,.03,21,2,0)
behalf the alert was forwarded if it was forwarded automatically.
"^DD",21695.2,21695.212,.03,"DT")
3030404
"^DD",21695.2,21695.212,1.01,0)
FORWARDING COMMENT^F^^1;1^K:$L(X)>240!($L(X)<1) X
"^DD",21695.2,21695.212,1.01,3)
Answer must be 1-240 characters in length.
"^DD",21695.2,21695.212,1.01,21,0)
^^2^2^3030220^
"^DD",21695.2,21695.212,1.01,21,1,0)
This is the comment which was sent to the recipient along with the 
"^DD",21695.2,21695.212,1.01,21,2,0)
forwarded alert.
"^DD",21695.2,21695.212,1.01,"DT")
3030220
"^DD",21695.2,21695.213,0)
SURROGATE FOR SUB-FIELD^^.03^3
"^DD",21695.2,21695.213,0,"IX","B",21695.213,.01)

"^DD",21695.2,21695.213,0,"NM","SURROGATE FOR")

"^DD",21695.2,21695.213,0,"UP")
21695.21
"^DD",21695.2,21695.213,.01,0)
SURROGATE FOR^MP200'^VA(200,^0;1^Q
"^DD",21695.2,21695.213,.01,1,0)
^.1
"^DD",21695.2,21695.213,.01,1,1,0)
21695.213^B
"^DD",21695.2,21695.213,.01,1,1,1)
S ^VFD(21695.2,DA(2),20,DA(1),3,"B",$E(X,1,30),DA)=""
"^DD",21695.2,21695.213,.01,1,1,2)
K ^VFD(21695.2,DA(2),20,DA(1),3,"B",$E(X,1,30),DA)
"^DD",21695.2,21695.213,.01,3)
Enter the NEW PERSON entry for which the current recipient is acting as surrogate on this alert.
"^DD",21695.2,21695.213,.01,21,0)
^^2^2^3030220^
"^DD",21695.2,21695.213,.01,21,1,0)
This field is used to track which user or users the current recipient is 
"^DD",21695.2,21695.213,.01,21,2,0)
receiving the current alert while acting as surrogate.
"^DD",21695.2,21695.213,.01,"DT")
3030220
"^DD",21695.2,21695.213,.02,0)
DATE/TIME - SURROGATE FOR^D^^0;2^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.213,.02,3)
Enter the date/time that this alert was received while acting as a surrogate for the intended recipient.
"^DD",21695.2,21695.213,.02,21,0)
^^3^3^3030220^
"^DD",21695.2,21695.213,.02,21,1,0)
This field has the date/time when the alert was sent to the current 
"^DD",21695.2,21695.213,.02,21,2,0)
recipient while acting as a surrogate for the originally intended 
"^DD",21695.2,21695.213,.02,21,3,0)
recipient.
"^DD",21695.2,21695.213,.02,"DT")
3030220
"^DD",21695.2,21695.213,.03,0)
DATE-TIME RETURNED^D^^0;3^S %DT="ESTXR" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.213,.03,3)
This is the date-time that the alert was returned to the originally intended recipient
"^DD",21695.2,21695.213,.03,21,0)
^^3^3^3050316^
"^DD",21695.2,21695.213,.03,21,1,0)
This field is a record for the date-time that an alert for which this 
"^DD",21695.2,21695.213,.03,21,2,0)
recipient was acting as a surrogate was returned to the originally 
"^DD",21695.2,21695.213,.03,21,3,0)
intended recipient of the alert.
"^DD",21695.2,21695.213,.03,"DT")
3050316
"^DD",21695.2,21695.24,0)
LONG INFO TEXT SUB-FIELD^^.01^1
"^DD",21695.2,21695.24,0,"NM","LONG INFO TEXT")

"^DD",21695.2,21695.24,0,"UP")
21695.2
"^DD",21695.2,21695.24,.01,0)
LONG INFO TEXT^W^^0;1^Q
"^DD",21695.2,21695.24,.01,3)
Enter text for an information only alert that should be displayed as word-processing text instead of a single line.
"^DD",21695.2,21695.24,.01,21,0)
^^4^4^3000329^
"^DD",21695.2,21695.24,.01,21,1,0)
This field is used to present a long information only alert.  It can be
"^DD",21695.2,21695.24,.01,21,2,0)
any length since it is stored as word processing text.  It is to be
"^DD",21695.2,21695.24,.01,21,3,0)
displayed in a screen-man window on dumb terminals and in a memo box on
"^DD",21695.2,21695.24,.01,21,4,0)
windowed systems.
"^DD",21695.2,21695.24,.01,"DT")
3000329
"^DD",21695.2,21695.25,0)
FOLLOW-UP ORDERS SUB-FIELD^^.02^2
"^DD",21695.2,21695.25,0,"DT")
3120914
"^DD",21695.2,21695.25,0,"IX","B",21695.25,.01)

"^DD",21695.2,21695.25,0,"NM","FOLLOW-UP ORDERS")

"^DD",21695.2,21695.25,0,"UP")
21695.2
"^DD",21695.2,21695.25,.01,0)
FOLLOW-UP ORDERS^P100'^OR(100,^0;1^Q
"^DD",21695.2,21695.25,.01,1,0)
^.1
"^DD",21695.2,21695.25,.01,1,1,0)
21695.25^B
"^DD",21695.2,21695.25,.01,1,1,1)
S ^VFD(21695.2,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",21695.2,21695.25,.01,1,1,2)
K ^VFD(21695.2,DA(1),5,"B",$E(X,1,30),DA)
"^DD",21695.2,21695.25,.01,21,0)
^^2^2^3120914^
"^DD",21695.2,21695.25,.01,21,1,0)
This multiple keeps track of the follow-up orders that are placed in
"^DD",21695.2,21695.25,.01,21,2,0)
response to this TAR.
"^DD",21695.2,21695.25,.01,"DT")
3120914
"^DD",21695.2,21695.25,.02,0)
ORDERABLE ITEMS^Cm^^ ; ^X ^DD(21695.25,.02,9.4) S D0=$P(Y(21695.25,.02,1),U,1) S:'D0!'$D(^OR(100,+D0,0)) D0=-1 S Y(21695.25,.02,181)=$G(D1) X ^DD(21695.25,.02,9.3):D0>0 S X="" S D0=Y(21695.25,.02,80) S D1=Y(21695.25,.02,81)
"^DD",21695.2,21695.25,.02,9)
^
"^DD",21695.2,21695.25,.02,9.01)
100^.1;21695.25^.01
"^DD",21695.2,21695.25,.02,9.1)
FOLLOW-UP ORDERS:ORDERABLE ITEMS
"^DD",21695.2,21695.25,.02,9.2)
F D=0:0 S (D,D1)=$O(^OR(100,D0,.1,"B",DICOB,D)) Q:D'>0  I $D(^OR(100,D0,.1,D,0))#2 S X=$P(^(0),U) S:$D(^ORD(101.43,+X,0)) X=$P(^(0),U) X DICMX Q:'$D(D)  S D=D1
"^DD",21695.2,21695.25,.02,9.3)
S I(101)=""".1""",J(101)=100.001 N DICOB S DICOB="" F  S DICOB=$O(^OR(100,D0,.1,"B",DICOB)) Q:DICOB=""   X ^DD(21695.25,.02,9.2) Q:'$D(D)
"^DD",21695.2,21695.25,.02,9.4)
S Y(21695.25,.02,81)=$G(D1),Y(21695.25,.02,80)=$G(D0),Y(21695.25,.02,1)=$S($D(^VFD(21695.2,D0,5,D1,0)):^(0),1:"")
"^DD",21695.2,21695.25,.02,"DT")
3120927
"^DD",21695.2,21695.26,0)
HEALTH FACTORS SUB-FIELD^^2^6
"^DD",21695.2,21695.26,0,"DT")
3121102
"^DD",21695.2,21695.26,0,"IX","B",21695.26,.01)

"^DD",21695.2,21695.26,0,"NM","HEALTH FACTORS")

"^DD",21695.2,21695.26,0,"UP")
21695.2
"^DD",21695.2,21695.26,.01,0)
HEALTH FACTORS^MP9000010.23'^AUPNVHF(^0;1^Q
"^DD",21695.2,21695.26,.01,1,0)
^.1^^-1
"^DD",21695.2,21695.26,.01,1,1,0)
21695.26^B
"^DD",21695.2,21695.26,.01,1,1,1)
S ^VFD(21695.2,DA(1),6,"B",$E(X,1,30),DA)=""
"^DD",21695.2,21695.26,.01,1,1,2)
K ^VFD(21695.2,DA(1),6,"B",$E(X,1,30),DA)
"^DD",21695.2,21695.26,.01,21,0)
^.001^2^2^3121003^^
"^DD",21695.2,21695.26,.01,21,1,0)
This is a HEALTH FACTOR that was triggered in the follow-up to
"^DD",21695.2,21695.26,.01,21,2,0)
this TAR notification.
"^DD",21695.2,21695.26,.01,"DT")
3121011
"^DD",21695.2,21695.26,.02,0)
FACTOR CATEGORY^P9999999.64'^AUTTHF(^0;2^Q
"^DD",21695.2,21695.26,.02,21,0)
^^1^1^3121102^
"^DD",21695.2,21695.26,.02,21,1,0)
This is the category of the associated health factor.
"^DD",21695.2,21695.26,.02,"DT")
3121102
"^DD",21695.2,21695.26,.03,0)
HEALTH FACTOR NAME^F^^0;3^K:$L(X)>40!($L(X)<3) X
"^DD",21695.2,21695.26,.03,3)
Answer must be 3-40 characters in length.
"^DD",21695.2,21695.26,.03,21,0)
^^1^1^3121102^
"^DD",21695.2,21695.26,.03,21,1,0)
This is the name of the Health Factor.
"^DD",21695.2,21695.26,.03,"DT")
3121102
"^DD",21695.2,21695.26,.04,0)
DELETED^S^1:YES;^0;4^Q
"^DD",21695.2,21695.26,.04,21,0)
^^1^1^3121102^
"^DD",21695.2,21695.26,.04,21,1,0)
This is a flag to mark if the health factor has been deleted.
"^DD",21695.2,21695.26,.04,"DT")
3121102
"^DD",21695.2,21695.26,1,0)
VISIT DATE^D^^0;5^S %DT="EST" D ^%DT S X=Y K:Y<1 X
"^DD",21695.2,21695.26,1,21,0)
^^1^1^3121102^
"^DD",21695.2,21695.26,1,21,1,0)
This is the date/time of the associated health factor.
"^DD",21695.2,21695.26,1,"DT")
3121102
"^DD",21695.2,21695.26,2,0)
DAYS TO NOTIFICATION^CJ8,0^^ ; ^S Y(21695.26,2,2)=$S($D(^VFD(21695.2,D0,0)):^(0),1:""),Y(21695.26,2,1)=$S($D(^VFD(21695.2,D0,6,D1,0)):^(0),1:"") S X=$P(Y(21695.26,2,1),U,5),X1=X,X2=$P(Y(21695.26,2,2),U,2),X="" D:X2 ^%DTC:X1
"^DD",21695.2,21695.26,2,9)
^
"^DD",21695.2,21695.26,2,9.01)
21695.2^.02;21695.26^1
"^DD",21695.2,21695.26,2,9.1)
VISIT DATE-DATE CREATED
"^DD",21695.2,21695.26,2,"DT")
3121113
"^DD",21695.5,21695.5,0)
FIELD^^.06^11
"^DD",21695.5,21695.5,0,"DDA")
N
"^DD",21695.5,21695.5,0,"DT")
3121115
"^DD",21695.5,21695.5,0,"IX","AB",21695.52,.01)

"^DD",21695.5,21695.5,0,"IX","B",21695.5,.01)

"^DD",21695.5,21695.5,0,"IX","C",21695.51,.01)

"^DD",21695.5,21695.5,0,"IX","CR",21695.55,.01)

"^DD",21695.5,21695.5,0,"IX","D",21695.54,.01)

"^DD",21695.5,21695.5,0,"NM","VFD TAR CONTROL")

"^DD",21695.5,21695.5,0,"PT",21695.2,1.09)

"^DD",21695.5,21695.5,.01,0)
TYPE^RF^^0;1^K:$L(X)>50!($L(X)<3)!'(X'?1P.E) X
"^DD",21695.5,21695.5,.01,1,0)
^.1
"^DD",21695.5,21695.5,.01,1,1,0)
21695.5^B
"^DD",21695.5,21695.5,.01,1,1,1)
S ^VFD(21695.5,"B",$E(X,1,30),DA)=""
"^DD",21695.5,21695.5,.01,1,1,2)
K ^VFD(21695.5,"B",$E(X,1,30),DA)
"^DD",21695.5,21695.5,.01,3)
Answer must be 3-50 characters in length.
"^DD",21695.5,21695.5,.01,21,0)
^^2^2^3120917^
"^DD",21695.5,21695.5,.01,21,1,0)
This is the type of TAR (Tracking of Abnormal Results) notification that 
"^DD",21695.5,21695.5,.01,21,2,0)
will be generated.
"^DD",21695.5,21695.5,.01,"DT")
3120917
"^DD",21695.5,21695.5,.02,0)
REMINDER DIALOG^P801.41'^PXRMD(801.41,^0;2^Q
"^DD",21695.5,21695.5,.02,3)
Enter a REMINDER DIALOG.
"^DD",21695.5,21695.5,.02,21,0)
^^1^1^3120917^
"^DD",21695.5,21695.5,.02,21,1,0)
This is the default reminder dialog for this type of TAR notification.
"^DD",21695.5,21695.5,.02,"DT")
3120917
"^DD",21695.5,21695.5,.03,0)
INITIAL NOTE^P8925.1'^TIU(8925.1,^0;3^Q
"^DD",21695.5,21695.5,.03,3)
Enter the name of a TIU NOTE.
"^DD",21695.5,21695.5,.03,21,0)
^^1^1^3120917^
"^DD",21695.5,21695.5,.03,21,1,0)
This is the name of the note used as the initial plan of care.
"^DD",21695.5,21695.5,.03,"DT")
3120917
"^DD",21695.5,21695.5,.04,0)
INACTIVE^S^0:NO;1:YES;^0;4^Q
"^DD",21695.5,21695.5,.04,3)
Is this type of TAR Notificaation inactive?
"^DD",21695.5,21695.5,.04,21,0)
^^3^3^3121012^
"^DD",21695.5,21695.5,.04,21,1,0)
This is a flag to turn off this particular type of TAR Notification.  If an
"^DD",21695.5,21695.5,.04,21,2,0)
entry is marked as INACTIVE, TAR Notifcations matching the entry will not be 
"^DD",21695.5,21695.5,.04,21,3,0)
generated.
"^DD",21695.5,21695.5,.04,"DT")
3121012
"^DD",21695.5,21695.5,.05,0)
RECIPIENTS^F^^0;5^K:$L(X)>8!($L(X)<1) X
"^DD",21695.5,21695.5,.05,3)
Answer must be 1-8 characters in length.
"^DD",21695.5,21695.5,.05,21,0)
^^24^24^3121107^
"^DD",21695.5,21695.5,.05,21,1,0)
Set of codes indicating default provider recipients of a notification by 
"^DD",21695.5,21695.5,.05,21,2,0)
their title or relationship to the patient.  Notifications can be set up 
"^DD",21695.5,21695.5,.05,21,3,0)
with any or all of the following codes:
"^DD",21695.5,21695.5,.05,21,4,0)
 
"^DD",21695.5,21695.5,.05,21,5,0)
P (Primary Provider): deliver notification to  the patient's Primary 
"^DD",21695.5,21695.5,.05,21,6,0)
Provider.  
"^DD",21695.5,21695.5,.05,21,7,0)
 
"^DD",21695.5,21695.5,.05,21,8,0)
A (Attending Physician): deliver notification to the patient's Attending 
"^DD",21695.5,21695.5,.05,21,9,0)
Physician.
"^DD",21695.5,21695.5,.05,21,10,0)
 
"^DD",21695.5,21695.5,.05,21,11,0)
T (Patient Care Team): deliver notification to the patient's  primary 
"^DD",21695.5,21695.5,.05,21,12,0)
care Team.
"^DD",21695.5,21695.5,.05,21,13,0)
 
"^DD",21695.5,21695.5,.05,21,14,0)
M (PCMM Team): deliver notification to users/providers linked to the 
"^DD",21695.5,21695.5,.05,21,15,0)
patient via PCMM Team Position assignments.
"^DD",21695.5,21695.5,.05,21,16,0)
 
"^DD",21695.5,21695.5,.05,21,17,0)
E (Encounter Provider): deliver notification to the encounter provider 
"^DD",21695.5,21695.5,.05,21,18,0)
who is associated with the health factors generating this notification.
"^DD",21695.5,21695.5,.05,21,19,0)
 
"^DD",21695.5,21695.5,.05,21,20,0)
R (PCMM Primary Care Practitioner): deliver notification to the patient's 
"^DD",21695.5,21695.5,.05,21,21,0)
PCMM Primary Care Practitioner.
"^DD",21695.5,21695.5,.05,21,22,0)
 
"^DD",21695.5,21695.5,.05,21,23,0)
S (PCMM Associate Provider): deliver notification to the patient's PCMM 
"^DD",21695.5,21695.5,.05,21,24,0)
Associate Provider.
"^DD",21695.5,21695.5,.05,"DT")
3121107
"^DD",21695.5,21695.5,.06,0)
TRANSMIT TO BCR^S^1:YES;0:NO;^0;6^Q
"^DD",21695.5,21695.5,.06,21,0)
^^3^3^3121120^
"^DD",21695.5,21695.5,.06,21,1,0)
If this field is marked YES, all the collected information for this type 
"^DD",21695.5,21695.5,.06,21,2,0)
of notification will be transmitted to the Breast Care Registry (BCR).  
"^DD",21695.5,21695.5,.06,21,3,0)
Otherwise, no information will be transmitted.
"^DD",21695.5,21695.5,.06,"DT")
3121120
"^DD",21695.5,21695.5,1,0)
ORDERABLE ITEM^21695.51P^^1;0
"^DD",21695.5,21695.5,1,21,0)
^^2^2^3120917^
"^DD",21695.5,21695.5,1,21,1,0)
This multiple contains ORDERABLE ITEMS that identify an alert as an
"^DD",21695.5,21695.5,1,21,2,0)
abnormal alert.
"^DD",21695.5,21695.5,1,"DT")
3120618
"^DD",21695.5,21695.5,2,0)
OR NOTIFICATION^21695.52P^^2;0
"^DD",21695.5,21695.5,2,21,0)
^^2^2^3121003^
"^DD",21695.5,21695.5,2,21,1,0)
This multiple contains OR/EE NOTIFICATIONS that are used to trigger this
"^DD",21695.5,21695.5,2,21,2,0)
type of TAR notification.
"^DD",21695.5,21695.5,2,"DT")
3120928
"^DD",21695.5,21695.5,3,0)
DEFAULT TEXT^F^^3;1^K:$L(X)>200!($L(X)<1) X
"^DD",21695.5,21695.5,3,3)
Answer must be 1-200 characters in length.
"^DD",21695.5,21695.5,3,21,0)
^^2^2^3120917^
"^DD",21695.5,21695.5,3,21,1,0)
This is the default text for a TAR notification and will only be used
"^DD",21695.5,21695.5,3,21,2,0)
if there is no other text associated with the notification.
"^DD",21695.5,21695.5,3,"DT")
3121003
"^DD",21695.5,21695.5,4,0)
LAB TEST^21695.54PA^^4;0
"^DD",21695.5,21695.5,4,21,0)
^.001^2^2^3120919^^
"^DD",21695.5,21695.5,4,21,1,0)
This multiple contains LABORATORY TESTS that are associated with this type
"^DD",21695.5,21695.5,4,21,2,0)
of TAR notification.
"^DD",21695.5,21695.5,5,0)
REMINDER DEFINITION^21695.55PA^^5;0
"^DD",21695.5,21695.5,5,21,0)
^.001^2^2^3120919^^
"^DD",21695.5,21695.5,5,21,1,0)
This multiple contains REMINDER DEFINITIONS that are associated with this 
"^DD",21695.5,21695.5,5,21,2,0)
type of TAR notification.
"^DD",21695.5,21695.51,0)
ORDERABLE ITEM SUB-FIELD^^.01^1
"^DD",21695.5,21695.51,0,"DT")
3120718
"^DD",21695.5,21695.51,0,"IX","B",21695.51,.01)

"^DD",21695.5,21695.51,0,"NM","ORDERABLE ITEM")

"^DD",21695.5,21695.51,0,"UP")
21695.5
"^DD",21695.5,21695.51,.01,0)
ORDERABLE ITEM^MP101.43'^ORD(101.43,^0;1^Q
"^DD",21695.5,21695.51,.01,1,0)
^.1
"^DD",21695.5,21695.51,.01,1,1,0)
21695.51^B
"^DD",21695.5,21695.51,.01,1,1,1)
S ^VFD(21695.5,DA(1),1,"B",$E(X,1,30),DA)=""
"^DD",21695.5,21695.51,.01,1,1,2)
K ^VFD(21695.5,DA(1),1,"B",$E(X,1,30),DA)
"^DD",21695.5,21695.51,.01,1,2,0)
21695.5^C
"^DD",21695.5,21695.51,.01,1,2,1)
S ^VFD(21695.5,"C",$E(X,1,30),DA(1),DA)=""
"^DD",21695.5,21695.51,.01,1,2,2)
K ^VFD(21695.5,"C",$E(X,1,30),DA(1),DA)
"^DD",21695.5,21695.51,.01,1,2,"DT")
3120718
"^DD",21695.5,21695.51,.01,3)
Enter an ORDERABLE ITEM that will trigger this type of TAR notification.
"^DD",21695.5,21695.51,.01,21,0)
^^2^2^3120917^
"^DD",21695.5,21695.51,.01,21,1,0)
This is the name of an orderable item that is associated with this type 
"^DD",21695.5,21695.51,.01,21,2,0)
of TAR notification.
"^DD",21695.5,21695.51,.01,"DT")
3120917
"^DD",21695.5,21695.52,0)
OR NOTIFICATION SUB-FIELD^^.01^1
"^DD",21695.5,21695.52,0,"DT")
3120928
"^DD",21695.5,21695.52,0,"IX","B",21695.52,.01)

"^DD",21695.5,21695.52,0,"NM","OR NOTIFICATION")

"^DD",21695.5,21695.52,0,"UP")
21695.5
"^DD",21695.5,21695.52,.01,0)
OR NOTIFICATIONS^MP100.9'^ORD(100.9,^0;1^Q
"^DD",21695.5,21695.52,.01,1,0)
^.1
"^DD",21695.5,21695.52,.01,1,1,0)
21695.52^B
"^DD",21695.5,21695.52,.01,1,1,1)
S ^VFD(21695.5,DA(1),2,"B",$E(X,1,30),DA)=""
"^DD",21695.5,21695.52,.01,1,1,2)
K ^VFD(21695.5,DA(1),2,"B",$E(X,1,30),DA)
"^DD",21695.5,21695.52,.01,1,2,0)
21695.5^AB
"^DD",21695.5,21695.52,.01,1,2,1)
S ^VFD(21695.5,"AB",$E(X,1,30),DA(1),DA)=""
"^DD",21695.5,21695.52,.01,1,2,2)
K ^VFD(21695.5,"AB",$E(X,1,30),DA(1),DA)
"^DD",21695.5,21695.52,.01,1,2,"DT")
3120928
"^DD",21695.5,21695.52,.01,3)
Enter an OR/EE Notification.
"^DD",21695.5,21695.52,.01,21,0)
^.001^1^1^3120928^^
"^DD",21695.5,21695.52,.01,21,1,0)
This is an OR/EE NOTIFICATION that is associated with this type of TAR notification.
"^DD",21695.5,21695.52,.01,"DT")
3120928
"^DD",21695.5,21695.54,0)
LAB TEST SUB-FIELD^^.01^1
"^DD",21695.5,21695.54,0,"DT")
3120911
"^DD",21695.5,21695.54,0,"IX","B",21695.54,.01)

"^DD",21695.5,21695.54,0,"NM","LAB TEST")

"^DD",21695.5,21695.54,0,"UP")
21695.5
"^DD",21695.5,21695.54,.01,0)
LAB TEST^MP60'^LAB(60,^0;1^Q
"^DD",21695.5,21695.54,.01,1,0)
^.1
"^DD",21695.5,21695.54,.01,1,1,0)
21695.54^B
"^DD",21695.5,21695.54,.01,1,1,1)
S ^VFD(21695.5,DA(1),4,"B",$E(X,1,30),DA)=""
"^DD",21695.5,21695.54,.01,1,1,2)
K ^VFD(21695.5,DA(1),4,"B",$E(X,1,30),DA)
"^DD",21695.5,21695.54,.01,1,2,0)
21695.5^D
"^DD",21695.5,21695.54,.01,1,2,1)
S ^VFD(21695.5,"D",$E(X,1,30),DA(1),DA)=""
"^DD",21695.5,21695.54,.01,1,2,2)
K ^VFD(21695.5,"D",$E(X,1,30),DA(1),DA)
"^DD",21695.5,21695.54,.01,1,2,"%D",0)
^^1^1^3120911^
"^DD",21695.5,21695.54,.01,1,2,"%D",1,0)
Cross-references the whole file by LAB TEST.
"^DD",21695.5,21695.54,.01,1,2,"DT")
3120911
"^DD",21695.5,21695.54,.01,3)
Enter a lab test to be tracked.
"^DD",21695.5,21695.54,.01,21,0)
^.001^2^2^3120919^^
"^DD",21695.5,21695.54,.01,21,1,0)
This is a LABORATORY TEST that is associated with this type of TAR 
"^DD",21695.5,21695.54,.01,21,2,0)
notification.
"^DD",21695.5,21695.54,.01,"DT")
3120917
"^DD",21695.5,21695.55,0)
REMINDER DEFINITION SUB-FIELD^^.01^1
"^DD",21695.5,21695.55,0,"DT")
3120919
"^DD",21695.5,21695.55,0,"IX","B",21695.55,.01)

"^DD",21695.5,21695.55,0,"NM","REMINDER DEFINITION")

"^DD",21695.5,21695.55,0,"UP")
21695.5
"^DD",21695.5,21695.55,.01,0)
REMINDER DEFINITION^MP811.9'^PXD(811.9,^0;1^Q
"^DD",21695.5,21695.55,.01,1,0)
^.1
"^DD",21695.5,21695.55,.01,1,1,0)
21695.55^B
"^DD",21695.5,21695.55,.01,1,1,1)
S ^VFD(21695.5,DA(1),5,"B",$E(X,1,30),DA)=""
"^DD",21695.5,21695.55,.01,1,1,2)
K ^VFD(21695.5,DA(1),5,"B",$E(X,1,30),DA)
"^DD",21695.5,21695.55,.01,1,2,0)
21695.5^CR
"^DD",21695.5,21695.55,.01,1,2,1)
S ^VFD(21695.5,"CR",$E(X,1,30),DA(1),DA)=""
"^DD",21695.5,21695.55,.01,1,2,2)
K ^VFD(21695.5,"CR",$E(X,1,30),DA(1),DA)
"^DD",21695.5,21695.55,.01,1,2,"DT")
3120919
"^DD",21695.5,21695.55,.01,3)
Enter a reminder definition to be evaluated.
"^DD",21695.5,21695.55,.01,21,0)
^.001^2^2^3120919^^
"^DD",21695.5,21695.55,.01,21,1,0)
This is a REMINDER DEFINITION that is associated with this type of TAR.  
"^DD",21695.5,21695.55,.01,21,2,0)
If this reminder is true, a notification will be sent.
"^DD",21695.5,21695.55,.01,"DT")
3120919
"^DIC",21695,21695,0)
VFD ORDER GROUPS^21695
"^DIC",21695,21695,0,"GL")
^VFD(21695,
"^DIC",21695,21695,"%D",0)
^1.001^3^3^3100319^^
"^DIC",21695,21695,"%D",1,0)
DSS Order Groups file.
"^DIC",21695,21695,"%D",2,0)
 
"^DIC",21695,21695,"%D",3,0)
This file should only be populated via software.
"^DIC",21695,"B","VFD ORDER GROUPS",21695)

"^DIC",21695.2,21695.2,0)
VFD ALERT TRACKING^21695.2
"^DIC",21695.2,21695.2,0,"GL")
^VFD(21695.2,
"^DIC",21695.2,21695.2,"%",0)
^1.005^^
"^DIC",21695.2,21695.2,"%D",0)
^^13^13^3121003^
"^DIC",21695.2,21695.2,"%D",1,0)
This file is used to track notifications for the TAR (Tracking of Abnormal
"^DIC",21695.2,21695.2,"%D",2,0)
Results) project.  It is a modified version of the ALERT TRACKING file
"^DIC",21695.2,21695.2,"%D",3,0)
with fields added to complete the tracking of abnormal results.  Each
"^DIC",21695.2,21695.2,"%D",4,0)
entry has the date and time that the notification was generated, the
"^DIC",21695.2,21695.2,"%D",5,0)
object of the notification (patient), the level of processing and a
"^DIC",21695.2,21695.2,"%D",6,0)
multiple field that identifies each user that the notification was sent
"^DIC",21695.2,21695.2,"%D",7,0)
to. There are also multiples that track HEALTH FACTORS and follow-up
"^DIC",21695.2,21695.2,"%D",8,0)
ORDERS that are related to the notification.
"^DIC",21695.2,21695.2,"%D",9,0)
 
"^DIC",21695.2,21695.2,"%D",10,0)
Once a notification is mark as TRANSMITTED, it will be eligible to be 
"^DIC",21695.2,21695.2,"%D",11,0)
purged from this file.  The number of days to wait before purging a
"^DIC",21695.2,21695.2,"%D",12,0)
notification is stored in the parameter ORATR DAYS TO PURGE.  If the
"^DIC",21695.2,21695.2,"%D",13,0)
parameter has no value, the default period is 30 days.
"^DIC",21695.2,"B","VFD ALERT TRACKING",21695.2)

"^DIC",21695.5,21695.5,0)
VFD TAR CONTROL^21695.5
"^DIC",21695.5,21695.5,0,"GL")
^VFD(21695.5,
"^DIC",21695.5,21695.5,"%",0)
^1.005^^
"^DIC",21695.5,21695.5,"%D",0)
^1.001^2^2^3120921^^^^
"^DIC",21695.5,21695.5,"%D",1,0)
This file is used to screen what constitutes a trackable abnormal test
"^DIC",21695.5,21695.5,"%D",2,0)
result.
"^DIC",21695.5,"B","VFD TAR CONTROL",21695.5)

**END**
**END**
